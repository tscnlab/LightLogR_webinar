<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Johannes Zauner">
<title>Open and reproducible analysis of light exposure and visual experience data (Beginner) – LightLogR Webinar</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-6bd9cfa162949bde0a231f530c97869d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="styles.css">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">LightLogR Webinar</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./assets/Online_course_series_2025-26.pdf" target="_blank"> 
<span class="menu-text">Course flyer</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./beginner.html" aria-current="page"> 
<span class="menu-text">Beginner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About / Funding</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./license.html"> 
<span class="menu-text">License</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/tscnlab/LightLogR_webinar"> <i class="bi bi-github" role="img" aria-label="Quarto GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#preface" id="toc-preface" class="nav-link active" data-scroll-target="#preface">Preface</a></li>
  <li><a href="#how-this-page-works" id="toc-how-this-page-works" class="nav-link" data-scroll-target="#how-this-page-works">How this page works</a></li>
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation">Installation</a></li>
  <li>
<a href="#import" id="toc-import" class="nav-link" data-scroll-target="#import">Import</a>
  <ul class="collapse">
<li><a href="#file-formats" id="toc-file-formats" class="nav-link" data-scroll-target="#file-formats">File formats</a></li>
  <li><a href="#importing-a-file" id="toc-importing-a-file" class="nav-link" data-scroll-target="#importing-a-file">Importing a file</a></li>
  <li><a href="#importing-from-a-different-device" id="toc-importing-from-a-different-device" class="nav-link" data-scroll-target="#importing-from-a-different-device">Importing from a different device</a></li>
  <li><a href="#importing-more-than-one-file" id="toc-importing-more-than-one-file" class="nav-link" data-scroll-target="#importing-more-than-one-file">Importing more than one file</a></li>
  <li><a href="#how-to-find-the-correct-time-zone-name" id="toc-how-to-find-the-correct-time-zone-name" class="nav-link" data-scroll-target="#how-to-find-the-correct-time-zone-name">How to find the correct time zone name?</a></li>
  </ul>
</li>
  <li>
<a href="#basic-visualizations" id="toc-basic-visualizations" class="nav-link" data-scroll-target="#basic-visualizations">Basic Visualizations</a>
  <ul class="collapse">
<li><a href="#gg_days" id="toc-gg_days" class="nav-link" data-scroll-target="#gg_days"><code>gg_days()</code></a></li>
  <li><a href="#gg_day" id="toc-gg_day" class="nav-link" data-scroll-target="#gg_day"><code>gg_day()</code></a></li>
  <li><a href="#gg_overview" id="toc-gg_overview" class="nav-link" data-scroll-target="#gg_overview"><code>gg_overview()</code></a></li>
  <li><a href="#gg_heatmap" id="toc-gg_heatmap" class="nav-link" data-scroll-target="#gg_heatmap"><code>gg_heatmap()</code></a></li>
  <li><a href="#what-about-non-light-variables" id="toc-what-about-non-light-variables" class="nav-link" data-scroll-target="#what-about-non-light-variables">What about non-light variables?</a></li>
  </ul>
</li>
  <li>
<a href="#validation" id="toc-validation" class="nav-link" data-scroll-target="#validation">Validation</a>
  <ul class="collapse">
<li><a href="#preparing-the-dataset" id="toc-preparing-the-dataset" class="nav-link" data-scroll-target="#preparing-the-dataset">Preparing the dataset</a></li>
  <li><a href="#gap_table" id="toc-gap_table" class="nav-link" data-scroll-target="#gap_table"><code>gap_table()</code></a></li>
  <li><a href="#gap_handler" id="toc-gap_handler" class="nav-link" data-scroll-target="#gap_handler"><code>gap_handler()</code></a></li>
  <li><a href="#remove_partial_data" id="toc-remove_partial_data" class="nav-link" data-scroll-target="#remove_partial_data"><code>remove_partial_data()</code></a></li>
  </ul>
</li>
  <li>
<a href="#metrics" id="toc-metrics" class="nav-link" data-scroll-target="#metrics">Metrics</a>
  <ul class="collapse">
<li><a href="#principles" id="toc-principles" class="nav-link" data-scroll-target="#principles">Principles</a></li>
  <li><a href="#use-of-summarize" id="toc-use-of-summarize" class="nav-link" data-scroll-target="#use-of-summarize">Use of <code>summarize()</code></a></li>
  </ul>
</li>
  <li>
<a href="#photoperiod" id="toc-photoperiod" class="nav-link" data-scroll-target="#photoperiod">Photoperiod</a>
  <ul class="collapse">
<li><a href="#photoperiod-in-visualizations" id="toc-photoperiod-in-visualizations" class="nav-link" data-scroll-target="#photoperiod-in-visualizations">Photoperiod in visualizations</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  </ul>
</li>
  <li>
<a href="#distribution-of-light-exposure" id="toc-distribution-of-light-exposure" class="nav-link" data-scroll-target="#distribution-of-light-exposure">Distribution of light exposure</a>
  <ul class="collapse">
<li><a href="#log-zero-inflated-with-metrics" id="toc-log-zero-inflated-with-metrics" class="nav-link" data-scroll-target="#log-zero-inflated-with-metrics">Log zero-inflated with metrics</a></li>
  </ul>
</li>
  <li>
<a href="#summaries" id="toc-summaries" class="nav-link" data-scroll-target="#summaries">Summaries</a>
  <ul class="collapse">
<li><a href="#summary-plot" id="toc-summary-plot" class="nav-link" data-scroll-target="#summary-plot">Summary plot</a></li>
  <li><a href="#summary-table" id="toc-summary-table" class="nav-link" data-scroll-target="#summary-table">Summary table</a></li>
  </ul>
</li>
  <li>
<a href="#processing-states" id="toc-processing-states" class="nav-link" data-scroll-target="#processing-states">Processing &amp; states</a>
  <ul class="collapse">
<li><a href="#aggregate_datetime" id="toc-aggregate_datetime" class="nav-link" data-scroll-target="#aggregate_datetime"><code>aggregate_Datetime()</code></a></li>
  <li><a href="#aggregate_date" id="toc-aggregate_date" class="nav-link" data-scroll-target="#aggregate_date"><code>aggregate_Date()</code></a></li>
  <li><a href="#gg_doubleplot" id="toc-gg_doubleplot" class="nav-link" data-scroll-target="#gg_doubleplot"><code>gg_doubleplot()</code></a></li>
  <li><a href="#beyond-inital-variables" id="toc-beyond-inital-variables" class="nav-link" data-scroll-target="#beyond-inital-variables">Beyond inital variables</a></li>
  <li><a href="#states" id="toc-states" class="nav-link" data-scroll-target="#states">States</a></li>
  <li><a href="#durations" id="toc-durations" class="nav-link" data-scroll-target="#durations"><code>durations()</code></a></li>
  <li><a href="#extract_states-summarize_numeric" id="toc-extract_states-summarize_numeric" class="nav-link" data-scroll-target="#extract_states-summarize_numeric"><code>extract_states()</code> &amp; <code>summarize_numeric()</code></a></li>
  </ul>
</li>
  <li><a href="#its-a-wrap" id="toc-its-a-wrap" class="nav-link" data-scroll-target="#its-a-wrap">It’s a wrap</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/tscnlab/LightLogR_webinar/edit/main/beginner.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/tscnlab/LightLogR_webinar/issues" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Open and reproducible analysis of light exposure and visual experience data (Beginner)</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Johannes Zauner </p>
          </div>
  </div>
    
  
    
  </div>
  


</header><p><a href="assets/Beginner_Heading.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="assets/Beginner_Heading.png" class="img-fluid"></a></p>
<section id="preface" class="level2"><h2 class="anchored" data-anchor-id="preface">Preface</h2>
<p>Wearables are increasingly used in research because they combine personalized, high‑temporal‑resolution measurements with outcomes related to well‑being and health. In sleep research, wrist‑worn actimetry is long established. As circadian factors gain prominence across disciplines, interest in personal light exposure has grown, spurring a variety of new devices, form factors, and sensor technologies. This trend also brings many researchers into settings where data from wearables must be ingested, processed, and analyzed. Beyond circadian science, measurements of light and optical radiation are central to UV‑related research and to questions of ocular health and development.</p>
<p><code>LightLogR</code> is designed to facilitate the principled import, processing, and visualization of such wearable‑derived data. This document offers an accessible entry point to <code>LightLogR</code> via a self‑contained analysis script that you can modify to familiarize yourself with the package. Full documentation of <code>LightLogR</code>’s features is available on the <a href="https://tscnlab.github.io/LightLogR/">documentation page</a>, including numerous tutorials.</p>
<p>This document is intended for researchers with no prior experience using <code>LightLogR</code>, and assumes general familiarity with the R statistical software, ideally in a data‑science context<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
</section><section id="how-this-page-works" class="level2"><h2 class="anchored" data-anchor-id="how-this-page-works">How this page works</h2>
<p>This document runs a self‑contained version of R <strong>completely in your browser</strong><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. No setup or installation is required. You can execute the same [script] in a traditional R environment, but this browser‑based approach has several advantages:</p>
<ul>
<li>You can get started in seconds, avoiding configuration differences across machines and getting to the interesting part quickly.</li>
<li>Unlike a static tutorial, you can modify code to test the effects of different arguments and functions and receive immediate feedback.</li>
<li>Because everything runs locally in your browser, there are no additional server‑side security risks and minimal network‑related slowdowns.</li>
</ul>
<p>This approach also comes with a few drawbacks:</p>
<ul>
<li>R and all required packages are loaded every time you load the page. If you close the page or navigate elsewhere in the same tab, webR must be re‑initialized and your session state is lost.</li>
<li>Certain functions do not behave as they would in a traditional runtime. For example, saving plot images directly to your local machine (e.g., with <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave()</a></code>) is not supported. If you need these capabilities, run the <a href="">script</a> on your local R installation. In most cases, however, you can interact with the code as you would locally.</li>
<li>Depending on your browser and system settings, functionality or output may differ. Common differences include default fonts and occasional plot background colors. If you encounter an issue, please describe it in detail—along with your system information (hardware, OS, browser)—in the <a href="https://github.com/tscnlab/LightLogR_webinar/issues">issues</a> section of the GitHub repository. This helps us to improve your experience moving forward.</li>
</ul></section><section id="installation" class="level2"><h2 class="anchored" data-anchor-id="installation">Installation</h2>
<p><code>LightLogR</code> is hosted on <a href="https://cran.r-project.org/package=LightLogR">CRAN</a>, which means it can easily be installed from any R console through the following command:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"LightLogR"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>After installation, it becomes available for the current session by loading the package. We also require a number of packages. Most are automatically downloaded with <code>LightLogR</code>, but need to be loaded separately. Some might have to be installed separately on your local machine.</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tscnlab/LightLogR">LightLogR</a></span><span class="op">)</span> <span class="co">#load the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span> <span class="co">#a package for tidy data science</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com">gt</a></span><span class="op">)</span> <span class="co">#a package for great tables</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/cowplot/">cowplot</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://teunbrand.github.io/legendry/">legendry</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rnaturalearth/">rnaturalearth</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rnaturalearthdata/">rnaturalearthdata</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com">patchwork</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org">rlang</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://glue.tidyverse.org/">glue</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jthomasmock/gtExtras">gtExtras</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#the next two scripts will be integrated into the next release of LightLogR</span></span>
<span><span class="co">#but have to be loaded separately for now (≤0.9.3)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"scripts/overview_plot.R"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"scripts/summary_table.R"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set a global theme for the background</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_set</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>      panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"white"</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>That is all we need to get started. Let’s make a quick visualization of a sample dataset that comes preloaded with the package. It contains six days of data from a participant, with concurrent measurements of environmental light exposure at the university rooftop. You can play with the arguments to see how it changes the output.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">sample.data.environment</span> <span class="op">|&gt;</span> <span class="co">#sample data</span></span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"ribbon"</span>, </span>
<span>          aes_fill <span class="op">=</span> <span class="va">Id</span>, </span>
<span>          alpha <span class="op">=</span> <span class="fl">0.6</span>, </span>
<span>          facetting <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>          <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_photoperiod.html">gg_photoperiod</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">47.1</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-3-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="beginner_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="960"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="import" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="import">Import</h2>
<section id="file-formats" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="file-formats">File formats</h3>
<p>To work with <code>LightLogR</code>, we need some data from wearables. To the side are screenshots from three example formats to highlight the structure and differences. You can enlarge by clicking at them.</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="assets/File_Actlumus.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="ActLumus file structure"><img src="assets/File_Actlumus.png" class="img-fluid figure-img" alt="ActLumus file structure"></a></p>
<figcaption>ActLumus file structure</figcaption></figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="assets/File_Speccy.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="Speccy file structure"><img src="assets/File_Speccy.png" class="img-fluid figure-img" alt="Speccy file structure"></a></p>
<figcaption>Speccy file structure</figcaption></figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="assets/File_nanoLambda.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="nanoLambda file structure"><img src="assets/File_nanoLambda.png" class="img-fluid figure-img" alt="nanoLambda file structure"></a></p>
<figcaption>nanoLambda file structure</figcaption></figure>
</div>
</div></div></section><section id="importing-a-file" class="level3"><h3 class="anchored" data-anchor-id="importing-a-file">Importing a file</h3>
<p>These files must be loaded into the active session in a <em>tidy</em> format—each variable in its own column and each observation in its own row. <code>LightLogR</code>’s device‑specific <code>import</code> functions take care of this transformation. Each function requires:</p>
<ul>
<li>filenames and paths to the wearable export files</li>
<li>the time zone in which the data were collected</li>
<li>(optional) participant identifiers</li>
</ul>
<p>We begin with a dataset bundled with the package, recorded with the <code>ActLumus</code> device. The data were collected in <em>Tübingen, Germany</em>, so the correct time zone is <code>Europe/Berlin</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#accessing the filepath of the package to reach the sample dataset:</span></span>
<span><span class="va">filename</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata/205_actlumus_Log_1020_20230904101707532.txt.zip"</span>, </span>
<span>              package <span class="op">=</span> <span class="st">"LightLogR"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="va">import</span><span class="op">$</span><span class="fu">ActLumus</span><span class="op">(</span><span class="va">filename</span>, tz <span class="op">=</span> <span class="st">"Europe/Berlin"</span>, manual.id <span class="op">=</span> <span class="st">"P1"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Successfully read in 61'016 observations across 1 Ids from 1 ActLumus-file(s).
Timezone set is Europe/Berlin.

First Observation: 2023-08-28 08:47:54
Last Observation: 2023-09-04 10:17:04
Timespan: 7.1 days

Observation intervals: 
  Id    interval.time     n pct  
1 P1    10s           61015 100% </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-5-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="beginner_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="480"></a></p>
</figure>
</div>
</div>
</div>
<p>The import function also provides rich summary information about the dataset—such as the time span covered, sampling intervals, and an overview plot. Most import settings are configurable. To learn more, consult the function documentation online or via <code><a href="https://tscnlab.github.io/LightLogR/reference/import_Dataset.html">?import</a></code>. For a quick visual overview of the data across days, draw a timeline with <code><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="beginner_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
<p>We will go into much more detail about visualizations in the sections below.</p>
</section><section id="importing-from-a-different-device" class="level3"><h3 class="anchored" data-anchor-id="importing-from-a-different-device">Importing from a different device</h3>
<p>Each device exports data in its own format, necessitating device‑specific handling. <code>LightLogR</code> includes import wrapper functions for many devices. You can retrieve the list supported by your installed version with the following function:</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/supported_devices.html">supported_devices</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Actiwatch_Spectrum"    "Actiwatch_Spectrum_de" "ActLumus"             
 [4] "ActTrust"              "Circadian_Eye"         "Clouclip"             
 [7] "DeLux"                 "GENEActiv_GGIR"        "Kronowise"            
[10] "LiDo"                  "LightWatcher"          "LIMO"                 
[13] "LYS"                   "MotionWatch8"          "nanoLambda"           
[16] "OcuWEAR"               "Speccy"                "SpectraWear"          
[19] "VEET"                 </code></pre>
</div>
</div>
<p>We will now import from two other devices to showcase the differences.</p>
<section id="speccy" class="level4"><h4 class="anchored" data-anchor-id="speccy">Speccy</h4>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">filename</span> <span class="op">&lt;-</span> <span class="st">"data/Speccy.csv"</span></span>
<span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="va">import</span><span class="op">$</span><span class="fu">Speccy</span><span class="op">(</span><span class="va">filename</span>, tz <span class="op">=</span> <span class="st">"Europe/Berlin"</span>, manual.id <span class="op">=</span> <span class="st">"P1"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Successfully read in 1'336 observations across 1 Ids from 1 Speccy-file(s).
Timezone set is Europe/Berlin.

First Observation: 2023-08-31 09:34:26
Last Observation: 2023-09-01 07:49:26
Timespan: 22 hours

Observation intervals: 
  Id    interval.time        n pct  
1 P1    60s (~1 minutes)  1335 100% </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="beginner_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="480"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-9-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="beginner_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="480"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="nanolambda" class="level4"><h4 class="anchored" data-anchor-id="nanolambda">nanoLambda</h4>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">filename</span> <span class="op">&lt;-</span> <span class="st">"data/nanoLambda.csv"</span></span>
<span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="va">import</span><span class="op">$</span><span class="fu">nanoLambda</span><span class="op">(</span><span class="va">filename</span>, tz <span class="op">=</span> <span class="st">"Europe/Berlin"</span>, manual.id <span class="op">=</span> <span class="st">"P1"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Successfully read in 19 observations across 1 Ids from 1 nanoLambda-file(s).
Timezone set is Europe/Berlin.

First Observation: 2020-04-13 13:38:54
Last Observation: 2020-04-13 13:47:54
Timespan: 9 mins

Observation intervals: 
  Id    interval.time     n pct  
1 P1    30s              18 100% </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-10-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="beginner_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="480"></a></p>
</figure>
</div>
</div>
</div>
<p>If we try to visualize this dataset as we have done above, we get an error.</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_day.html">gg_day</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is because many <code>LightLogR</code> functions default to the melanopic EDI variable[^3]. However, the nanoLambda export does not include this variable. Therefore, we must explicitly specify which variable to display. Let’s inspect the available variables:</p>
<p>[^3] melanopic equivalent daylight-illuminance, CIE S026:2018</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Id"                   "File_Name"            "Device_Address"      
 [4] "Sensor_ID"            "Datetime"             "Is_Saturate"         
 [7] "Integration_Time(ms)" "Wavelength"           "Spectrum"            
[10] "PPFD_Spectrum"        "Photopic_Lux"         "Cyanopic_Lux"        
[13] "Melanopic_Lux"        "Rhodopic_Lux"         "Chloropic_Lux"       
[16] "Erythropic_Lux"       "PPFD"                 "PPFD-R"              
[19] "PPFD-G"               "PPFD-B"               "CCT"                 
[22] "CRI"                  "XYZ"                  "xy"                  
[25] "uv"                   "file.name"           </code></pre>
</div>
</div>
<p>You can choose any numeric variable; here, we’ll use <code>Melanopic_Lux</code>, which is similar—though not identical—to melanopic EDI. To identify which argument to adjust, consult the function documentation:</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">?</span><span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_day.html">gg_day</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use the <code>y.axis</code> argument to select the variable. Also update the axis title via <code>y.axis.label</code>; otherwise the default label will refer to melanopic EDI.</p>
<p>Because this dataset spans only a short interval of about 9 minutes, we’ll visualize it with <code><a href="https://tscnlab.github.io/LightLogR/reference/gg_day.html">gg_day()</a></code>, which uses clock time on the x‑axis. There are a few other differences to <code><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days()</a></code>, which we will see in the sections below.</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_day.html">gg_day</a></span><span class="op">(</span>y.axis <span class="op">=</span> <span class="va">Melanopic_Lux</span>, y.axis.label <span class="op">=</span> <span class="st">"melanopic illuminance"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-14-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="beginner_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="576"></a></p>
</figure>
</div>
</div>
</div>
<p>In summary, importing from different devices is typically as simple as specifying the device name. Some devices require additional arguments; consult the <code><a href="https://tscnlab.github.io/LightLogR/reference/import_Dataset.html">?import</a></code> help for details.</p>
</section></section><section id="importing-more-than-one-file" class="level3"><h3 class="anchored" data-anchor-id="importing-more-than-one-file">Importing more than one file</h3>
<p>In typical studies, you’ll work with multiple participants, and importing each file individually is cumbersome. <code>LightLogR</code> supports batch imports; simply pass multiple files to the import function. In this tutorial, we’ll use three files from three participants, all drawn from the open‑access personal light‑exposure dataset by <a href="https://github.com/MeLiDosProject/GuidolinEtAl_Dataset_2025">Guidolin et al.&nbsp;2025</a><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. All data were collected with the <code>ActLumus</code> device type.</p>
<p>When importing multiple files, keep the following in mind:</p>
<ul>
<li>All files must originate from the same device type, share the same export structure, and use the same time‑zone specification. If they differ, import them separately.</li>
<li>Be deliberate about participant‑ID assignment. The <code>manual.id</code> argument used above would assign the same ID to all imported data in a batch. If a file contains a column specifying the <code>Id</code>, you can point to that column; more often, the identifier is encoded in the filename. If you omit ID arguments, the filename is used as <code>Id</code> by default. Because filenames are often verbose, you will typically extract only the participant code. In our three example files, the relevant IDs are <code>216</code>, <code>218</code>, and <code>219</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">filenames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="st">"data"</span>, pattern <span class="op">=</span> <span class="st">"actlumus"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">filenames</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data/216_actlumus_Log_1382_20231009130709885.txt"
[2] "data/218_actlumus_Log_1020_2023102309585329.txt" 
[3] "data/219_actlumus_Log_1382_20231023113046652.txt"</code></pre>
</div>
</div>
<p>If filenames follow a consistent pattern, you can instruct the import function to extract only the participant code from each name. In our case, the first three digits encode the ID. We can specify this with a regular expression: <code>^(\d{3})</code>. This pattern matches the first three digits at the start of the filename and captures them (<code>^</code> = start of string, <code>\d</code> = digit, <code>{3}</code> = exactly three, <code>(</code>&amp; <code>)</code> = encloses the part of the pattern we actually want). If you’re not familiar with regular expressions, they can look like a jumble of ASCII characters, but they succinctly express patterns. Large language models are quite good at proposing regexes and explaining their components, so consider prompting one when you need a new pattern. With that, we can import our files.</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">pattern</span> <span class="op">&lt;-</span> <span class="st">"^(\\d{3})"</span></span>
<span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="va">import</span><span class="op">$</span><span class="fu">ActLumus</span><span class="op">(</span><span class="va">filenames</span>, tz <span class="op">=</span> <span class="st">"Europe/Berlin"</span>, auto.id <span class="op">=</span> <span class="va">pattern</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Successfully read in 184'333 observations across 3 Ids from 3 ActLumus-file(s).
Timezone set is Europe/Berlin.

First Observation: 2023-09-29 14:40:52
Last Observation: 2023-10-23 11:29:10
Timespan: 24 days

Observation intervals: 
   Id    interval.time            n pct  
 1 216   10s                  61760 100% 
 2 216   19s                      1 0%   
 3 216   240718s (~2.79 days)     1 0%   
 4 218   8s                       1 0%   
 5 218   10s                  60929 100% 
 6 218   11s                      1 0%   
 7 219   9s                       1 0%   
 8 219   10s                  61634 100% 
 9 219   16s                      1 0%   
10 219   583386s (~6.75 days)     1 0%   </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-16-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="beginner_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="480"></a></p>
</figure>
</div>
</div>
</div>
<p>The overview plot is now more informative: it shows how the datasets align across time and highlights extended gaps due to missing data. We will return to the terminology of <code>implicit missingness</code> shortly.</p>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-17-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="beginner_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
<p>Direct plotting highlights the extended gaps in the recordings. We’ll apply a package function that removes days with insufficient coverage to address this. For now, we can ignore the details: any participant‑day with more than 80% missing data will be excluded.</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset_red</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">dataset</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/remove_partial_data.html">remove_partial_data</a></span><span class="op">(</span></span>
<span>    Variable.colname <span class="op">=</span> <span class="va">MEDI</span>,</span>
<span>    threshold.missing <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>    by.date <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    handle.gaps <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">dataset_red</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-18-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="beginner_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
<p>That concludes the import section of the tutorial; next, we turn to visualization functions. For simplicitly, we will only carry a small selection of variables forward. That increases the calculation speed of many functions. Feel free to choose a different set of variables.</p>
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">Id</span>, <span class="va">Datetime</span>, <span class="va">PIM</span>, <span class="va">MEDI</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="how-to-find-the-correct-time-zone-name" class="level3"><h3 class="anchored" data-anchor-id="how-to-find-the-correct-time-zone-name">How to find the correct time zone name?</h3>
<p>A final note on imports: the function accepts only valid <a href="https://www.iana.org/time-zones">IANA time‑zone</a> identifiers. You can retrieve the full list (with exact spellings) using:</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/timezones.html">OlsonNames</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "America/Creston"    "Europe/San_Marino"  "Africa/Kinshasa"   
[4] "Pacific/Tongatapu"  "Antarctica/McMurdo"</code></pre>
</div>
</div>
</section></section><section id="basic-visualizations" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="basic-visualizations">Basic Visualizations</h2>
<p>Visualization is central to exploratory data analysis and to communicating results in publications and presentations. <code>LightLogR</code> provides a suite of plotting functions built on <code>ggplot2</code> and the <em>Grammar of Graphics</em>. As a result, the plots are composable, flexible, and straightforward to modify.</p>
<section id="gg_days" class="level3"><h3 class="anchored" data-anchor-id="gg_days"><code>gg_days()</code></h3>
<p><code><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days()</a></code> displays a timeline per each <code>Id</code>. It constrains the x‑axis to complete days and, by default, uses a line geometry. The function works best for up to a handful of Id’s and 1-2 weeks of data at most.</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset_red</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days</a></span><span class="op">(</span>aes_col <span class="op">=</span> <span class="va">Id</span><span class="op">)</span> <span class="co">#try interactive = TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-21-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="beginner_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="gg_day" class="level3"><h3 class="anchored" data-anchor-id="gg_day"><code>gg_day()</code></h3>
<p><code><a href="https://tscnlab.github.io/LightLogR/reference/gg_day.html">gg_day()</a></code> complements <code><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days()</a></code> by focusing on individual calendar days. By default, it places all observations from a selected day into a single panel, regardless of source. This layout is configurable. For readability, <code><a href="https://tscnlab.github.io/LightLogR/reference/gg_day.html">gg_day()</a></code> works best with ~1–4 days of data (at most about a week) to keep plot height manageable.</p>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset_red</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_day.html">gg_day</a></span><span class="op">(</span>aes_col <span class="op">=</span> <span class="va">Id</span>, </span>
<span>         format.day <span class="op">=</span> <span class="st">"%A"</span>, <span class="co"># switch from dates to week-days</span></span>
<span>         size <span class="op">=</span> <span class="fl">0.5</span>, <span class="co"># reduce point size</span></span>
<span>         x.axis.breaks <span class="op">=</span> <span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/hms.html">hms</a></span><span class="op">(</span>hours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co">#12-hour grid </span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span> <span class="co"># remove color legend</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span>rows <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">Day.data</span><span class="op">)</span>, cols <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">Id</span><span class="op">)</span>, switch <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span> <span class="co"># Id x Day</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-22-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16"><img src="beginner_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="768"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="gg_overview" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="gg_overview"><code>gg_overview()</code></h3>
<p><code><a href="https://tscnlab.github.io/LightLogR/reference/gg_overview.html">gg_overview()</a></code> is invoked automatically by the import function but can also be called independently and customized. By default, each <code>Id</code> appears as a separate row on the y‑axis. For longitudinal datasets with large gaps between recordings, you can group observations (e.g., by a <code>session</code> variable) to distinguish distinct measurement periods (see margin figure). The function works nice for many participants and long collection periods, by setting their recording periods in relation. By default, it will also show times of implicitly missing data.</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="assets/Overview.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17" title="Grouping the data by Id and measurement session provides easy overviews for longitudinal datasets"><img src="assets/Overview.png" class="img-fluid figure-img" alt="Grouping the data by Id and measurement session provides easy overviews for longitudinal datasets"></a></p>
<figcaption>Grouping the data by <code>Id</code> and measurement <code>session</code> provides easy overviews for longitudinal datasets</figcaption></figure>
</div>
</div></div><div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_overview.html">gg_overview</a></span><span class="op">(</span>col <span class="op">=</span> <span class="va">Id</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggsci</span><span class="fu">::</span><span class="fu"><a href="https://nanx.me/ggsci/reference/scale_jco.html">scale_color_jco</a></span><span class="op">(</span><span class="op">)</span> <span class="co">#nice color palette</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-23-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-18"><img src="beginner_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="480"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="gg_heatmap" class="level3"><h3 class="anchored" data-anchor-id="gg_heatmap"><code>gg_heatmap()</code></h3>
<p><code><a href="https://tscnlab.github.io/LightLogR/reference/gg_heatmap.html">gg_heatmap()</a></code> renders one calendar day per row within each data‑collection period. It is well‑suited to long monitoring spans and scales effectively to many participants. To highlight patterns that cross midnight, it supports a <code>doubleplot</code> option that displays a duplicate of the day, or the next day with an offset.</p>
<div class="cell">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset_red</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_heatmap.html">gg_heatmap</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-24-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-19"><img src="beginner_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="960"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Looking at 5-minute bins of data</span></span>
<span><span class="va">dataset_red</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_heatmap.html">gg_heatmap</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"5 mins"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-25-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-20"><img src="beginner_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="960"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#showing data as doubleplots. Time breaks have to be reduced for legibility</span></span>
<span><span class="va">dataset_red</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_heatmap.html">gg_heatmap</a></span><span class="op">(</span>doubleplot <span class="op">=</span> <span class="st">"next"</span>, </span>
<span>             time.breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">12</span>, <span class="fl">24</span>, <span class="fl">36</span>, <span class="fl">48</span><span class="op">)</span><span class="op">*</span><span class="fl">3600</span></span>
<span>             <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-26-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-21"><img src="beginner_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="960"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Actogram-style heatmap (&lt;10 lx mel EDI in this case)</span></span>
<span><span class="va">dataset_red</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_heatmap.html">gg_heatmap</a></span><span class="op">(</span><span class="va">MEDI</span> <span class="op">&lt;</span> <span class="fl">10</span>,</span>
<span>             doubleplot <span class="op">=</span> <span class="st">"next"</span>, </span>
<span>             time.breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">12</span>, <span class="fl">24</span>, <span class="fl">36</span>, <span class="fl">48</span><span class="op">)</span><span class="op">*</span><span class="fl">3600</span>,</span>
<span>             fill.limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span>, </span>
<span>             fill.remove <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>             fill.title <span class="op">=</span> <span class="st">"&lt;10lx mel EDI"</span></span>
<span>             <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"TRUE"</span> <span class="op">=</span> <span class="st">"black"</span>, <span class="st">"FALSE"</span> <span class="op">=</span> <span class="st">"#00000000"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-27-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-22"><img src="beginner_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="960"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="what-about-non-light-variables" class="level3"><h3 class="anchored" data-anchor-id="what-about-non-light-variables">What about non-light variables?</h3>
<p><code>LightLogR</code> is optimized for wearable light sensors and selects sensible defaults: for example, melanopic EDI (when available) and settings suited to typical light‑exposure distributions. Nevertheless, the functions are measurement‑agnostic and can be applied to non‑light variables. Consult the function documentation to see which arguments to adjust for your variable of interest. For example, here we plot an activity variable:</p>
<div class="cell">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset_red</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days</a></span><span class="op">(</span></span>
<span>    y.axis <span class="op">=</span> <span class="va">PIM</span>, <span class="co">#variable PIM</span></span>
<span>    y.scale <span class="op">=</span> <span class="st">"identity"</span>, <span class="co">#set a linear scale</span></span>
<span>    y.axis.breaks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/waiver.html">waiver</a></span><span class="op">(</span><span class="op">)</span>, <span class="co">#choose standard axis breaks according to values</span></span>
<span>    y.axis.label <span class="op">=</span> <span class="st">"Proportional integration mode (PIM)"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5000</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-28-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-23"><img src="beginner_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
</section></section><section id="validation" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="validation">Validation</h2>
<p>Currently, <code>LightLogR</code>’s validation aims to ensure a regular, uninterrupted time series for each participant. Additional features are planned.</p>
<p>The figures at the side summarize the gap terminology used in <code>LightLogR</code> and illustrate how <code><a href="https://tscnlab.github.io/LightLogR/reference/gap_handler.html">gap_handler()</a></code> fills implicit missing data.</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="assets/gap_terminology.png" class="lightbox" data-gallery="quarto-lightbox-gallery-24" title="Terminology of gaps in LightLogR"><img src="assets/gap_terminology.png" class="img-fluid figure-img" alt="Terminology of gaps in LightLogR"></a></p>
<figcaption>Terminology of gaps in <code>LightLogR</code></figcaption></figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="assets/gap_handler.png" class="lightbox" data-gallery="quarto-lightbox-gallery-25" title="gap_handler() identifies the time series’ dominant epoch (the most common sampling interval) and fills NA entries between the first and last observation. By default, no observations are dropped, so irregular samples are preserved."><img src="assets/gap_handler.png" class="img-fluid figure-img" alt="gap_handler() identifies the time series’ dominant epoch (the most common sampling interval) and fills NA entries between the first and last observation. By default, no observations are dropped, so irregular samples are preserved."></a></p>
<figcaption><code><a href="https://tscnlab.github.io/LightLogR/reference/gap_handler.html">gap_handler()</a></code> identifies the time series’ <code>dominant epoch</code> (the most common sampling interval) and fills <code>NA</code> entries between the first and last observation. By default, no observations are dropped, so irregular samples are preserved.</figcaption></figure>
</div>
</div></div><p>To quickly assess whether a dataset contains (implicit) gaps or irregular sampling, use the following diagnostic helpers:</p>
<div class="cell">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/has_gaps.html">has_gaps</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/has_irregulars.html">has_irregulars</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>We can then quickly visualize where these issues occur within the affected days.</p>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_gaps.html">gg_gaps</a></span><span class="op">(</span>group.by.days <span class="op">=</span> <span class="cn">TRUE</span>, show.irregulars <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-30-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-26"><img src="beginner_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="480"></a></p>
</figure>
</div>
</div>
</div>
<p>This function can be slow when a dataset contains many gaps or irregular samples. If needed, pre‑filter the data or adjust the function’s arguments.</p>
<p>In our example, we identify eight participant‑days with gaps:</p>
<ul>
<li>
<strong>Three straightforward cases:</strong> data collection ends around noon on Monday, leaving the remainder of the day missing. By default, the function evaluates complete calendar days (this is configurable). These days only require converting implicit gaps into explicit missing values.</li>
<li>
<strong>Two pre‑trial snippets:</strong> brief measurements occur on the Friday or Monday preceding the trial—likely test recordings. These days are outside the study window and should be removed entirely.</li>
<li>
<strong>Three early irregularities:</strong> irregular sampling appears shortly after data collection starts. This most likely reflects a test recording immediately before the device was handed to the participant. Trimming this initial segment eliminates the irregularity and the rest of the day can be changed to explicit missingness.</li>
</ul>
<section id="preparing-the-dataset" class="level3"><h3 class="anchored" data-anchor-id="preparing-the-dataset">Preparing the dataset</h3>
<p>There are several ways to address these issues. We will showcase three in the next sections.</p>
<section id="set-the-maximum-length-of-the-dataset." class="level4"><h4 class="anchored" data-anchor-id="set-the-maximum-length-of-the-dataset.">1. Set the maximum length of the dataset.</h4>
<p>If the study follows a fixed‑length protocol, you can enforce a maximum observation window (e.g., 7 days) by trimming from the beginning so that each participant’s series has the same duration. This approach preserves participant‑specific end times, which must meaningfully reflect protocol completion; otherwise, you risk cutting away valid data.</p>
<div class="cell">
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span></span>
<span>  <span class="va">Datetime</span> <span class="op">&gt;</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">Datetime</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html">days</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_gaps.html">gg_gaps</a></span><span class="op">(</span>group.by.days <span class="op">=</span> <span class="cn">TRUE</span>, show.irregulars <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-31-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-27"><img src="beginner_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="480"></a></p>
</figure>
</div>
</div>
</div>
<p>The remaining gaps are simple start‑ and end‑day truncations.</p>
</section><section id="remove-the-first-values-from-the-dataset" class="level4"><h4 class="anchored" data-anchor-id="remove-the-first-values-from-the-dataset">2. Remove the first values from the dataset</h4>
<p>You can remove a fixed number of observations from the beginning of each participant’s series. This approach is helpful when the exact total measurement duration is not critical—for example, to discard brief pre‑trial test recordings or initial device‑stabilization periods.</p>
<div class="cell">
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_tail</a></span><span class="op">(</span>n <span class="op">=</span> <span class="op">-</span><span class="op">(</span><span class="fl">3</span><span class="op">*</span><span class="fl">60</span><span class="op">*</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_gaps.html">gg_gaps</a></span><span class="op">(</span>group.by.days <span class="op">=</span> <span class="cn">TRUE</span>, show.irregulars <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-32-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-28"><img src="beginner_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="480"></a></p>
</figure>
</div>
</div>
</div>
<p>The results are similarly effective.</p>
</section><section id="trim-with-a-list" class="level4"><h4 class="anchored" data-anchor-id="trim-with-a-list">3. Trim with a list</h4>
<p>The most robust way to enforce sensible measurement windows is to supply a table of trial <code>start</code> and <code>end</code> timestamps (per participant) and filter the time series accordingly. In this tutorial we create that table <em>on the fly</em>; in practice, it is typically stored in a CSV or Excel file. The <code><a href="https://tscnlab.github.io/LightLogR/reference/add_states.html">add_states()</a></code> function provides an effective interface between the two datasets: it aligns by identifier and time, adds state information (e.g., “in‑trial”), and enables precise trimming. Ensure that the identifying variables (e.g., <code>Id</code>) are named identically across files.</p>
<div class="cell">
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#create a dataframe of trial times</span></span>
<span><span class="va">trial_times</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>    Id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"216"</span>, <span class="st">"218"</span>, <span class="st">"219"</span><span class="op">)</span>,</span>
<span>    start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"02.10.2023  12:30:00"</span>,</span>
<span>      <span class="st">"16.10.2023  12:00:00"</span>,</span>
<span>      <span class="st">"16.10.2023  12:00:00"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"09.10.2023  12:30:00"</span>,</span>
<span>      <span class="st">"23.10.2023  12:00:00"</span>,</span>
<span>      <span class="st">"23.10.2023  12:00:00"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    trial <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span><span class="op">)</span>,</span>
<span>    \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/parse_date_time.html">parse_date_time</a></span><span class="op">(</span><span class="va">x</span>, order <span class="op">=</span> <span class="st">"%d%m%y %H%M%S"</span>, tz <span class="op">=</span> <span class="st">"Europe/Berlin"</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Id</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># filter dataset by trial time</span></span>
<span><span class="va">dataset</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">dataset</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/add_states.html">add_states</a></span><span class="op">(</span><span class="va">trial_times</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">trial</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">trial</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_gaps.html">gg_gaps</a></span><span class="op">(</span>group.by.days <span class="op">=</span> <span class="cn">TRUE</span>, show.irregulars <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-34-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-29"><img src="beginner_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="480"></a></p>
</figure>
</div>
</div>
</div>
</section></section><section id="gap_table" class="level3"><h3 class="anchored" data-anchor-id="gap_table"><code>gap_table()</code></h3>
<p>We can summarize each dataset’s regularity and missingness in a table. Note that this function may be slow when many gaps are present.</p>
<div class="cell">
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gap_table.html">gap_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://gt.rstudio.com/reference/cols_hide.html">cols_hide</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"_n"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="hvwfdfldlg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hvwfdfldlg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hvwfdfldlg thead, #hvwfdfldlg tbody, #hvwfdfldlg tfoot, #hvwfdfldlg tr, #hvwfdfldlg td, #hvwfdfldlg th {
  border-style: none;
}

#hvwfdfldlg p {
  margin: 0;
  padding: 0;
}

#hvwfdfldlg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hvwfdfldlg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hvwfdfldlg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hvwfdfldlg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hvwfdfldlg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hvwfdfldlg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hvwfdfldlg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hvwfdfldlg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hvwfdfldlg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hvwfdfldlg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hvwfdfldlg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hvwfdfldlg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hvwfdfldlg .gt_spanner_row {
  border-bottom-style: hidden;
}

#hvwfdfldlg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hvwfdfldlg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hvwfdfldlg .gt_from_md > :first-child {
  margin-top: 0;
}

#hvwfdfldlg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hvwfdfldlg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hvwfdfldlg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hvwfdfldlg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hvwfdfldlg .gt_row_group_first td {
  border-top-width: 2px;
}

#hvwfdfldlg .gt_row_group_first th {
  border-top-width: 2px;
}

#hvwfdfldlg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hvwfdfldlg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hvwfdfldlg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hvwfdfldlg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hvwfdfldlg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hvwfdfldlg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hvwfdfldlg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hvwfdfldlg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hvwfdfldlg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hvwfdfldlg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hvwfdfldlg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hvwfdfldlg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hvwfdfldlg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hvwfdfldlg .gt_left {
  text-align: left;
}

#hvwfdfldlg .gt_center {
  text-align: center;
}

#hvwfdfldlg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hvwfdfldlg .gt_font_normal {
  font-weight: normal;
}

#hvwfdfldlg .gt_font_bold {
  font-weight: bold;
}

#hvwfdfldlg .gt_font_italic {
  font-style: italic;
}

#hvwfdfldlg .gt_super {
  font-size: 65%;
}

#hvwfdfldlg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hvwfdfldlg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hvwfdfldlg .gt_indent_1 {
  text-indent: 5px;
}

#hvwfdfldlg .gt_indent_2 {
  text-indent: 10px;
}

#hvwfdfldlg .gt_indent_3 {
  text-indent: 15px;
}

#hvwfdfldlg .gt_indent_4 {
  text-indent: 20px;
}

#hvwfdfldlg .gt_indent_5 {
  text-indent: 25px;
}

#hvwfdfldlg .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#hvwfdfldlg div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="gt_heading header">
<th colspan="14" class="gt_heading gt_title gt_font_normal">Summary of available and missing data</th>
</tr>
<tr class="gt_heading even">
<th colspan="14" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Variable: melanopic EDI</th>
</tr>
<tr class="gt_col_headings gt_spanner_row header">
<th data-quarto-table-cell-role="th" scope="col"></th>
<th colspan="5" id="data_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold; font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Data
</div></th>
<th colspan="8" id="missing_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold; font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Missing
</div></th>
</tr>
<tr class="gt_col_headings gt_spanner_row even">
<th rowspan="2" id="a::stub" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th colspan="2" id="Regular" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Regular
</div></th>
<th id="irregular_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col"><div class="gt_column_spanner">
Irregular
</div></th>
<th id="Range" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col"><div class="gt_column_spanner">
Range
</div></th>
<th id="interval_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col"><div class="gt_column_spanner">
Interval
</div></th>
<th colspan="4" id="gap_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Gaps
</div></th>
<th colspan="2" id="implicit_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Implicit
</div></th>
<th colspan="2" id="explicit_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Explicit
</div></th>
</tr>
<tr class="gt_col_headings header">
<th id="available_data" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="available_data_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="number_irregulars" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1,2</sup></span>
</th>
<th id="total_duration" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="interval" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="number_gaps" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">N</th>
<th id="mean_gap_duration" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">ø</th>
<th id="missing_data" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="missing_data_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="missing_implicit" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="missing_implicit_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="missing_explicit" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="missing_explicit_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td id="grand_summary_stub_1" class="gt_row gt_left gt_stub gt_grand_summary_row gt_last_grand_summary_row_top" data-quarto-table-cell-role="th" scope="row" style="background-color: #E5E5E5"><strong>Overall</strong></td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 available_data" style="background-color: #E5E5E5">2w 6d 21h 28m 10s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 available_data_pct" style="background-color: #E5E5E5">87.1%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 number_irregulars" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 total_duration" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">3w 3d</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 interval" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">10</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 number_gaps" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">6</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 mean_gap_duration" style="background-color: #E5E5E5">1d 13h 15m 55s</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_data" style="background-color: #E5E5E5">3d 2h 31m 50s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_data_pct" style="background-color: #E5E5E5">12.9%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_implicit" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">3d 2h 31m 50s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_implicit_pct" style="background-color: #E5E5E5">12.9%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_explicit" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_explicit_pct" style="background-color: #E5E5E5">0.0%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="216" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">216</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_1" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="216 stub_1_1 available_data">1w</td>
<td class="gt_row gt_right" headers="216 stub_1_1 available_data_pct">87.5%</td>
<td class="gt_row gt_right" headers="216 stub_1_1 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="216 stub_1_1 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1w 1d</td>
<td class="gt_row gt_center" headers="216 stub_1_1 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">10s</td>
<td class="gt_row gt_right" headers="216 stub_1_1 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">2</td>
<td class="gt_row gt_right" headers="216 stub_1_1 mean_gap_duration">12h</td>
<td class="gt_row gt_center" headers="216 stub_1_1 missing_data">1d</td>
<td class="gt_row gt_right" headers="216 stub_1_1 missing_data_pct">12.5%</td>
<td class="gt_row gt_center" headers="216 stub_1_1 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_right" headers="216 stub_1_1 missing_implicit_pct">12.5%</td>
<td class="gt_row gt_center" headers="216 stub_1_1 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right" headers="216 stub_1_1 missing_explicit_pct">0.0%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="218" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">218</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_2" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="218 stub_1_2 available_data">6d 21h 58m 50s</td>
<td class="gt_row gt_right" headers="218 stub_1_2 available_data_pct">86.4%</td>
<td class="gt_row gt_right" headers="218 stub_1_2 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="218 stub_1_2 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1w 1d</td>
<td class="gt_row gt_center" headers="218 stub_1_2 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">10s</td>
<td class="gt_row gt_right" headers="218 stub_1_2 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">2</td>
<td class="gt_row gt_right" headers="218 stub_1_2 mean_gap_duration">13h 35s</td>
<td class="gt_row gt_center" headers="218 stub_1_2 missing_data">1d 2h 1m 10s</td>
<td class="gt_row gt_right" headers="218 stub_1_2 missing_data_pct">13.6%</td>
<td class="gt_row gt_center" headers="218 stub_1_2 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d 2h 1m 10s</td>
<td class="gt_row gt_right" headers="218 stub_1_2 missing_implicit_pct">13.6%</td>
<td class="gt_row gt_center" headers="218 stub_1_2 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right" headers="218 stub_1_2 missing_explicit_pct">0.0%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="219" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">219</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_3" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="219 stub_1_3 available_data">6d 23h 29m 20s</td>
<td class="gt_row gt_right" headers="219 stub_1_3 available_data_pct">87.2%</td>
<td class="gt_row gt_right" headers="219 stub_1_3 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="219 stub_1_3 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1w 1d</td>
<td class="gt_row gt_center" headers="219 stub_1_3 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">10s</td>
<td class="gt_row gt_right" headers="219 stub_1_3 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">2</td>
<td class="gt_row gt_right" headers="219 stub_1_3 mean_gap_duration">12h 15m 20s</td>
<td class="gt_row gt_center" headers="219 stub_1_3 missing_data">1d 30m 40s</td>
<td class="gt_row gt_right" headers="219 stub_1_3 missing_data_pct">12.8%</td>
<td class="gt_row gt_center" headers="219 stub_1_3 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d 30m 40s</td>
<td class="gt_row gt_right" headers="219 stub_1_3 missing_implicit_pct">12.8%</td>
<td class="gt_row gt_center" headers="219 stub_1_3 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right" headers="219 stub_1_3 missing_explicit_pct">0.0%</td>
</tr>
</tbody>
<tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="14" class="gt_footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> If n &gt; 0: it is possible that the other summary statistics are affected, as they are calculated based on the most prominent interval.</td>
</tr>
<tr class="even">
<td colspan="14" class="gt_footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span> Number of (missing or actual) observations</td>
</tr>
<tr class="odd">
<td colspan="14" class="gt_footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span> Based on times, not necessarily number of observations</td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
</section><section id="gap_handler" class="level3"><h3 class="anchored" data-anchor-id="gap_handler"><code>gap_handler()</code></h3>
<p>Approximately 13% of the missing data are <em>implicit</em>—they arise from truncated start and end days. It is good practice to make these gaps explicit. Use <code>gap_handler(full.days = TRUE)</code> to fill implicit gaps to full‑day regularity. Then verify the result with <code><a href="https://tscnlab.github.io/LightLogR/reference/gap_table.html">gap_table()</a></code>, the diagnostic helpers, and a follow‑up visualization:</p>
<div class="cell">
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gap_handler.html">gap_handler</a></span><span class="op">(</span>full.days <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gap_table.html">gap_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://gt.rstudio.com/reference/cols_hide.html">cols_hide</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"_n"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="kikjpapase" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kikjpapase table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kikjpapase thead, #kikjpapase tbody, #kikjpapase tfoot, #kikjpapase tr, #kikjpapase td, #kikjpapase th {
  border-style: none;
}

#kikjpapase p {
  margin: 0;
  padding: 0;
}

#kikjpapase .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kikjpapase .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kikjpapase .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kikjpapase .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kikjpapase .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kikjpapase .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kikjpapase .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kikjpapase .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kikjpapase .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kikjpapase .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kikjpapase .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kikjpapase .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kikjpapase .gt_spanner_row {
  border-bottom-style: hidden;
}

#kikjpapase .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kikjpapase .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kikjpapase .gt_from_md > :first-child {
  margin-top: 0;
}

#kikjpapase .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kikjpapase .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kikjpapase .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#kikjpapase .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#kikjpapase .gt_row_group_first td {
  border-top-width: 2px;
}

#kikjpapase .gt_row_group_first th {
  border-top-width: 2px;
}

#kikjpapase .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kikjpapase .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kikjpapase .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kikjpapase .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kikjpapase .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kikjpapase .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kikjpapase .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kikjpapase .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kikjpapase .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kikjpapase .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kikjpapase .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kikjpapase .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kikjpapase .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kikjpapase .gt_left {
  text-align: left;
}

#kikjpapase .gt_center {
  text-align: center;
}

#kikjpapase .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kikjpapase .gt_font_normal {
  font-weight: normal;
}

#kikjpapase .gt_font_bold {
  font-weight: bold;
}

#kikjpapase .gt_font_italic {
  font-style: italic;
}

#kikjpapase .gt_super {
  font-size: 65%;
}

#kikjpapase .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kikjpapase .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kikjpapase .gt_indent_1 {
  text-indent: 5px;
}

#kikjpapase .gt_indent_2 {
  text-indent: 10px;
}

#kikjpapase .gt_indent_3 {
  text-indent: 15px;
}

#kikjpapase .gt_indent_4 {
  text-indent: 20px;
}

#kikjpapase .gt_indent_5 {
  text-indent: 25px;
}

#kikjpapase .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#kikjpapase div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="gt_heading header">
<th colspan="14" class="gt_heading gt_title gt_font_normal">Summary of available and missing data</th>
</tr>
<tr class="gt_heading even">
<th colspan="14" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Variable: melanopic EDI</th>
</tr>
<tr class="gt_col_headings gt_spanner_row header">
<th data-quarto-table-cell-role="th" scope="col"></th>
<th colspan="5" id="data_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold; font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Data
</div></th>
<th colspan="8" id="missing_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold; font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Missing
</div></th>
</tr>
<tr class="gt_col_headings gt_spanner_row even">
<th rowspan="2" id="a::stub" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th colspan="2" id="Regular" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Regular
</div></th>
<th id="irregular_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col"><div class="gt_column_spanner">
Irregular
</div></th>
<th id="Range" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col"><div class="gt_column_spanner">
Range
</div></th>
<th id="interval_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col"><div class="gt_column_spanner">
Interval
</div></th>
<th colspan="4" id="gap_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Gaps
</div></th>
<th colspan="2" id="implicit_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Implicit
</div></th>
<th colspan="2" id="explicit_spanner" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup"><div class="gt_column_spanner">
Explicit
</div></th>
</tr>
<tr class="gt_col_headings header">
<th id="available_data" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="available_data_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="number_irregulars" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1,2</sup></span>
</th>
<th id="total_duration" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="interval" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="number_gaps" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">N</th>
<th id="mean_gap_duration" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">ø</th>
<th id="missing_data" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="missing_data_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="missing_implicit" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="missing_implicit_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
<th id="missing_explicit" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Time</th>
<th id="missing_explicit_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">%</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td id="grand_summary_stub_1" class="gt_row gt_left gt_stub gt_grand_summary_row gt_last_grand_summary_row_top" data-quarto-table-cell-role="th" scope="row" style="background-color: #E5E5E5"><strong>Overall</strong></td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 available_data" style="background-color: #E5E5E5">2w 6d 21h 28m 10s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 available_data_pct" style="background-color: #E5E5E5">87.1%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 number_irregulars" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 total_duration" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">3w 3d</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 interval" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">10</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 number_gaps" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">6</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 mean_gap_duration" style="background-color: #E5E5E5">1d 13h 15m 55s</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_data" style="background-color: #E5E5E5">3d 2h 31m 50s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_data_pct" style="background-color: #E5E5E5">12.9%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_implicit" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_implicit_pct" style="background-color: #E5E5E5">0.0%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</td>
<td class="gt_row gt_center gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_explicit" style="background-color: #E5E5E5; border-left-width: 1px; border-left-style: solid; border-left-color: grey80">3d 2h 31m 50s</td>
<td class="gt_row gt_right gt_grand_summary_row gt_last_grand_summary_row_top" headers="grand_summary_stub_1 missing_explicit_pct" style="background-color: #E5E5E5">12.9%<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="216" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">216</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_1" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="216 stub_1_1 available_data">1w</td>
<td class="gt_row gt_right" headers="216 stub_1_1 available_data_pct">87.5%</td>
<td class="gt_row gt_right" headers="216 stub_1_1 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="216 stub_1_1 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1w 1d</td>
<td class="gt_row gt_center" headers="216 stub_1_1 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">10s</td>
<td class="gt_row gt_right" headers="216 stub_1_1 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">2</td>
<td class="gt_row gt_right" headers="216 stub_1_1 mean_gap_duration">12h</td>
<td class="gt_row gt_center" headers="216 stub_1_1 missing_data">1d</td>
<td class="gt_row gt_right" headers="216 stub_1_1 missing_data_pct">12.5%</td>
<td class="gt_row gt_center" headers="216 stub_1_1 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right" headers="216 stub_1_1 missing_implicit_pct">0.0%</td>
<td class="gt_row gt_center" headers="216 stub_1_1 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d</td>
<td class="gt_row gt_right" headers="216 stub_1_1 missing_explicit_pct">12.5%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="218" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">218</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_2" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="218 stub_1_2 available_data">6d 21h 58m 50s</td>
<td class="gt_row gt_right" headers="218 stub_1_2 available_data_pct">86.4%</td>
<td class="gt_row gt_right" headers="218 stub_1_2 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="218 stub_1_2 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1w 1d</td>
<td class="gt_row gt_center" headers="218 stub_1_2 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">10s</td>
<td class="gt_row gt_right" headers="218 stub_1_2 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">2</td>
<td class="gt_row gt_right" headers="218 stub_1_2 mean_gap_duration">13h 35s</td>
<td class="gt_row gt_center" headers="218 stub_1_2 missing_data">1d 2h 1m 10s</td>
<td class="gt_row gt_right" headers="218 stub_1_2 missing_data_pct">13.6%</td>
<td class="gt_row gt_center" headers="218 stub_1_2 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right" headers="218 stub_1_2 missing_implicit_pct">0.0%</td>
<td class="gt_row gt_center" headers="218 stub_1_2 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d 2h 1m 10s</td>
<td class="gt_row gt_right" headers="218 stub_1_2 missing_explicit_pct">13.6%</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="14" id="219" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">219</td>
</tr>
<tr class="gt_row_group_first odd">
<td id="stub_1_3" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row"></td>
<td class="gt_row gt_center" headers="219 stub_1_3 available_data">6d 23h 29m 20s</td>
<td class="gt_row gt_right" headers="219 stub_1_3 available_data_pct">87.2%</td>
<td class="gt_row gt_right" headers="219 stub_1_3 number_irregulars" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0</td>
<td class="gt_row gt_center" headers="219 stub_1_3 total_duration" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1w 1d</td>
<td class="gt_row gt_center" headers="219 stub_1_3 interval" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">10s</td>
<td class="gt_row gt_right" headers="219 stub_1_3 number_gaps" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">2</td>
<td class="gt_row gt_right" headers="219 stub_1_3 mean_gap_duration">12h 15m 20s</td>
<td class="gt_row gt_center" headers="219 stub_1_3 missing_data">1d 30m 40s</td>
<td class="gt_row gt_right" headers="219 stub_1_3 missing_data_pct">12.8%</td>
<td class="gt_row gt_center" headers="219 stub_1_3 missing_implicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">0s</td>
<td class="gt_row gt_right" headers="219 stub_1_3 missing_implicit_pct">0.0%</td>
<td class="gt_row gt_center" headers="219 stub_1_3 missing_explicit" style="border-left-width: 1px; border-left-style: solid; border-left-color: grey80">1d 30m 40s</td>
<td class="gt_row gt_right" headers="219 stub_1_3 missing_explicit_pct">12.8%</td>
</tr>
</tbody>
<tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="14" class="gt_footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> If n &gt; 0: it is possible that the other summary statistics are affected, as they are calculated based on the most prominent interval.</td>
</tr>
<tr class="even">
<td colspan="14" class="gt_footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span> Number of (missing or actual) observations</td>
</tr>
<tr class="odd">
<td colspan="14" class="gt_footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span> Based on times, not necessarily number of observations</td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/has_gaps.html">has_gaps</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/has_irregulars.html">has_irregulars</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days</a></span><span class="op">(</span>aes_col <span class="op">=</span> <span class="va">Id</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-38-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-30"><img src="beginner_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="remove_partial_data" class="level3"><h3 class="anchored" data-anchor-id="remove_partial_data"><code>remove_partial_data()</code></h3>
<p>It is often necessary to set missingness thresholds at different levels (hour, day, participant). Typical questions include:</p>
<ul>
<li>How much data may be missing within an hour before that hour is excluded?</li>
<li>How much data may be missing from a day before that day is excluded?</li>
<li>How much data may be missing for a participant before excluding them from further analyses?</li>
</ul>
<p><code><a href="https://tscnlab.github.io/LightLogR/reference/remove_partial_data.html">remove_partial_data()</a></code> addresses these questions. It evaluates each group (by default, <code>Id</code>) and quantifies missingness either as an absolute duration or a relative proportion. Groups that exceed the specified threshold are discarded. A useful option is <code>by.date</code>, which performs the thresholding per calendar day (for removal) while leaving the output grouping unchanged. Note that missingness is determined by the amount of data points in each group, relative to NA values.</p>
<p>For this tutorial, we will remove any day with more than one hour of missing data—this effectively drops both partial Mondays:</p>
<div class="cell">
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/remove_partial_data.html">remove_partial_data</a></span><span class="op">(</span>Variable.colname <span class="op">=</span> <span class="va">MEDI</span>, </span>
<span>                      threshold.missing <span class="op">=</span> <span class="st">"1 hour"</span>,</span>
<span>                      by.date <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days</a></span><span class="op">(</span>aes_col <span class="op">=</span> <span class="va">Id</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-39-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-31"><img src="beginner_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Why did we just spend all this time handling gaps and irregularities on the Mondays only to remove them afterward?</strong></p>
<p>Not all datasets are this straightforward. Deciding whether a day should be included in the analysis should come <strong>after</strong> ensuring the data are aligned to a regular, uninterrupted time series. Regularization makes diagnostics meaningful and prevents threshold rules from behaving unpredictably.</p>
<p>Moreover, there are different frameworks for grouping personal light‑exposure data. In this tutorial we focus on calendar dates and 24‑hour days. Other frameworks group differently. For example, anchoring to sleep–wake cycles—under which both Mondays might still contain useful nocturnal data. Harmonizing first ensures those alternatives remain viable even if calendar‑day summaries are later excluded.</p>
</div>
</div>
</section></section><section id="metrics" class="level2"><h2 class="anchored" data-anchor-id="metrics">Metrics</h2>
<p>Metrics form the second major pillar of <code>LightLogR</code>, alongside visualization. The literature contains many light‑exposure metrics; <code>LightLogR</code> implements a broad set of them behind a uniform, well‑documented interface. The currently available metrics are:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 22%">
<col style="width: 23%">
<col style="width: 29%">
</colgroup>
<thead><tr class="header">
<th>Metric Family</th>
<th>Submetrics</th>
<th>Note</th>
<th>Documentation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Barroso</td>
<td>7</td>
<td></td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/barroso_lighting_metrics.html">barroso_lighting_metrics()</a></code></td>
</tr>
<tr class="even">
<td>Bright-dark period</td>
<td>4x2</td>
<td>bright / dark</td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/bright_dark_period.html">bright_dark_period()</a></code></td>
</tr>
<tr class="odd">
<td>Centroid of light exposure</td>
<td>1</td>
<td></td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/centroidLE.html">centroidLE()</a></code></td>
</tr>
<tr class="even">
<td>Dose</td>
<td>1</td>
<td></td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/dose.html">dose()</a></code></td>
</tr>
<tr class="odd">
<td>Disparity index</td>
<td>1</td>
<td></td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/disparity_index.html">disparity_index()</a></code></td>
</tr>
<tr class="even">
<td>Duration above threshold</td>
<td>3</td>
<td>above, below, within</td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/duration_above_threshold.html">duration_above_threshold()</a></code></td>
</tr>
<tr class="odd">
<td>Exponential moving average (EMA)</td>
<td>1</td>
<td></td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/exponential_moving_average.html">exponential_moving_average()</a></code></td>
</tr>
<tr class="even">
<td>Frequency crossing threshold</td>
<td>1</td>
<td></td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/frequency_crossing_threshold.html">frequency_crossing_threshold()</a></code></td>
</tr>
<tr class="odd">
<td>Intradaily Variance (IV)</td>
<td>1</td>
<td></td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/intradaily_variability.html">intradaily_variability()</a></code></td>
</tr>
<tr class="even">
<td>Interdaily Stability (IS)</td>
<td>1</td>
<td></td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/interdaily_stability.html">interdaily_stability()</a></code></td>
</tr>
<tr class="odd">
<td>Midpoint CE (Cumulative Exposure)</td>
<td>1</td>
<td></td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/midpointCE.html">midpointCE()</a></code></td>
</tr>
<tr class="even">
<td>nvRC (Non-visual circadian response)</td>
<td>4</td>
<td></td>
<td>
<code><a href="https://tscnlab.github.io/LightLogR/reference/nvRC.html">nvRC()</a></code>, <code><a href="https://tscnlab.github.io/LightLogR/reference/nvRC_metrics.html">nvRC_circadianDisturbance()</a></code>, <code><a href="https://tscnlab.github.io/LightLogR/reference/nvRC_metrics.html">nvRC_circadianBias()</a></code>, <code><a href="https://tscnlab.github.io/LightLogR/reference/nvRC_metrics.html">nvRC_relativeAmplitudeError()</a></code>
</td>
</tr>
<tr class="odd">
<td>nvRD (Non-visual direct response)</td>
<td>2</td>
<td></td>
<td>
<code><a href="https://tscnlab.github.io/LightLogR/reference/nvRD.html">nvRD()</a></code>, <code><a href="https://tscnlab.github.io/LightLogR/reference/nvRD_cumulative_response.html">nvRD_cumulative_response()</a></code>
</td>
</tr>
<tr class="even">
<td>Period above threshold</td>
<td>3</td>
<td>above, below, within</td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/period_above_threshold.html">period_above_threshold()</a></code></td>
</tr>
<tr class="odd">
<td>Pulses above threshold</td>
<td>7x3</td>
<td>above, below, within</td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/pulses_above_threshold.html">pulses_above_threshold()</a></code></td>
</tr>
<tr class="even">
<td>Threshold for duration</td>
<td>2</td>
<td>above, below</td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/threshold_for_duration.html">threshold_for_duration()</a></code></td>
</tr>
<tr class="odd">
<td>Timing above threshold</td>
<td>3</td>
<td>above, below, within</td>
<td><code><a href="https://tscnlab.github.io/LightLogR/reference/timing_above_threshold.html">timing_above_threshold()</a></code></td>
</tr>
<tr class="even">
<td><strong>Total:</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>17 families</strong></td>
<td><strong>62 metrics</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>LightLogR supports a wide range of metrics across different metric families. You can find the full documentation of metrics functions in the <a href="https://tscnlab.github.io/LightLogR/reference/index.html#metrics">reference section</a>. There is also an overview article on how to use <a href="https://tscnlab.github.io/LightLogR/articles/Metrics.html">Metrics</a>.</p>
<p>If you would like to use a metric you don’t find represented in LightLogR, please contact the developers. The easiest and most trackable way to get in contact is by opening a new issue on our <a href="https://github.com/tscnlab/LightLogR/issues">Github repository</a>.</p>
</div>
</div>
<section id="principles" class="level3"><h3 class="anchored" data-anchor-id="principles">Principles</h3>
<p>Each metric function operates on vectors. Although the main argument is often named <code>Light.vector</code>, the name is conventional - the function will accept any variable you supply. All metric functions are thoroughly documented, with references to their intended use and interpretation.</p>
<p>While we don’t generally recommend it, you can pass a raw vector directly to a metric function. For example, to compute <em>Time above 250&nbsp;lx melanopic EDI</em>, you could run:</p>
<div class="cell">
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/duration_above_threshold.html">duration_above_threshold</a></span><span class="op">(</span></span>
<span>  Light.vector <span class="op">=</span> <span class="va">dataset</span><span class="op">$</span><span class="va">MEDI</span>,</span>
<span>  Time.vector <span class="op">=</span> <span class="va">dataset</span><span class="op">$</span><span class="va">Datetime</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">250</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "179840s (~2.08 days)"</code></pre>
</div>
</div>
<p>However, that single result is not very informative - it aggregates across all participants and all days. To recover the total recorded duration, recompute the complementary metric: <em>Time below 250&nbsp;lx melanopic EDI</em>. This should approximate the full two weeks and four days of data when evaluated over the whole dataset:</p>
<div class="cell">
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/duration_above_threshold.html">duration_above_threshold</a></span><span class="op">(</span></span>
<span>  Light.vector <span class="op">=</span> <span class="va">dataset</span><span class="op">$</span><span class="va">MEDI</span>,</span>
<span>  Time.vector <span class="op">=</span> <span class="va">dataset</span><span class="op">$</span><span class="va">Datetime</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">250</span>,</span>
<span>  comparison <span class="op">=</span> <span class="st">"below"</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1375360s (~2.27 weeks)"</code></pre>
</div>
</div>
<p>The problem is amplified for metrics defined at the day scale (or shorter). For example, the <em>brightest 10 hours</em> (<strong>M10</strong>) is computed within each 24‑hour day using a consecutive 10‑hour window—so applying it to a pooled, cross‑day vector is almost meaningless:</p>
<div class="cell">
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/bright_dark_period.html">bright_dark_period</a></span><span class="op">(</span></span>
<span>  Light.vector <span class="op">=</span> <span class="va">dataset</span><span class="op">$</span><span class="va">MEDI</span>,</span>
<span>  Time.vector <span class="op">=</span> <span class="va">dataset</span><span class="op">$</span><span class="va">Datetime</span>,</span>
<span>  as.df <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html">tab_header</a></span><span class="op">(</span><span class="st">"M10"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in bright_dark_period(Light.vector = dataset$MEDI, Time.vector =
dataset$Datetime, : `Time.vector` is not regularly spaced. Calculated results
may be incorrect!</code></pre>
</div>
<div class="cell-output-display">
<div id="raeewzchhq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#raeewzchhq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#raeewzchhq thead, #raeewzchhq tbody, #raeewzchhq tfoot, #raeewzchhq tr, #raeewzchhq td, #raeewzchhq th {
  border-style: none;
}

#raeewzchhq p {
  margin: 0;
  padding: 0;
}

#raeewzchhq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#raeewzchhq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#raeewzchhq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#raeewzchhq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#raeewzchhq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#raeewzchhq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#raeewzchhq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#raeewzchhq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#raeewzchhq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#raeewzchhq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#raeewzchhq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#raeewzchhq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#raeewzchhq .gt_spanner_row {
  border-bottom-style: hidden;
}

#raeewzchhq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#raeewzchhq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#raeewzchhq .gt_from_md > :first-child {
  margin-top: 0;
}

#raeewzchhq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#raeewzchhq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#raeewzchhq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#raeewzchhq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#raeewzchhq .gt_row_group_first td {
  border-top-width: 2px;
}

#raeewzchhq .gt_row_group_first th {
  border-top-width: 2px;
}

#raeewzchhq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#raeewzchhq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#raeewzchhq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#raeewzchhq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#raeewzchhq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#raeewzchhq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#raeewzchhq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#raeewzchhq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#raeewzchhq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#raeewzchhq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#raeewzchhq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#raeewzchhq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#raeewzchhq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#raeewzchhq .gt_left {
  text-align: left;
}

#raeewzchhq .gt_center {
  text-align: center;
}

#raeewzchhq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#raeewzchhq .gt_font_normal {
  font-weight: normal;
}

#raeewzchhq .gt_font_bold {
  font-weight: bold;
}

#raeewzchhq .gt_font_italic {
  font-style: italic;
}

#raeewzchhq .gt_super {
  font-size: 65%;
}

#raeewzchhq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#raeewzchhq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#raeewzchhq .gt_indent_1 {
  text-indent: 5px;
}

#raeewzchhq .gt_indent_2 {
  text-indent: 10px;
}

#raeewzchhq .gt_indent_3 {
  text-indent: 15px;
}

#raeewzchhq .gt_indent_4 {
  text-indent: 20px;
}

#raeewzchhq .gt_indent_5 {
  text-indent: 25px;
}

#raeewzchhq .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#raeewzchhq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="4" class="gt_heading gt_title gt_font_normal gt_bottom_border">M10</th>
</tr>
<tr class="gt_col_headings even">
<th id="brightest_10h_mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">brightest_10h_mean</th>
<th id="brightest_10h_midpoint" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">brightest_10h_midpoint</th>
<th id="brightest_10h_onset" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">brightest_10h_onset</th>
<th id="brightest_10h_offset" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">brightest_10h_offset</th>
</tr>
</thead>
<tbody class="gt_table_body"><tr class="odd">
<td class="gt_row gt_right" headers="brightest_10h_mean">3292.002</td>
<td class="gt_row gt_right" headers="brightest_10h_midpoint">2023-10-08 15:17:49</td>
<td class="gt_row gt_right" headers="brightest_10h_onset">2023-10-08 10:17:59</td>
<td class="gt_row gt_right" headers="brightest_10h_offset">2023-10-08 20:17:49</td>
</tr></tbody>
</table>
</div>
</div>
</div>
<p>The resulting value - although computationally valid - is substantively meaningless: it selects the single brightest 10‑hour window <strong>across all participants</strong>, rather than computing M10 <em>per participant per day</em>. In addition, two time series (218 &amp; 219) overlap in time, which violates the assumption of a single, regularly spaced series and can produce errors. Hence the <code>Warning: Time.vector is not regularly spaced. Calculated results may be incorrect!</code></p>
<p>Accordingly, metric functions should be applied within tidy groups (e.g., by <code>Id</code> and by calendar <code>Date</code>), not to a pooled vector. You can achieve this with explicit for‑loops or, preferably, a tidy approach using <code>dplyr</code> (e.g., <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>/<code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> or <code><a href="https://tidyr.tidyverse.org/reference/nest.html">nest()</a></code>/<code><a href="https://purrr.tidyverse.org/reference/map.html">map()</a></code>). We recommend the latter.</p>
</section><section id="use-of-summarize" class="level3"><h3 class="anchored" data-anchor-id="use-of-summarize">Use of <code>summarize()</code>
</h3>
<p>Wrap the metric inside a dplyr <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>/<code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> call, supply the <strong>grouped</strong> dataset, and set <code>as.df = TRUE</code>. This yields a tidy, one‑row‑per‑group result (e.g., per <code>Id</code>). For example, computing <strong>interdaily stability (IS)</strong>:</p>
<div class="cell">
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/interdaily_stability.html">interdaily_stability</a></span><span class="op">(</span></span>
<span>      Light.vector <span class="op">=</span> <span class="va">MEDI</span>,</span>
<span>      Datetime.vector <span class="op">=</span> <span class="va">Datetime</span>,</span>
<span>      as.df <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  Id    interdaily_stability
  &lt;chr&gt;                &lt;dbl&gt;
1 216                  0.260
2 218                  0.339
3 219                  0.389</code></pre>
</div>
</div>
<p>To compute multiple metrics at once, include additional expressions inside the <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> call. For instance, add <strong>Time above 250&nbsp;lx melanopic EDI</strong> alongside IS:</p>
<div class="cell">
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>     <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/duration_above_threshold.html">duration_above_threshold</a></span><span class="op">(</span></span>
<span>      Light.vector <span class="op">=</span> <span class="va">MEDI</span>,</span>
<span>      Time.vector <span class="op">=</span> <span class="va">Datetime</span>,</span>
<span>      threshold <span class="op">=</span> <span class="fl">250</span>,</span>
<span>      as.df <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/interdaily_stability.html">interdaily_stability</a></span><span class="op">(</span></span>
<span>      Light.vector <span class="op">=</span> <span class="va">MEDI</span>,</span>
<span>      Datetime.vector <span class="op">=</span> <span class="va">Datetime</span>,</span>
<span>      as.df <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  Id    duration_above_250    interdaily_stability
  &lt;chr&gt; &lt;Duration&gt;                           &lt;dbl&gt;
1 216   89160s (~1.03 days)                  0.260
2 218   31160s (~8.66 hours)                 0.339
3 219   59520s (~16.53 hours)                0.389</code></pre>
</div>
</div>
<p>For finer granularity, add additional grouping variables before summarizing—for example, group by calendar <code>Date</code> to compute metrics per participant–day:</p>
<div class="cell">
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">TAT250</span> <span class="op">&lt;-</span> </span>
<span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/add_Date_col.html">add_Date_col</a></span><span class="op">(</span>group.by <span class="op">=</span> <span class="cn">TRUE</span>, as.wday <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co">#add a Date column + group</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>     <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/duration_above_threshold.html">duration_above_threshold</a></span><span class="op">(</span></span>
<span>      Light.vector <span class="op">=</span> <span class="va">MEDI</span>,</span>
<span>      Time.vector <span class="op">=</span> <span class="va">Datetime</span>,</span>
<span>      threshold <span class="op">=</span> <span class="fl">250</span>,</span>
<span>      as.df <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop_last"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">TAT250</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="uzisvrxuho" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#uzisvrxuho table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#uzisvrxuho thead, #uzisvrxuho tbody, #uzisvrxuho tfoot, #uzisvrxuho tr, #uzisvrxuho td, #uzisvrxuho th {
  border-style: none;
}

#uzisvrxuho p {
  margin: 0;
  padding: 0;
}

#uzisvrxuho .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#uzisvrxuho .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#uzisvrxuho .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#uzisvrxuho .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#uzisvrxuho .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uzisvrxuho .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uzisvrxuho .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uzisvrxuho .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#uzisvrxuho .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#uzisvrxuho .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#uzisvrxuho .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#uzisvrxuho .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#uzisvrxuho .gt_spanner_row {
  border-bottom-style: hidden;
}

#uzisvrxuho .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#uzisvrxuho .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#uzisvrxuho .gt_from_md > :first-child {
  margin-top: 0;
}

#uzisvrxuho .gt_from_md > :last-child {
  margin-bottom: 0;
}

#uzisvrxuho .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#uzisvrxuho .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#uzisvrxuho .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#uzisvrxuho .gt_row_group_first td {
  border-top-width: 2px;
}

#uzisvrxuho .gt_row_group_first th {
  border-top-width: 2px;
}

#uzisvrxuho .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#uzisvrxuho .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#uzisvrxuho .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#uzisvrxuho .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uzisvrxuho .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#uzisvrxuho .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#uzisvrxuho .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#uzisvrxuho .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#uzisvrxuho .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uzisvrxuho .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uzisvrxuho .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#uzisvrxuho .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uzisvrxuho .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#uzisvrxuho .gt_left {
  text-align: left;
}

#uzisvrxuho .gt_center {
  text-align: center;
}

#uzisvrxuho .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#uzisvrxuho .gt_font_normal {
  font-weight: normal;
}

#uzisvrxuho .gt_font_bold {
  font-weight: bold;
}

#uzisvrxuho .gt_font_italic {
  font-style: italic;
}

#uzisvrxuho .gt_super {
  font-size: 65%;
}

#uzisvrxuho .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#uzisvrxuho .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#uzisvrxuho .gt_indent_1 {
  text-indent: 5px;
}

#uzisvrxuho .gt_indent_2 {
  text-indent: 10px;
}

#uzisvrxuho .gt_indent_3 {
  text-indent: 15px;
}

#uzisvrxuho .gt_indent_4 {
  text-indent: 20px;
}

#uzisvrxuho .gt_indent_5 {
  text-indent: 25px;
}

#uzisvrxuho .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#uzisvrxuho div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="duration_above_250" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">duration_above_250</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="2" id="216" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">216</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_center" headers="216  Date">Tue</td>
<td class="gt_row gt_center" headers="216  duration_above_250">15360s (~4.27 hours)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="216  Date">Wed</td>
<td class="gt_row gt_center" headers="216  duration_above_250">14910s (~4.14 hours)</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="216  Date">Thu</td>
<td class="gt_row gt_center" headers="216  duration_above_250">17550s (~4.88 hours)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="216  Date">Fri</td>
<td class="gt_row gt_center" headers="216  duration_above_250">9900s (~2.75 hours)</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="216  Date">Sat</td>
<td class="gt_row gt_center" headers="216  duration_above_250">12180s (~3.38 hours)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="216  Date">Sun</td>
<td class="gt_row gt_center" headers="216  duration_above_250">19260s (~5.35 hours)</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="2" id="218" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">218</td>
</tr>
<tr class="gt_row_group_first odd">
<td class="gt_row gt_center" headers="218  Date">Tue</td>
<td class="gt_row gt_center" headers="218  duration_above_250">1900s (~31.67 minutes)</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="218  Date">Wed</td>
<td class="gt_row gt_center" headers="218  duration_above_250">1080s (~18 minutes)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="218  Date">Thu</td>
<td class="gt_row gt_center" headers="218  duration_above_250">760s (~12.67 minutes)</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="218  Date">Fri</td>
<td class="gt_row gt_center" headers="218  duration_above_250">6170s (~1.71 hours)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="218  Date">Sat</td>
<td class="gt_row gt_center" headers="218  duration_above_250">10370s (~2.88 hours)</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="218  Date">Sun</td>
<td class="gt_row gt_center" headers="218  duration_above_250">10880s (~3.02 hours)</td>
</tr>
<tr class="gt_group_heading_row odd">
<td colspan="2" id="219" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">219</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_center" headers="219  Date">Tue</td>
<td class="gt_row gt_center" headers="219  duration_above_250">12250s (~3.4 hours)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="219  Date">Wed</td>
<td class="gt_row gt_center" headers="219  duration_above_250">14400s (~4 hours)</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="219  Date">Thu</td>
<td class="gt_row gt_center" headers="219  duration_above_250">10200s (~2.83 hours)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="219  Date">Fri</td>
<td class="gt_row gt_center" headers="219  duration_above_250">8940s (~2.48 hours)</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="219  Date">Sat</td>
<td class="gt_row gt_center" headers="219  duration_above_250">5820s (~1.62 hours)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="219  Date">Sun</td>
<td class="gt_row gt_center" headers="219  duration_above_250">7910s (~2.2 hours)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>We can further condense this:</p>
<div class="cell">
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">TAT250</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/summarize_numeric.html">summarize_numeric</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="jhveahsaem" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#jhveahsaem table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#jhveahsaem thead, #jhveahsaem tbody, #jhveahsaem tfoot, #jhveahsaem tr, #jhveahsaem td, #jhveahsaem th {
  border-style: none;
}

#jhveahsaem p {
  margin: 0;
  padding: 0;
}

#jhveahsaem .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#jhveahsaem .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#jhveahsaem .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#jhveahsaem .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#jhveahsaem .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jhveahsaem .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jhveahsaem .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jhveahsaem .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#jhveahsaem .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#jhveahsaem .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#jhveahsaem .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#jhveahsaem .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#jhveahsaem .gt_spanner_row {
  border-bottom-style: hidden;
}

#jhveahsaem .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#jhveahsaem .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#jhveahsaem .gt_from_md > :first-child {
  margin-top: 0;
}

#jhveahsaem .gt_from_md > :last-child {
  margin-bottom: 0;
}

#jhveahsaem .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#jhveahsaem .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#jhveahsaem .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#jhveahsaem .gt_row_group_first td {
  border-top-width: 2px;
}

#jhveahsaem .gt_row_group_first th {
  border-top-width: 2px;
}

#jhveahsaem .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jhveahsaem .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#jhveahsaem .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#jhveahsaem .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jhveahsaem .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jhveahsaem .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#jhveahsaem .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#jhveahsaem .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#jhveahsaem .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jhveahsaem .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jhveahsaem .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jhveahsaem .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jhveahsaem .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jhveahsaem .gt_left {
  text-align: left;
}

#jhveahsaem .gt_center {
  text-align: center;
}

#jhveahsaem .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#jhveahsaem .gt_font_normal {
  font-weight: normal;
}

#jhveahsaem .gt_font_bold {
  font-weight: bold;
}

#jhveahsaem .gt_font_italic {
  font-style: italic;
}

#jhveahsaem .gt_super {
  font-size: 65%;
}

#jhveahsaem .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#jhveahsaem .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#jhveahsaem .gt_indent_1 {
  text-indent: 5px;
}

#jhveahsaem .gt_indent_2 {
  text-indent: 10px;
}

#jhveahsaem .gt_indent_3 {
  text-indent: 15px;
}

#jhveahsaem .gt_indent_4 {
  text-indent: 20px;
}

#jhveahsaem .gt_indent_5 {
  text-indent: 25px;
}

#jhveahsaem .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#jhveahsaem div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings header">
<th id="Id" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Id</th>
<th id="mean_duration_above_250" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">mean_duration_above_250</th>
<th id="episodes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">episodes</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="Id">216</td>
<td class="gt_row gt_center" headers="mean_duration_above_250">14860s (~4.13 hours)</td>
<td class="gt_row gt_right" headers="episodes">6</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="Id">218</td>
<td class="gt_row gt_center" headers="mean_duration_above_250">5193s (~1.44 hours)</td>
<td class="gt_row gt_right" headers="episodes">6</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="Id">219</td>
<td class="gt_row gt_center" headers="mean_duration_above_250">9920s (~2.76 hours)</td>
<td class="gt_row gt_right" headers="episodes">6</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>That’s all you need to get started with metric calculation in <code>LightLogR</code>. While advanced metrics involve additional considerations, this tidy grouped workflow will take you a long way.</p>
</section></section><section id="photoperiod" class="level2"><h2 class="anchored" data-anchor-id="photoperiod">Photoperiod</h2>
<p>Photoperiod is a key covariate in many analyses of personal light exposure. <code>LightLogR</code> includes utilities to derive photoperiod information with minimal effort. All you need are geographic coordinates in decimal degrees (latitude, longitude); functions will align photoperiod features to your time series. Provide coordinates in standard decimal format (e.g., <code>48.52, 9.06</code>):</p>
<div class="cell">
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#specifying coordinates (latitude/longitude)</span></span>
<span><span class="va">coordinates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">48.521637</span>, <span class="fl">9.057645</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#extracting photoperiod information</span></span>
<span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/photoperiod.html">extract_photoperiod</a></span><span class="op">(</span><span class="va">coordinates</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         date            tz      lat      lon solar.angle                dawn
1  2023-10-03 Europe/Berlin 48.52164 9.057645          -6 2023-10-03 06:54:12
2  2023-10-04 Europe/Berlin 48.52164 9.057645          -6 2023-10-04 06:55:38
3  2023-10-05 Europe/Berlin 48.52164 9.057645          -6 2023-10-05 06:57:04
4  2023-10-06 Europe/Berlin 48.52164 9.057645          -6 2023-10-06 06:58:30
5  2023-10-07 Europe/Berlin 48.52164 9.057645          -6 2023-10-07 06:59:56
6  2023-10-08 Europe/Berlin 48.52164 9.057645          -6 2023-10-08 07:01:22
7  2023-10-17 Europe/Berlin 48.52164 9.057645          -6 2023-10-17 07:14:23
8  2023-10-18 Europe/Berlin 48.52164 9.057645          -6 2023-10-18 07:15:50
9  2023-10-19 Europe/Berlin 48.52164 9.057645          -6 2023-10-19 07:17:17
10 2023-10-20 Europe/Berlin 48.52164 9.057645          -6 2023-10-20 07:18:45
11 2023-10-21 Europe/Berlin 48.52164 9.057645          -6 2023-10-21 07:20:13
12 2023-10-22 Europe/Berlin 48.52164 9.057645          -6 2023-10-22 07:21:40
                  dusk    photoperiod
1  2023-10-03 19:30:44 12.60884 hours
2  2023-10-04 19:28:41 12.55080 hours
3  2023-10-05 19:26:39 12.49293 hours
4  2023-10-06 19:24:37 12.43521 hours
5  2023-10-07 19:22:36 12.37767 hours
6  2023-10-08 19:20:35 12.32031 hours
7  2023-10-17 19:03:11 11.81335 hours
8  2023-10-18 19:01:19 11.75821 hours
9  2023-10-19 18:59:29 11.70333 hours
10 2023-10-20 18:57:40 11.64874 hours
11 2023-10-21 18:55:53 11.59443 hours
12 2023-10-22 18:54:06 11.54043 hours</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#adding photoperiod information</span></span>
<span><span class="va">dataset</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/photoperiod.html">add_photoperiod</a></span><span class="op">(</span><span class="va">coordinates</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
# Groups:   Id [1]
  Id    Datetime            is.implicit   PIM  MEDI dawn               
  &lt;chr&gt; &lt;dttm&gt;              &lt;lgl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dttm&gt;             
1 216   2023-10-03 00:00:09 FALSE          91  12.6 2023-10-03 06:54:12
2 216   2023-10-03 00:00:19 FALSE          62  14.3 2023-10-03 06:54:12
3 216   2023-10-03 00:00:29 FALSE          45  10.2 2023-10-03 06:54:12
4 216   2023-10-03 00:00:39 FALSE          13  10.3 2023-10-03 06:54:12
5 216   2023-10-03 00:00:49 FALSE         216  11.9 2023-10-03 06:54:12
6 216   2023-10-03 00:00:59 FALSE          62  11.6 2023-10-03 06:54:12
# ℹ 3 more variables: dusk &lt;dttm&gt;, photoperiod &lt;drtn&gt;, photoperiod.state &lt;chr&gt;</code></pre>
</div>
</div>
<section id="photoperiod-in-visualizations" class="level3"><h3 class="anchored" data-anchor-id="photoperiod-in-visualizations">Photoperiod in visualizations</h3>
<div class="cell">
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#if photoperiod information was already added to the data</span></span>
<span><span class="co">#nothing has to be specified</span></span>
<span><span class="va">dataset</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_photoperiod.html">gg_photoperiod</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-49-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-32"><img src="beginner_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#if no photoperiod information is available in the data, coordinates have to</span></span>
<span><span class="co">#be specified</span></span>
<span><span class="va">dataset_red</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_photoperiod.html">gg_photoperiod</a></span><span class="op">(</span><span class="va">coordinates</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-50-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-33"><img src="beginner_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="data" class="level3"><h3 class="anchored" data-anchor-id="data">Data</h3>
<p>Photoperiod features make it easy to split data into day and night states—for example, to compute metrics by phase. The <code><a href="https://tscnlab.github.io/LightLogR/reference/number_states.html">number_states()</a></code> function places a counter each time the state changes, effectively numbering successive day and night episodes. Grouping by these counters then allows you to calculate metrics for individual days and nights:</p>
<div class="cell">
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="co">#create numbered days and nights:</span></span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/number_states.html">number_states</a></span><span class="op">(</span><span class="va">photoperiod.state</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="co">#group by Id, day and nights, and also the numbers:</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">photoperiod.state</span>, <span class="va">photoperiod.state.count</span>, .add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="co">#calculate the brightest hour in each day and each night:</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/bright_dark_period.html">bright_dark_period</a></span><span class="op">(</span><span class="va">MEDI</span>, <span class="va">Datetime</span>, timespan <span class="op">=</span> <span class="st">"1 hour"</span>, as.df <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop_last"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="co">#select (bright_dark_period calulates four metrics: start, end, middle, mean)</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">Id</span>, <span class="va">photoperiod.state</span>, <span class="va">brightest_1h_mean</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co">#condense the instances to a single summary</span></span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/summarize_numeric.html">summarize_numeric</a></span><span class="op">(</span>prefix <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="co">#show as table</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html">fmt_number</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="hyaqzetchy" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hyaqzetchy table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hyaqzetchy thead, #hyaqzetchy tbody, #hyaqzetchy tfoot, #hyaqzetchy tr, #hyaqzetchy td, #hyaqzetchy th {
  border-style: none;
}

#hyaqzetchy p {
  margin: 0;
  padding: 0;
}

#hyaqzetchy .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hyaqzetchy .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hyaqzetchy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hyaqzetchy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hyaqzetchy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hyaqzetchy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hyaqzetchy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hyaqzetchy .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hyaqzetchy .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hyaqzetchy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hyaqzetchy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hyaqzetchy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hyaqzetchy .gt_spanner_row {
  border-bottom-style: hidden;
}

#hyaqzetchy .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hyaqzetchy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hyaqzetchy .gt_from_md > :first-child {
  margin-top: 0;
}

#hyaqzetchy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hyaqzetchy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hyaqzetchy .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hyaqzetchy .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hyaqzetchy .gt_row_group_first td {
  border-top-width: 2px;
}

#hyaqzetchy .gt_row_group_first th {
  border-top-width: 2px;
}

#hyaqzetchy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hyaqzetchy .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hyaqzetchy .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hyaqzetchy .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hyaqzetchy .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hyaqzetchy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hyaqzetchy .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hyaqzetchy .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hyaqzetchy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hyaqzetchy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hyaqzetchy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hyaqzetchy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hyaqzetchy .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hyaqzetchy .gt_left {
  text-align: left;
}

#hyaqzetchy .gt_center {
  text-align: center;
}

#hyaqzetchy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hyaqzetchy .gt_font_normal {
  font-weight: normal;
}

#hyaqzetchy .gt_font_bold {
  font-weight: bold;
}

#hyaqzetchy .gt_font_italic {
  font-style: italic;
}

#hyaqzetchy .gt_super {
  font-size: 65%;
}

#hyaqzetchy .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hyaqzetchy .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hyaqzetchy .gt_indent_1 {
  text-indent: 5px;
}

#hyaqzetchy .gt_indent_2 {
  text-indent: 10px;
}

#hyaqzetchy .gt_indent_3 {
  text-indent: 15px;
}

#hyaqzetchy .gt_indent_4 {
  text-indent: 20px;
}

#hyaqzetchy .gt_indent_5 {
  text-indent: 25px;
}

#hyaqzetchy .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#hyaqzetchy div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings header">
<th id="photoperiod.state" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">photoperiod.state</th>
<th id="brightest_1h_mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">brightest_1h_mean</th>
<th id="episodes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">episodes</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="3" id="216" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">216</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="216  photoperiod.state">day</td>
<td class="gt_row gt_right" headers="216  brightest_1h_mean">7,294.36</td>
<td class="gt_row gt_right" headers="216  episodes">6.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="216  photoperiod.state">night</td>
<td class="gt_row gt_right" headers="216  brightest_1h_mean">34.87</td>
<td class="gt_row gt_right" headers="216  episodes">7.00</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="3" id="218" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">218</td>
</tr>
<tr class="gt_row_group_first odd">
<td class="gt_row gt_left" headers="218  photoperiod.state">day</td>
<td class="gt_row gt_right" headers="218  brightest_1h_mean">1,246.30</td>
<td class="gt_row gt_right" headers="218  episodes">6.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="218  photoperiod.state">night</td>
<td class="gt_row gt_right" headers="218  brightest_1h_mean">72.96</td>
<td class="gt_row gt_right" headers="218  episodes">7.00</td>
</tr>
<tr class="gt_group_heading_row odd">
<td colspan="3" id="219" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">219</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="219  photoperiod.state">day</td>
<td class="gt_row gt_right" headers="219  brightest_1h_mean">1,670.66</td>
<td class="gt_row gt_right" headers="219  episodes">6.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="219  photoperiod.state">night</td>
<td class="gt_row gt_right" headers="219  brightest_1h_mean">51.40</td>
<td class="gt_row gt_right" headers="219  episodes">7.00</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>This yields the average brightest 1‑hour period for each participant, separately for day and night. Notably, the participant with the highest daytime brightness also shows the lowest nighttime brightness, and vice versa.</p>
</section></section><section id="distribution-of-light-exposure" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="distribution-of-light-exposure">Distribution of light exposure</h2>
<p>Personal light‑exposure data exhibit a characteristic distribution (see figure): they are strongly right‑skewed—approximately log‑normal—and contain many zeros (i.e., zero‑inflation).</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="assets/Distribution.png" class="lightbox" data-gallery="quarto-lightbox-gallery-34" title="Distribution of light exposure in the environment and for a participant, both at night and day"><img src="assets/Distribution.png" class="img-fluid figure-img" alt="Distribution of light exposure in the environment and for a participant, both at night and day"></a></p>
<figcaption>Distribution of light exposure in the environment and for a participant, both at night and day</figcaption></figure>
</div>
</div></div><p>Consequently, the arithmetic mean is not a representative summary for these data. We can visualize this by placing common location metrics on the distribution.</p>
<div class="cell">
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">MEDI</span><span class="op">)</span>,</span>
<span>    median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">MEDI</span><span class="op">)</span>,</span>
<span>    geo_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">MEDI</span><span class="op">[</span><span class="va">MEDI</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">]</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="kcuekmaczj" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kcuekmaczj table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kcuekmaczj thead, #kcuekmaczj tbody, #kcuekmaczj tfoot, #kcuekmaczj tr, #kcuekmaczj td, #kcuekmaczj th {
  border-style: none;
}

#kcuekmaczj p {
  margin: 0;
  padding: 0;
}

#kcuekmaczj .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kcuekmaczj .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kcuekmaczj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kcuekmaczj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kcuekmaczj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kcuekmaczj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kcuekmaczj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kcuekmaczj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kcuekmaczj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kcuekmaczj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kcuekmaczj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kcuekmaczj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kcuekmaczj .gt_spanner_row {
  border-bottom-style: hidden;
}

#kcuekmaczj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kcuekmaczj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kcuekmaczj .gt_from_md > :first-child {
  margin-top: 0;
}

#kcuekmaczj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kcuekmaczj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kcuekmaczj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#kcuekmaczj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#kcuekmaczj .gt_row_group_first td {
  border-top-width: 2px;
}

#kcuekmaczj .gt_row_group_first th {
  border-top-width: 2px;
}

#kcuekmaczj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kcuekmaczj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kcuekmaczj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kcuekmaczj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kcuekmaczj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kcuekmaczj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kcuekmaczj .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kcuekmaczj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kcuekmaczj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kcuekmaczj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kcuekmaczj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kcuekmaczj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kcuekmaczj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kcuekmaczj .gt_left {
  text-align: left;
}

#kcuekmaczj .gt_center {
  text-align: center;
}

#kcuekmaczj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kcuekmaczj .gt_font_normal {
  font-weight: normal;
}

#kcuekmaczj .gt_font_bold {
  font-weight: bold;
}

#kcuekmaczj .gt_font_italic {
  font-style: italic;
}

#kcuekmaczj .gt_super {
  font-size: 65%;
}

#kcuekmaczj .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kcuekmaczj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kcuekmaczj .gt_indent_1 {
  text-indent: 5px;
}

#kcuekmaczj .gt_indent_2 {
  text-indent: 10px;
}

#kcuekmaczj .gt_indent_3 {
  text-indent: 15px;
}

#kcuekmaczj .gt_indent_4 {
  text-indent: 20px;
}

#kcuekmaczj .gt_indent_5 {
  text-indent: 25px;
}

#kcuekmaczj .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#kcuekmaczj div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings header">
<th id="mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mean</th>
<th id="median" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">median</th>
<th id="geo_mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">geo_mean</th>
</tr></thead>
<tbody class="gt_table_body"><tr class="odd">
<td class="gt_row gt_right" headers="mean">282.535</td>
<td class="gt_row gt_right" headers="median">8.76</td>
<td class="gt_row gt_right" headers="geo_mean">32.82594</td>
</tr></tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Datetime.html">aggregate_Datetime</a></span><span class="op">(</span><span class="st">"5 min"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">MEDI</span>, y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html">after_stat</a></span><span class="op">(</span><span class="va">ncount</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>trans <span class="op">=</span> <span class="st">"symlog"</span>, </span>
<span>                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">^</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                     labels<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10</span><span class="op">^</span><span class="fl">0</span>,<span class="fl">10</span><span class="op">^</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">4</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">5</span><span class="op">)</span></span>
<span>                     <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">282</span>, <span class="fl">9</span>, <span class="fl">33</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># facet_wrap(~Id) +</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Melanopic illuminance (lx, mel EDI)"</span>, y <span class="op">=</span> <span class="st">"Scaled counts (max = 1)"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-53-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-35"><img src="beginner_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>To better characterize zero‑inflated, right‑skewed light data, use <code><a href="https://tscnlab.github.io/LightLogR/reference/log_zero_inflated.html">log_zero_inflated()</a></code>. The function adds a small constant (ε) to every observation <strong>before taking logs</strong>, making the transform well‑defined at zero. Choose ε based on the device’s measurement resolution/accuracy; for wearables spanning roughly 1–10^5&nbsp;lx, we recommend ε = 0.1&nbsp;lx. The inverse, <code><a href="https://tscnlab.github.io/LightLogR/reference/log_zero_inflated.html">exp_zero_inflated()</a></code>, returns values to the original scale by exponentiating and then subtracting the same ε. The default basis for these functions is 10.</p>
<div class="cell">
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">MEDI</span><span class="op">)</span>,</span>
<span>    median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">MEDI</span><span class="op">)</span>,</span>
<span>    geo_mean <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">MEDI</span><span class="op">[</span><span class="va">MEDI</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">]</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    log_zero_inflated_mean <span class="op">=</span> </span>
<span>      <span class="va">MEDI</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/log_zero_inflated.html">log_zero_inflated</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/log_zero_inflated.html">exp_zero_inflated</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="twmupcvjcz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#twmupcvjcz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#twmupcvjcz thead, #twmupcvjcz tbody, #twmupcvjcz tfoot, #twmupcvjcz tr, #twmupcvjcz td, #twmupcvjcz th {
  border-style: none;
}

#twmupcvjcz p {
  margin: 0;
  padding: 0;
}

#twmupcvjcz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#twmupcvjcz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#twmupcvjcz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#twmupcvjcz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#twmupcvjcz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#twmupcvjcz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#twmupcvjcz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#twmupcvjcz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#twmupcvjcz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#twmupcvjcz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#twmupcvjcz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#twmupcvjcz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#twmupcvjcz .gt_spanner_row {
  border-bottom-style: hidden;
}

#twmupcvjcz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#twmupcvjcz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#twmupcvjcz .gt_from_md > :first-child {
  margin-top: 0;
}

#twmupcvjcz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#twmupcvjcz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#twmupcvjcz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#twmupcvjcz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#twmupcvjcz .gt_row_group_first td {
  border-top-width: 2px;
}

#twmupcvjcz .gt_row_group_first th {
  border-top-width: 2px;
}

#twmupcvjcz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#twmupcvjcz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#twmupcvjcz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#twmupcvjcz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#twmupcvjcz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#twmupcvjcz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#twmupcvjcz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#twmupcvjcz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#twmupcvjcz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#twmupcvjcz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#twmupcvjcz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#twmupcvjcz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#twmupcvjcz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#twmupcvjcz .gt_left {
  text-align: left;
}

#twmupcvjcz .gt_center {
  text-align: center;
}

#twmupcvjcz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#twmupcvjcz .gt_font_normal {
  font-weight: normal;
}

#twmupcvjcz .gt_font_bold {
  font-weight: bold;
}

#twmupcvjcz .gt_font_italic {
  font-style: italic;
}

#twmupcvjcz .gt_super {
  font-size: 65%;
}

#twmupcvjcz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#twmupcvjcz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#twmupcvjcz .gt_indent_1 {
  text-indent: 5px;
}

#twmupcvjcz .gt_indent_2 {
  text-indent: 10px;
}

#twmupcvjcz .gt_indent_3 {
  text-indent: 15px;
}

#twmupcvjcz .gt_indent_4 {
  text-indent: 20px;
}

#twmupcvjcz .gt_indent_5 {
  text-indent: 25px;
}

#twmupcvjcz .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#twmupcvjcz div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings header">
<th id="mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mean</th>
<th id="median" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">median</th>
<th id="geo_mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">geo_mean</th>
<th id="log_zero_inflated_mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">log_zero_inflated_mean</th>
</tr></thead>
<tbody class="gt_table_body"><tr class="odd">
<td class="gt_row gt_right" headers="mean">282.535</td>
<td class="gt_row gt_right" headers="median">8.76</td>
<td class="gt_row gt_right" headers="geo_mean">32.82594</td>
<td class="gt_row gt_right" headers="log_zero_inflated_mean">6.567388</td>
</tr></tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Datetime.html">aggregate_Datetime</a></span><span class="op">(</span><span class="st">"5 min"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">MEDI</span>, y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html">after_stat</a></span><span class="op">(</span><span class="va">ncount</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>trans <span class="op">=</span> <span class="st">"symlog"</span>, </span>
<span>                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">^</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                     labels<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10</span><span class="op">^</span><span class="fl">0</span>,<span class="fl">10</span><span class="op">^</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">4</span>, <span class="fl">10</span><span class="op">^</span><span class="fl">5</span><span class="op">)</span></span>
<span>                     <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">282</span>, <span class="fl">9</span>, <span class="fl">33</span>, <span class="fl">7</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># facet_wrap(~Id) +</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Melanopic illuminance (lx, mel EDI)"</span>, y <span class="op">=</span> <span class="st">"Scaled counts (max = 1)"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-55-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-36"><img src="beginner_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<section id="log-zero-inflated-with-metrics" class="level3"><h3 class="anchored" data-anchor-id="log-zero-inflated-with-metrics">Log zero-inflated with metrics</h3>
<p>When computing averaging metrics, apply the transformation <strong>explicitly</strong> to the variable you pass to the metric. This ensures the statistic is computed on the intended scale and makes your code easy to audit later.</p>
<p>For the zero‑inflated log approach, transform before averaging and (if desired) back‑transform for reporting:</p>
<div class="cell">
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Id</span> <span class="op">==</span> <span class="st">"216"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/add_Date_col.html">add_Date_col</a></span><span class="op">(</span>group.by <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    <span class="co">#without transformation:</span></span>
<span>    <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/bright_dark_period.html">bright_dark_period</a></span><span class="op">(</span><span class="va">MEDI</span>, <span class="va">Datetime</span>, as.df <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    <span class="co">#with transformation:</span></span>
<span>    <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/bright_dark_period.html">bright_dark_period</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/log_zero_inflated.html">log_zero_inflated</a></span><span class="op">(</span><span class="va">MEDI</span><span class="op">)</span>,</span>
<span>      timespan <span class="op">=</span> <span class="st">"9.99 hours"</span>, <span class="co">#needs to be different from 10 or it overwrites</span></span>
<span>      <span class="va">Datetime</span>, as.df <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop_last"</span></span>
<span>            <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">Id</span>, <span class="va">Date</span>, <span class="va">brightest_10h_mean</span>, <span class="va">brightest_9.99h_mean</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>brightest_9.99h_mean <span class="op">=</span> <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/log_zero_inflated.html">exp_zero_inflated</a></span><span class="op">(</span><span class="va">brightest_9.99h_mean</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>brightest_10h_zero_infl_mean <span class="op">=</span> <span class="va">brightest_9.99h_mean</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html">fmt_number</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="adlcydhbyk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#adlcydhbyk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#adlcydhbyk thead, #adlcydhbyk tbody, #adlcydhbyk tfoot, #adlcydhbyk tr, #adlcydhbyk td, #adlcydhbyk th {
  border-style: none;
}

#adlcydhbyk p {
  margin: 0;
  padding: 0;
}

#adlcydhbyk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#adlcydhbyk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#adlcydhbyk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#adlcydhbyk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#adlcydhbyk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#adlcydhbyk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adlcydhbyk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#adlcydhbyk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#adlcydhbyk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#adlcydhbyk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#adlcydhbyk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#adlcydhbyk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#adlcydhbyk .gt_spanner_row {
  border-bottom-style: hidden;
}

#adlcydhbyk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#adlcydhbyk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#adlcydhbyk .gt_from_md > :first-child {
  margin-top: 0;
}

#adlcydhbyk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#adlcydhbyk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#adlcydhbyk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#adlcydhbyk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#adlcydhbyk .gt_row_group_first td {
  border-top-width: 2px;
}

#adlcydhbyk .gt_row_group_first th {
  border-top-width: 2px;
}

#adlcydhbyk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#adlcydhbyk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#adlcydhbyk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#adlcydhbyk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adlcydhbyk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#adlcydhbyk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#adlcydhbyk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#adlcydhbyk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#adlcydhbyk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adlcydhbyk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#adlcydhbyk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#adlcydhbyk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#adlcydhbyk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#adlcydhbyk .gt_left {
  text-align: left;
}

#adlcydhbyk .gt_center {
  text-align: center;
}

#adlcydhbyk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#adlcydhbyk .gt_font_normal {
  font-weight: normal;
}

#adlcydhbyk .gt_font_bold {
  font-weight: bold;
}

#adlcydhbyk .gt_font_italic {
  font-style: italic;
}

#adlcydhbyk .gt_super {
  font-size: 65%;
}

#adlcydhbyk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#adlcydhbyk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#adlcydhbyk .gt_indent_1 {
  text-indent: 5px;
}

#adlcydhbyk .gt_indent_2 {
  text-indent: 10px;
}

#adlcydhbyk .gt_indent_3 {
  text-indent: 15px;
}

#adlcydhbyk .gt_indent_4 {
  text-indent: 20px;
}

#adlcydhbyk .gt_indent_5 {
  text-indent: 25px;
}

#adlcydhbyk .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#adlcydhbyk div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings header">
<th id="Date" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Date</th>
<th id="brightest_10h_mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">brightest_10h_mean</th>
<th id="brightest_10h_zero_infl_mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">brightest_10h_zero_infl_mean</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="3" id="216" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">216</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_right" headers="216  Date">2023-10-03</td>
<td class="gt_row gt_right" headers="216  brightest_10h_mean">774.39</td>
<td class="gt_row gt_right" headers="216  brightest_10h_zero_infl_mean">164.46</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="216  Date">2023-10-04</td>
<td class="gt_row gt_right" headers="216  brightest_10h_mean">1,890.69</td>
<td class="gt_row gt_right" headers="216  brightest_10h_zero_infl_mean">106.63</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="216  Date">2023-10-05</td>
<td class="gt_row gt_right" headers="216  brightest_10h_mean">355.81</td>
<td class="gt_row gt_right" headers="216  brightest_10h_zero_infl_mean">153.26</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="216  Date">2023-10-06</td>
<td class="gt_row gt_right" headers="216  brightest_10h_mean">706.41</td>
<td class="gt_row gt_right" headers="216  brightest_10h_zero_infl_mean">117.82</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="216  Date">2023-10-07</td>
<td class="gt_row gt_right" headers="216  brightest_10h_mean">790.83</td>
<td class="gt_row gt_right" headers="216  brightest_10h_zero_infl_mean">125.38</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="216  Date">2023-10-08</td>
<td class="gt_row gt_right" headers="216  brightest_10h_mean">3,292.00</td>
<td class="gt_row gt_right" headers="216  brightest_10h_zero_infl_mean">250.35</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section></section><section id="summaries" class="level2"><h2 class="anchored" data-anchor-id="summaries">Summaries</h2>
<p>Summary helpers provide fast, dataset‑wide overviews. Existing examples include <code><a href="https://tscnlab.github.io/LightLogR/reference/gap_table.html">gap_table()</a></code> (tabular diagnostics) and <code><a href="https://tscnlab.github.io/LightLogR/reference/gg_overview.html">gg_overview()</a></code> (visual timeline). In the next release, two higher‑level tools are planned: <code>grand_overview()</code> (a dataset‑level summary plot) and <code>light_summary_table()</code> (a table of key exposure metrics). These are not available in <code>LightLogR 0.9.3</code> but are slated for an upcoming release and are shown in the next two sections as <em>sneak previews</em>. In keeping with <code>LightLogR</code>’s design, they will have straightforward interfaces and play well with grouped/tidy workflows.</p>
<section id="summary-plot" class="level3"><h3 class="anchored" data-anchor-id="summary-plot">Summary plot</h3>
<div class="cell">
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">grand_overview</span><span class="op">(</span><span class="va">coordinates</span>, <span class="co">#provide the coordinates</span></span>
<span>                 <span class="st">"Tübingen"</span>, <span class="co">#provide a site name</span></span>
<span>                 <span class="st">"Germany"</span>, <span class="co">#provide a country name</span></span>
<span>                 <span class="st">"#DDCC77"</span>, <span class="co">#provide a color for the dataset</span></span>
<span>                 photoperiod_sequence <span class="op">=</span> <span class="fl">1</span> <span class="co">#specify the photoperiod resolution</span></span>
<span>                 <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-57-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-37"><img src="beginner_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="summary-table" class="level3"><h3 class="anchored" data-anchor-id="summary-table">Summary table</h3>
<div class="cell">
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span><span class="fu">light_summary_table</span><span class="op">(</span></span>
<span>  <span class="va">coordinates</span>, <span class="co">#provide coordinates</span></span>
<span>  <span class="st">"Tuebingen"</span>, <span class="co">#provide a site name</span></span>
<span>  <span class="st">"Germany"</span>, <span class="co">#provide a country name</span></span>
<span>  <span class="st">"#DDCC77"</span>, <span class="co">#provide a color for histograms</span></span>
<span>  histograms <span class="op">=</span> <span class="cn">TRUE</span> <span class="co">#show histograms</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="lbrnqrlpgf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#lbrnqrlpgf table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#lbrnqrlpgf thead, #lbrnqrlpgf tbody, #lbrnqrlpgf tfoot, #lbrnqrlpgf tr, #lbrnqrlpgf td, #lbrnqrlpgf th {
  border-style: none;
}

#lbrnqrlpgf p {
  margin: 0;
  padding: 0;
}

#lbrnqrlpgf .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lbrnqrlpgf .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#lbrnqrlpgf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lbrnqrlpgf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lbrnqrlpgf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lbrnqrlpgf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lbrnqrlpgf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lbrnqrlpgf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lbrnqrlpgf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lbrnqrlpgf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lbrnqrlpgf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lbrnqrlpgf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lbrnqrlpgf .gt_spanner_row {
  border-bottom-style: hidden;
}

#lbrnqrlpgf .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#lbrnqrlpgf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#lbrnqrlpgf .gt_from_md > :first-child {
  margin-top: 0;
}

#lbrnqrlpgf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lbrnqrlpgf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#lbrnqrlpgf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#lbrnqrlpgf .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#lbrnqrlpgf .gt_row_group_first td {
  border-top-width: 2px;
}

#lbrnqrlpgf .gt_row_group_first th {
  border-top-width: 2px;
}

#lbrnqrlpgf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lbrnqrlpgf .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#lbrnqrlpgf .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#lbrnqrlpgf .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lbrnqrlpgf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lbrnqrlpgf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#lbrnqrlpgf .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#lbrnqrlpgf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#lbrnqrlpgf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lbrnqrlpgf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lbrnqrlpgf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lbrnqrlpgf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lbrnqrlpgf .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lbrnqrlpgf .gt_left {
  text-align: left;
}

#lbrnqrlpgf .gt_center {
  text-align: center;
}

#lbrnqrlpgf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lbrnqrlpgf .gt_font_normal {
  font-weight: normal;
}

#lbrnqrlpgf .gt_font_bold {
  font-weight: bold;
}

#lbrnqrlpgf .gt_font_italic {
  font-style: italic;
}

#lbrnqrlpgf .gt_super {
  font-size: 65%;
}

#lbrnqrlpgf .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#lbrnqrlpgf .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#lbrnqrlpgf .gt_indent_1 {
  text-indent: 5px;
}

#lbrnqrlpgf .gt_indent_2 {
  text-indent: 10px;
}

#lbrnqrlpgf .gt_indent_3 {
  text-indent: 15px;
}

#lbrnqrlpgf .gt_indent_4 {
  text-indent: 20px;
}

#lbrnqrlpgf .gt_indent_5 {
  text-indent: 25px;
}

#lbrnqrlpgf .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#lbrnqrlpgf div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="gt_heading header">
<th colspan="5" class="gt_heading gt_title gt_font_normal">Summary table</th>
</tr>
<tr class="gt_heading even">
<th colspan="5" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Tuebingen, Germany (48.5°N, 9.1°E), TZ: Europe/Berlin</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="5" id="Overview" class="gt_group_heading" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup">Overview</td>
</tr>
<tr class="gt_row_group_first even">
<td id="stub_1_1" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Participants</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Overview stub_1_1 symbol"><br></td>
<td class="gt_row gt_right" style="text-align: left;" headers="Overview stub_1_1 mean"><strong>3</strong></td>
<td class="gt_row gt_center" headers="Overview stub_1_1 plot"><div>

</div></td>
<td class="gt_row gt_right" headers="Overview stub_1_1 footnote"></td>
</tr>
<tr class="odd">
<td id="stub_1_2" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Participant-days</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Overview stub_1_2 symbol"><br></td>
<td class="gt_row gt_right" style="text-align: left;" headers="Overview stub_1_2 mean"><strong>18</strong></td>
<td class="gt_row gt_center" headers="Overview stub_1_2 plot"><div>

</div></td>
<td class="gt_row gt_right" headers="Overview stub_1_2 footnote"></td>
</tr>
<tr class="even">
<td id="stub_1_3" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Days ≥80% complete</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Overview stub_1_3 symbol"><br></td>
<td class="gt_row gt_right" style="text-align: left;" headers="Overview stub_1_3 mean"><strong>18</strong></td>
<td class="gt_row gt_center" headers="Overview stub_1_3 plot"><div>

</div></td>
<td class="gt_row gt_right" headers="Overview stub_1_3 footnote"></td>
</tr>
<tr class="odd">
<td id="stub_1_4" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Missing/irregular</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Overview stub_1_4 symbol"><br></td>
<td class="gt_row gt_right" style="text-align: left;" headers="Overview stub_1_4 mean">
<strong>0.00%</strong> (0.00% - 0.00%)</td>
<td class="gt_row gt_center" headers="Overview stub_1_4 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="5.04" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Overview stub_1_4 footnote"></td>
</tr>
<tr class="even">
<td id="stub_1_5" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Photoperiod</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Overview stub_1_5 symbol"><br></td>
<td class="gt_row gt_right" style="text-align: left;" headers="Overview stub_1_5 mean">
<strong>11h 56m</strong> (11h 32m - 12h 36m)</td>
<td class="gt_row gt_center" headers="Overview stub_1_5 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="39.11" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Overview stub_1_5 footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>&nbsp;</td>
</tr>
<tr class="gt_group_heading_row odd">
<td colspan="5" id="Metrics<span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;&quot;><sup>2</sup></span>" class="gt_group_heading" data-quarto-table-cell-role="th" style="font-weight: bold" scope="colgroup">Metrics<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span>
</td>
</tr>
<tr class="gt_row_group_first even">
<td id="stub_1_6" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Dose</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_6 symbol">D (lx·h)</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_6 mean">
<strong>6,781</strong> ±7,698 (1,226 - 33,160)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_6 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="5.04" y="12.36" width="6.81" height="1.17" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="11.86" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="18.67" y="8.84" width="6.81" height="4.69" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="25.48" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="32.30" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="39.11" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="45.93" y="12.36" width="6.81" height="1.17" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="52.74" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="59.55" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="66.37" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="73.18" y="12.36" width="6.81" height="1.17" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_6 footnote"></td>
</tr>
<tr class="odd">
<td id="stub_1_7" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Duration above 250 lx</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_7 symbol">TAT<sub>250</sub>
</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_7 mean">
<strong>2h 46m</strong> ±1h 29m (12m 40s - 5h 21m)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_7 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="5.04" y="10.31" width="6.81" height="3.22" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="11.86" y="7.09" width="6.81" height="6.44" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="18.67" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="25.48" y="7.09" width="6.81" height="6.44" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="32.30" y="10.31" width="6.81" height="3.22" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="39.11" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="45.93" y="3.87" width="6.81" height="9.66" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="52.74" y="10.31" width="6.81" height="3.22" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="59.55" y="7.09" width="6.81" height="6.44" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="66.37" y="10.31" width="6.81" height="3.22" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="73.18" y="10.31" width="6.81" height="3.22" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_7 footnote"></td>
</tr>
<tr class="even">
<td id="stub_1_8" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Duration within 1-10 lx</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_8 symbol">TWT<sub>1–10</sub>
</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_8 mean">
<strong>4h 51m</strong> ±2h 5m (1h 39m - 8h 55m)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_8 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="18.67" y="10.31" width="6.81" height="3.22" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="25.48" y="7.09" width="6.81" height="6.44" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="32.30" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="39.11" y="3.87" width="6.81" height="9.66" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="45.93" y="3.87" width="6.81" height="9.66" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="52.74" y="10.31" width="6.81" height="3.22" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="59.55" y="7.09" width="6.81" height="6.44" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="66.37" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="73.18" y="7.09" width="6.81" height="6.44" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_8 footnote"></td>
</tr>
<tr class="odd">
<td id="stub_1_9" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Duration below 1 lx</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_9 symbol">TBT<sub>1</sub>
</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_9 mean">
<strong>7h 34m</strong> ±2h 39m (12m 50s - 11h 41m)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_9 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="5.04" y="11.38" width="6.81" height="2.15" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="11.86" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="18.67" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="25.48" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="32.30" y="9.23" width="6.81" height="4.29" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="39.11" y="11.38" width="6.81" height="2.15" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="45.93" y="4.94" width="6.81" height="8.59" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="52.74" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="59.55" y="11.38" width="6.81" height="2.15" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="66.37" y="11.38" width="6.81" height="2.15" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="73.18" y="9.23" width="6.81" height="4.29" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_9 footnote"></td>
</tr>
<tr class="even">
<td id="stub_1_10" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Period above 250 lx</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_10 symbol">PAT<sub>250</sub>
</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_10 mean">
<strong>32m 53s</strong> ±24m 1s (2m 50s - 1h 22m)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_10 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="5.04" y="10.31" width="6.81" height="3.22" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="11.86" y="3.87" width="6.81" height="9.66" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="18.67" y="7.09" width="6.81" height="6.44" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="25.48" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="32.30" y="3.87" width="6.81" height="9.66" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="39.11" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="45.93" y="7.09" width="6.81" height="6.44" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="52.74" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="59.55" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="66.37" y="7.09" width="6.81" height="6.44" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="73.18" y="10.31" width="6.81" height="3.22" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_10 footnote"></td>
</tr>
<tr class="odd">
<td id="stub_1_11" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Duration above 1000 lx</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_11 symbol">TAT<sub>1000</sub>
</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_11 mean">
<strong>1h 4m</strong> ±55m 48s (7m 30s - 3h 4m)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_11 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="5.04" y="10.95" width="6.81" height="2.58" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="11.86" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="18.67" y="5.80" width="6.81" height="7.73" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="25.48" y="3.22" width="6.81" height="10.31" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="32.30" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="39.11" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="45.93" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="52.74" y="8.38" width="6.81" height="5.15" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="59.55" y="8.38" width="6.81" height="5.15" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="66.37" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="73.18" y="10.95" width="6.81" height="2.58" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_11 footnote"></td>
</tr>
<tr class="even">
<td id="stub_1_12" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">First timing above 250 lx</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_12 symbol">FLiT<sub>250</sub>
</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_12 mean">
<strong>10:55</strong> ±01:26 (08:31 - 13:41)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_12 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="32.30" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="39.11" y="2.08" width="6.81" height="11.45" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="45.93" y="12.10" width="6.81" height="1.43" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_12 footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>&nbsp;</td>
</tr>
<tr class="odd">
<td id="stub_1_13" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Mean timing above 250 lx</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_13 symbol">MLiT<sub>250</sub>
</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_13 mean">
<strong>14:11</strong> ±01:30 (10:44 - 16:23)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_13 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="52.74" y="10.67" width="6.81" height="2.86" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="59.55" y="7.80" width="6.81" height="5.73" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="66.37" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="73.18" y="9.23" width="6.81" height="4.29" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_13 footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>&nbsp;</td>
</tr>
<tr class="even">
<td id="stub_1_14" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Last timing above 250 lx</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_14 symbol">LLiT<sub>250</sub>
</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_14 mean">
<strong>18:40</strong> ±02:09 (13:56 - 23:03)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_14 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="45.93" y="12.46" width="6.81" height="1.07" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="52.74" y="11.38" width="6.81" height="2.15" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="59.55" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="66.37" y="12.46" width="6.81" height="1.07" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="73.18" y="11.38" width="6.81" height="2.15" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_14 footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>&nbsp;</td>
</tr>
<tr class="odd">
<td id="stub_1_15" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Brightest 10h midpoint</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_15 symbol">M10<sub>midpoint</sub>
</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_15 mean">
<strong>14:47</strong> ±01:15 (13:10 - 17:21)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_15 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="59.55" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="66.37" y="7.09" width="6.81" height="6.44" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="73.18" y="9.66" width="6.81" height="3.87" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_15 footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>&nbsp;</td>
</tr>
<tr class="even">
<td id="stub_1_16" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Darkest 5h midpoint</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_16 symbol">L5<sub>midpoint</sub>
</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_16 mean">
<strong>03:53</strong> ±00:53 (02:29 - 05:58)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_16 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="32.30" y="9.85" width="6.81" height="3.68" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="39.11" y="9.85" width="6.81" height="3.68" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="45.93" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="52.74" y="6.17" width="6.81" height="7.36" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="59.55" y="11.69" width="6.81" height="1.84" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="66.37" y="11.69" width="6.81" height="1.84" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="73.18" y="11.69" width="6.81" height="1.84" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_16 footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>&nbsp;</td>
</tr>
<tr class="odd">
<td id="stub_1_17" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Brightest 10h mean<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_17 symbol">M10<sub>mean</sub> (lx)</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_17 mean">
<strong>126.6</strong> ±63.3 (17.6 - 249.3)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_17 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="11.86" y="10.95" width="6.81" height="2.58" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="18.67" y="8.38" width="6.81" height="5.15" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="25.48" y="5.80" width="6.81" height="7.73" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="32.30" y="10.95" width="6.81" height="2.58" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="39.11" y="5.80" width="6.81" height="7.73" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="45.93" y="10.95" width="6.81" height="2.58" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="52.74" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="59.55" y="10.95" width="6.81" height="2.58" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="66.37" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="73.18" y="10.95" width="6.81" height="2.58" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_17 footnote"></td>
</tr>
<tr class="even">
<td id="stub_1_18" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Darkest 5h mean<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_18 symbol">L5<sub>mean</sub> (lx)</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_18 mean">
<strong>0.1</strong> ±0.5 (0.0 - 2.1)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_18 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="5.04" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="11.86" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="18.67" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="25.48" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="32.30" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="39.11" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="45.93" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="52.74" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="59.55" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="66.37" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="73.18" y="12.77" width="6.81" height="0.76" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_18 footnote"></td>
</tr>
<tr class="odd">
<td id="stub_1_19" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Interdaily stability</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_19 symbol">IS</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_19 mean">
<strong>0.329</strong> ±0.065 (0.260 - 0.389)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_19 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="25.48" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="32.30" y="7.09" width="6.81" height="6.44" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_19 footnote"></td>
</tr>
<tr class="even">
<td id="stub_1_20" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">Intradaily variability</td>
<td class="gt_row gt_left" style="text-align: right;" headers="Metrics stub_1_20 symbol">IV</td>
<td class="gt_row gt_right" style="text-align: left;" headers="Metrics stub_1_20 mean">
<strong>1.206</strong> ±0.175 (1.013 - 1.353)</td>
<td class="gt_row gt_center" headers="Metrics stub_1_20 plot"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="85.04pt" height="14.17pt" viewbox="0 0 85.04 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3"><rect x="0.00" y="0.00" width="85.04" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw4NS4wNHwwLjAwfDE0LjE3)"><rect x="52.74" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="59.55" y="13.53" width="6.81" height="0.00" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="66.37" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect><rect x="73.18" y="0.64" width="6.81" height="12.88" style="stroke-width: 0.43; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #DDCC77;"></rect></g></g></svg></td>
<td class="gt_row gt_right" headers="Metrics stub_1_20 footnote"></td>
</tr>
</tbody>
<tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="5" class="gt_footnote">values show: <strong>mean</strong> ±sd (min - max) and are all based on measurements of melanopic EDI (lx)</td>
</tr>
<tr class="even">
<td colspan="5" class="gt_footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> Histogram limits are set from 00:00 to 24:00</td>
</tr>
<tr class="odd">
<td colspan="5" class="gt_footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span> Metrics are calculated on a by-participant-day basis (n=18) with the exception of IV and IS, which are calculated on a by-participant basis (n=3).</td>
</tr>
<tr class="even">
<td colspan="5" class="gt_footnote">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span> Values were log 10 transformed prior to averaging, with an offset of 0.1, and backtransformed afterwards</td>
</tr>
</tfoot>
</table>
</div>
</div>
</div>
</section></section><section id="processing-states" class="level2"><h2 class="anchored" data-anchor-id="processing-states">Processing &amp; states</h2>
<p><code>LightLogR</code> contains many functions to manipulate, expand, or condense datasets. We will highlight the most important ones.</p>
<section id="aggregate_datetime" class="level3"><h3 class="anchored" data-anchor-id="aggregate_datetime"><code>aggregate_Datetime()</code></h3>
<p><code><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Datetime.html">aggregate_Datetime()</a></code> is a general‑purpose resampling utility that bins observations into fixed‑duration intervals and computes a summary statistic per bin. It is intentionally opinionated, providing sensible defaults (e.g., mean for numeric columns and mode for character/factor columns), but all summaries are configurable and additional metrics can be requested. Use it as a lightweight formatter to change the effective measurement interval after the fact (e.g., re‑epoching from 10 s to 1 min).</p>
<div class="cell">
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>  <span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Datetime.html">aggregate_Datetime</a></span><span class="op">(</span><span class="st">"1 hour"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co">#try to set different units: "15 mins", "2 hours",...</span></span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days</a></span><span class="op">(</span>aes_col <span class="op">=</span> <span class="va">Id</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-59-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-38"><img src="beginner_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="aggregate_date" class="level3"><h3 class="anchored" data-anchor-id="aggregate_date"><code>aggregate_Date()</code></h3>
<p><code><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Date.html">aggregate_Date()</a></code> is a companion function that collapses each group into a single 24‑hour profile, optionally re‑epoching the data in the process. It is well‑suited to very large datasets when you need an overview of the <em>average day</em>. It applies the same summarization rules as <code><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Datetime.html">aggregate_Datetime()</a></code> and is equally configurable to your requirements:</p>
<div class="cell">
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Date.html">aggregate_Date</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"5 minutes"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_days.html">gg_days</a></span><span class="op">(</span>aes_col <span class="op">=</span> <span class="va">Id</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-60-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-39"><img src="beginner_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" width="768"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="gg_doubleplot" class="level3"><h3 class="anchored" data-anchor-id="gg_doubleplot"><code>gg_doubleplot()</code></h3>
<p><code><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Date.html">aggregate_Date()</a></code> pairs well with <code><a href="https://tscnlab.github.io/LightLogR/reference/gg_doubleplot.html">gg_doubleplot()</a></code>, which duplicates each day with an offset to reveal patterns that span midnight. While it can be applied to any dataset, use it on only a handful of days at a time to keep plots readable. If the dataset it is called on contains more than one day <code><a href="https://tscnlab.github.io/LightLogR/reference/gg_doubleplot.html">gg_doubleplot()</a></code> defaults to displaying the next day instead of duplicating the same day.</p>
<div class="cell">
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Date.html">aggregate_Date</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"30 minutes"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_doubleplot.html">gg_doubleplot</a></span><span class="op">(</span>aes_col <span class="op">=</span> <span class="va">Id</span>, aes_fill <span class="op">=</span> <span class="va">Id</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-61-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-40"><img src="beginner_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid figure-img" width="768"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># it is recommended to add photoperiod information after aggregating to the Date</span></span>
<span><span class="co"># level and prior to the doubleplot for best results.</span></span>
<span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Date.html">aggregate_Date</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"30 minutes"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/photoperiod.html">add_photoperiod</a></span><span class="op">(</span><span class="va">coordinates</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_doubleplot.html">gg_doubleplot</a></span><span class="op">(</span>aes_fill <span class="op">=</span> <span class="va">Id</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_photoperiod.html">gg_photoperiod</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-62-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-41"><img src="beginner_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="beyond-inital-variables" class="level3"><h3 class="anchored" data-anchor-id="beyond-inital-variables">Beyond inital variables</h3>
<p>Both <code><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Datetime.html">aggregate_Datetime()</a></code> and <code><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Date.html">aggregate_Date()</a></code> allow for the calculation of additional metrics within their respective bins. One use case is to gauge the spread of the data within certain times. A simple approach is to plot the minimum and maximum value of a dataset that was condensed to a single day.</p>
<div class="cell">
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Date.html">aggregate_Date</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"30 minutes"</span>,</span>
<span>                 lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">MEDI</span><span class="op">)</span>, <span class="co">#create new variables...</span></span>
<span>                 upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">MEDI</span><span class="op">)</span>  <span class="co">#...as many as needed</span></span>
<span>                 <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_doubleplot.html">gg_doubleplot</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"blank"</span><span class="op">)</span> <span class="op">+</span> <span class="co"># use gg_doubleplot only as a canvas</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">lower</span>, ymax <span class="op">=</span> <span class="va">upper</span>, fill <span class="op">=</span> <span class="va">Id</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-63-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-42"><img src="beginner_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" width="768"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="states" class="level3"><h3 class="anchored" data-anchor-id="states">States</h3>
<p>States, in the context of LightLogR, means any non-numeric variable. Those can be part of the dataset, be calculated from the dataset (e.g., mel EDI &gt;= 250 lx), or added from an external source. We showcase some capabilities by dividing the dataset into sections by the Brown et al.&nbsp;(2022) recommendations for healthy lighting, using the <code><a href="https://tscnlab.github.io/LightLogR/reference/Brown_cut.html">Brown_cut()</a></code> function.</p>
<div class="cell">
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset_1day</span> <span class="op">&lt;-</span> </span>
<span><span class="va">dataset</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/Brown_cut.html">Brown_cut</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co">#creating a column with the cuts</span></span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/aggregate_Date.html">aggregate_Date</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"30 minutes"</span>, </span>
<span>                 numeric.handler <span class="op">=</span> <span class="va">median</span> <span class="co">#note that we switched from mean to median</span></span>
<span>                 <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>state <span class="op">=</span> <span class="va">state</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="st">"≥250lx"</span>, <span class="st">"≤10lx"</span>, <span class="st">"≤1lx"</span><span class="op">)</span><span class="op">)</span> <span class="co">#order the levels</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="gg_state" class="level4"><h4 class="anchored" data-anchor-id="gg_state"><code>gg_state()</code></h4>
<p><code><a href="https://tscnlab.github.io/LightLogR/reference/gg_state.html">gg_state()</a></code> augments an existing plot by adding background rectangles that mark state intervals. When multiple states are present, map them to distinct fills (or colors) to improve readability.</p>
<div class="cell">
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset_1day</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_doubleplot.html">gg_doubleplot</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"black"</span>, alpha <span class="op">=</span> <span class="fl">1</span>, geom <span class="op">=</span> <span class="st">"line"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/gg_state.html">gg_state</a></span><span class="op">(</span>State.colname <span class="op">=</span> <span class="va">state</span>, aes_fill <span class="op">=</span> <span class="va">state</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"Brown levels"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="beginner_files/figure-html/unnamed-chunk-65-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-43"><img src="beginner_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid figure-img" width="768"></a></p>
</figure>
</div>
</div>
</div>
</section></section><section id="durations" class="level3"><h3 class="anchored" data-anchor-id="durations"><code>durations()</code></h3>
<p>If you need a numeric summary of states, <code><a href="https://tscnlab.github.io/LightLogR/reference/durations.html">durations()</a></code> computes the total time spent in each state per grouping (e.g., by <code>Id</code>, by day). With a small reshaping step, you can produce a tidy table showing the average duration each participant spends in each state:</p>
<div class="cell">
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset_1day</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">state</span>, .add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co">#adding Brown states to the grouping</span></span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/durations.html">durations</a></span><span class="op">(</span><span class="va">MEDI</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co">#calculating durations</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span>  <span class="co">#remove all grouping</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>state <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_na_value_to_level.html">fct_na_value_to_level</a></span><span class="op">(</span><span class="va">state</span>, <span class="st">"10-250lx"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co">#name NA level</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>id_cols <span class="op">=</span> <span class="va">Id</span>, names_from <span class="op">=</span> <span class="va">state</span>, values_from <span class="op">=</span> <span class="va">duration</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co">#reshape</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="hdeicxbciu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hdeicxbciu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hdeicxbciu thead, #hdeicxbciu tbody, #hdeicxbciu tfoot, #hdeicxbciu tr, #hdeicxbciu td, #hdeicxbciu th {
  border-style: none;
}

#hdeicxbciu p {
  margin: 0;
  padding: 0;
}

#hdeicxbciu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hdeicxbciu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hdeicxbciu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hdeicxbciu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hdeicxbciu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hdeicxbciu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hdeicxbciu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hdeicxbciu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hdeicxbciu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hdeicxbciu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hdeicxbciu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hdeicxbciu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hdeicxbciu .gt_spanner_row {
  border-bottom-style: hidden;
}

#hdeicxbciu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hdeicxbciu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hdeicxbciu .gt_from_md > :first-child {
  margin-top: 0;
}

#hdeicxbciu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hdeicxbciu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hdeicxbciu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hdeicxbciu .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hdeicxbciu .gt_row_group_first td {
  border-top-width: 2px;
}

#hdeicxbciu .gt_row_group_first th {
  border-top-width: 2px;
}

#hdeicxbciu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hdeicxbciu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hdeicxbciu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hdeicxbciu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hdeicxbciu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hdeicxbciu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hdeicxbciu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hdeicxbciu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hdeicxbciu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hdeicxbciu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hdeicxbciu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hdeicxbciu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hdeicxbciu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hdeicxbciu .gt_left {
  text-align: left;
}

#hdeicxbciu .gt_center {
  text-align: center;
}

#hdeicxbciu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hdeicxbciu .gt_font_normal {
  font-weight: normal;
}

#hdeicxbciu .gt_font_bold {
  font-weight: bold;
}

#hdeicxbciu .gt_font_italic {
  font-style: italic;
}

#hdeicxbciu .gt_super {
  font-size: 65%;
}

#hdeicxbciu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hdeicxbciu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hdeicxbciu .gt_indent_1 {
  text-indent: 5px;
}

#hdeicxbciu .gt_indent_2 {
  text-indent: 10px;
}

#hdeicxbciu .gt_indent_3 {
  text-indent: 15px;
}

#hdeicxbciu .gt_indent_4 {
  text-indent: 20px;
}

#hdeicxbciu .gt_indent_5 {
  text-indent: 25px;
}

#hdeicxbciu .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#hdeicxbciu div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings header">
<th id="Id" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Id</th>
<th id="a≥250lx" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">≥250lx</th>
<th id="a≤10lx" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">≤10lx</th>
<th id="a≤1lx" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">≤1lx</th>
<th id="a10-250lx" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">10-250lx</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="Id">216</td>
<td class="gt_row gt_center" headers="≥250lx">21600s (~6 hours)</td>
<td class="gt_row gt_center" headers="≤10lx">14400s (~4 hours)</td>
<td class="gt_row gt_center" headers="≤1lx">23400s (~6.5 hours)</td>
<td class="gt_row gt_center" headers="10-250lx">27000s (~7.5 hours)</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="Id">218</td>
<td class="gt_row gt_center" headers="≥250lx">10800s (~3 hours)</td>
<td class="gt_row gt_center" headers="≤10lx">5400s (~1.5 hours)</td>
<td class="gt_row gt_center" headers="≤1lx">28800s (~8 hours)</td>
<td class="gt_row gt_center" headers="10-250lx">48600s (~13.5 hours)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="Id">219</td>
<td class="gt_row gt_center" headers="≥250lx">7200s (~2 hours)</td>
<td class="gt_row gt_center" headers="≤10lx">23400s (~6.5 hours)</td>
<td class="gt_row gt_center" headers="≤1lx">27000s (~7.5 hours)</td>
<td class="gt_row gt_center" headers="10-250lx">28800s (~8 hours)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section><section id="extract_states-summarize_numeric" class="level3"><h3 class="anchored" data-anchor-id="extract_states-summarize_numeric">
<code>extract_states()</code> &amp; <code>summarize_numeric()</code>
</h3>
<p>If your interest in states centers on <em>individual occurrences</em> - for example, how often a state occurred, how long each episode persisted, or when episodes began - use the following tools. <code><a href="https://tscnlab.github.io/LightLogR/reference/extract_states.html">extract_states()</a></code> returns an occurrence‑level table (one row per episode) with start/end times and durations; <code><a href="https://tscnlab.github.io/LightLogR/reference/summarize_numeric.html">summarize_numeric()</a></code> then aggregates those episodes into concise metrics (e.g., counts, total duration, mean/median episode length) by the grouping you specify.</p>
<div class="cell">
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dataset_1day</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/extract_states.html">extract_states</a></span><span class="op">(</span><span class="va">state</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tscnlab.github.io/LightLogR/reference/summarize_numeric.html">summarize_numeric</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="twrclebrbw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#twrclebrbw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#twrclebrbw thead, #twrclebrbw tbody, #twrclebrbw tfoot, #twrclebrbw tr, #twrclebrbw td, #twrclebrbw th {
  border-style: none;
}

#twrclebrbw p {
  margin: 0;
  padding: 0;
}

#twrclebrbw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#twrclebrbw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#twrclebrbw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#twrclebrbw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#twrclebrbw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#twrclebrbw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#twrclebrbw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#twrclebrbw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#twrclebrbw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#twrclebrbw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#twrclebrbw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#twrclebrbw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#twrclebrbw .gt_spanner_row {
  border-bottom-style: hidden;
}

#twrclebrbw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#twrclebrbw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#twrclebrbw .gt_from_md > :first-child {
  margin-top: 0;
}

#twrclebrbw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#twrclebrbw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#twrclebrbw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#twrclebrbw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#twrclebrbw .gt_row_group_first td {
  border-top-width: 2px;
}

#twrclebrbw .gt_row_group_first th {
  border-top-width: 2px;
}

#twrclebrbw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#twrclebrbw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#twrclebrbw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#twrclebrbw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#twrclebrbw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#twrclebrbw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#twrclebrbw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#twrclebrbw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#twrclebrbw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#twrclebrbw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#twrclebrbw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#twrclebrbw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#twrclebrbw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#twrclebrbw .gt_left {
  text-align: left;
}

#twrclebrbw .gt_center {
  text-align: center;
}

#twrclebrbw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#twrclebrbw .gt_font_normal {
  font-weight: normal;
}

#twrclebrbw .gt_font_bold {
  font-weight: bold;
}

#twrclebrbw .gt_font_italic {
  font-style: italic;
}

#twrclebrbw .gt_super {
  font-size: 65%;
}

#twrclebrbw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#twrclebrbw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#twrclebrbw .gt_indent_1 {
  text-indent: 5px;
}

#twrclebrbw .gt_indent_2 {
  text-indent: 10px;
}

#twrclebrbw .gt_indent_3 {
  text-indent: 15px;
}

#twrclebrbw .gt_indent_4 {
  text-indent: 20px;
}

#twrclebrbw .gt_indent_5 {
  text-indent: 25px;
}

#twrclebrbw .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#twrclebrbw div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings header">
<th id="state" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">state</th>
<th id="mean_epoch" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mean_epoch</th>
<th id="mean_start" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">mean_start</th>
<th id="mean_end" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">mean_end</th>
<th id="mean_duration" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">mean_duration</th>
<th id="total_duration" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">total_duration</th>
<th id="episodes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">episodes</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="7" id="216" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">216</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_center" headers="216  state">≥250lx</td>
<td class="gt_row gt_right" headers="216  mean_epoch">1800</td>
<td class="gt_row gt_center" headers="216  mean_start">12:45:00</td>
<td class="gt_row gt_center" headers="216  mean_end">15:45:00</td>
<td class="gt_row gt_center" headers="216  mean_duration">10800s (~3 hours)</td>
<td class="gt_row gt_center" headers="216  total_duration">21600s (~6 hours)</td>
<td class="gt_row gt_right" headers="216  episodes">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="216  state">≤10lx</td>
<td class="gt_row gt_right" headers="216  mean_epoch">1800</td>
<td class="gt_row gt_center" headers="216  mean_start">14:00:00</td>
<td class="gt_row gt_center" headers="216  mean_end">16:00:00</td>
<td class="gt_row gt_center" headers="216  mean_duration">7200s (~2 hours)</td>
<td class="gt_row gt_center" headers="216  total_duration">14400s (~4 hours)</td>
<td class="gt_row gt_right" headers="216  episodes">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="216  state">≤1lx</td>
<td class="gt_row gt_right" headers="216  mean_epoch">1800</td>
<td class="gt_row gt_center" headers="216  mean_start">01:15:00</td>
<td class="gt_row gt_center" headers="216  mean_end">07:45:00</td>
<td class="gt_row gt_center" headers="216  mean_duration">23400s (~6.5 hours)</td>
<td class="gt_row gt_center" headers="216  total_duration">23400s (~6.5 hours)</td>
<td class="gt_row gt_right" headers="216  episodes">1</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="216  state">NA</td>
<td class="gt_row gt_right" headers="216  mean_epoch">1800</td>
<td class="gt_row gt_center" headers="216  mean_start">17:27:00</td>
<td class="gt_row gt_center" headers="216  mean_end">14:09:00</td>
<td class="gt_row gt_center" headers="216  mean_duration">5400s (~1.5 hours)</td>
<td class="gt_row gt_center" headers="216  total_duration">27000s (~7.5 hours)</td>
<td class="gt_row gt_right" headers="216  episodes">5</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="7" id="218" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">218</td>
</tr>
<tr class="gt_row_group_first odd">
<td class="gt_row gt_center" headers="218  state">≥250lx</td>
<td class="gt_row gt_right" headers="218  mean_epoch">1800</td>
<td class="gt_row gt_center" headers="218  mean_start">14:00:00</td>
<td class="gt_row gt_center" headers="218  mean_end">14:30:00</td>
<td class="gt_row gt_center" headers="218  mean_duration">1800s (~30 minutes)</td>
<td class="gt_row gt_center" headers="218  total_duration">3600s (~1 hours)</td>
<td class="gt_row gt_right" headers="218  episodes">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="218  state">≤10lx</td>
<td class="gt_row gt_right" headers="218  mean_epoch">1800</td>
<td class="gt_row gt_center" headers="218  mean_start">15:45:00</td>
<td class="gt_row gt_center" headers="218  mean_end">04:30:00</td>
<td class="gt_row gt_center" headers="218  mean_duration">2700s (~45 minutes)</td>
<td class="gt_row gt_center" headers="218  total_duration">5400s (~1.5 hours)</td>
<td class="gt_row gt_right" headers="218  episodes">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="218  state">≤1lx</td>
<td class="gt_row gt_right" headers="218  mean_epoch">1800</td>
<td class="gt_row gt_center" headers="218  mean_start">11:45:00</td>
<td class="gt_row gt_center" headers="218  mean_end">15:45:00</td>
<td class="gt_row gt_center" headers="218  mean_duration">14400s (~4 hours)</td>
<td class="gt_row gt_center" headers="218  total_duration">28800s (~8 hours)</td>
<td class="gt_row gt_right" headers="218  episodes">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="218  state">NA</td>
<td class="gt_row gt_right" headers="218  mean_epoch">1800</td>
<td class="gt_row gt_center" headers="218  mean_start">12:25:00</td>
<td class="gt_row gt_center" headers="218  mean_end">16:55:00</td>
<td class="gt_row gt_center" headers="218  mean_duration">16200s (~4.5 hours)</td>
<td class="gt_row gt_center" headers="218  total_duration">48600s (~13.5 hours)</td>
<td class="gt_row gt_right" headers="218  episodes">3</td>
</tr>
<tr class="gt_group_heading_row odd">
<td colspan="7" id="219" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">219</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_center" headers="219  state">≥250lx</td>
<td class="gt_row gt_right" headers="219  mean_epoch">1800</td>
<td class="gt_row gt_center" headers="219  mean_start">11:45:00</td>
<td class="gt_row gt_center" headers="219  mean_end">12:45:00</td>
<td class="gt_row gt_center" headers="219  mean_duration">3600s (~1 hours)</td>
<td class="gt_row gt_center" headers="219  total_duration">7200s (~2 hours)</td>
<td class="gt_row gt_right" headers="219  episodes">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="219  state">≤10lx</td>
<td class="gt_row gt_right" headers="219  mean_epoch">1800</td>
<td class="gt_row gt_center" headers="219  mean_start">17:25:00</td>
<td class="gt_row gt_center" headers="219  mean_end">11:35:00</td>
<td class="gt_row gt_center" headers="219  mean_duration">7800s (~2.17 hours)</td>
<td class="gt_row gt_center" headers="219  total_duration">23400s (~6.5 hours)</td>
<td class="gt_row gt_right" headers="219  episodes">3</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="219  state">≤1lx</td>
<td class="gt_row gt_right" headers="219  mean_epoch">1800</td>
<td class="gt_row gt_center" headers="219  mean_start">00:45:00</td>
<td class="gt_row gt_center" headers="219  mean_end">08:15:00</td>
<td class="gt_row gt_center" headers="219  mean_duration">27000s (~7.5 hours)</td>
<td class="gt_row gt_center" headers="219  total_duration">27000s (~7.5 hours)</td>
<td class="gt_row gt_right" headers="219  episodes">1</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="219  state">NA</td>
<td class="gt_row gt_right" headers="219  mean_epoch">1800</td>
<td class="gt_row gt_center" headers="219  mean_start">11:55:00</td>
<td class="gt_row gt_center" headers="219  mean_end">14:35:00</td>
<td class="gt_row gt_center" headers="219  mean_duration">9600s (~2.67 hours)</td>
<td class="gt_row gt_center" headers="219  total_duration">28800s (~8 hours)</td>
<td class="gt_row gt_right" headers="219  episodes">3</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section></section><section id="its-a-wrap" class="level2"><h2 class="anchored" data-anchor-id="its-a-wrap">It’s a wrap</h2>
<p>This concludes the first part of the <code>LightLogR</code> tutorial. We hope it has given you a nice introduction to the package and convinced you to try it out with your own data and in your local installation. For more on <code>LightLogR</code>, we recommend the <a href="https://tscnlab.github.io/LightLogR/">documentation page</a>. If you want to stay up to date with the development of the package, you can sign up to our <a href="https://lists.lrz.de/mailman/listinfo/lightlogr-users">LightLogR mailing list</a>.</p>


<!-- -->

</section><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>
<ol>
<li id="fn1"><p>If you are new to the R language or want a great introduction to R for data science, we can recommend the free online book <a href="https://r4ds.hadley.nz">R for Data Science (second edition)</a> by Hadley Wickham, Mine Cetinkaya-Rundel, and Garrett Grolemund.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>If you want to know more about <code>webR</code> and the <code>Quarto-live</code> extension that powers this document, you can visit the <a href="https://r-wasm.github.io/quarto-live/">documentation page</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Guidolin, C., Zauner, J., &amp; Spitschan, M., (2025). Personal light exposure dataset for Tuebingen, Germany (Version 1.0.0) [Data set]. URL: https://github.com/MeLiDosProject/GuidolinEtAl_Dataset_2025. DOI: doi.org/10.5281/zenodo.16895188<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb89" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Open and reproducible analysis of light exposure and visual experience data (Beginner)"</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Johannes Zauner"</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="an">lightbox:</span><span class="co"> true</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="an">code-link:</span><span class="co"> true</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a><span class="al">![](assets/Beginner_Heading.png)</span></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a><span class="fu">## Preface</span></span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a>Wearables are increasingly used in research because they combine personalized, high‑temporal‑resolution measurements with outcomes related to well‑being and health. In sleep research, wrist‑worn actimetry is long established. As circadian factors gain prominence across disciplines, interest in personal light exposure has grown, spurring a variety of new devices, form factors, and sensor technologies. This trend also brings many researchers into settings where data from wearables must be ingested, processed, and analyzed. Beyond circadian science, measurements of light and optical radiation are central to UV‑related research and to questions of ocular health and development.</span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-15"><a href="#cb89-15" aria-hidden="true" tabindex="-1"></a><span class="in">`LightLogR`</span> is designed to facilitate the principled import, processing, and visualization of such wearable‑derived data. This document offers an accessible entry point to <span class="in">`LightLogR`</span> via a self‑contained analysis script that you can modify to familiarize yourself with the package. Full documentation of <span class="in">`LightLogR`</span>’s features is available on the <span class="co">[</span><span class="ot">documentation page</span><span class="co">](https://tscnlab.github.io/LightLogR/)</span>, including numerous tutorials.</span>
<span id="cb89-16"><a href="#cb89-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-17"><a href="#cb89-17" aria-hidden="true" tabindex="-1"></a>This document is intended for researchers with no prior experience using <span class="in">`LightLogR`</span>, and assumes general familiarity with the R statistical software, ideally in a data‑science context<span class="ot">[^1]</span>.</span>
<span id="cb89-18"><a href="#cb89-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-19"><a href="#cb89-19" aria-hidden="true" tabindex="-1"></a><span class="ot">[^1]: </span>If you are new to the R language or want a great introduction to R for data science, we can recommend the free online book <span class="co">[</span><span class="ot">R for Data Science (second edition)</span><span class="co">](https://r4ds.hadley.nz)</span> by Hadley Wickham, Mine Cetinkaya-Rundel, and Garrett Grolemund.</span>
<span id="cb89-20"><a href="#cb89-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-21"><a href="#cb89-21" aria-hidden="true" tabindex="-1"></a><span class="fu">## How this page works</span></span>
<span id="cb89-22"><a href="#cb89-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-23"><a href="#cb89-23" aria-hidden="true" tabindex="-1"></a>This document runs a self‑contained version of R **completely in your browser**<span class="ot">[^2]</span>. No setup or installation is required. You can execute the same <span class="co">[</span><span class="ot">script</span><span class="co">]</span> in a traditional R environment, but this browser‑based approach has several advantages:</span>
<span id="cb89-24"><a href="#cb89-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-25"><a href="#cb89-25" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>You can get started in seconds, avoiding configuration differences across machines and getting to the interesting part quickly.</span>
<span id="cb89-26"><a href="#cb89-26" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Unlike a static tutorial, you can modify code to test the effects of different arguments and functions and receive immediate feedback.</span>
<span id="cb89-27"><a href="#cb89-27" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Because everything runs locally in your browser, there are no additional server‑side security risks and minimal network‑related slowdowns.</span>
<span id="cb89-28"><a href="#cb89-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-29"><a href="#cb89-29" aria-hidden="true" tabindex="-1"></a>This approach also comes with a few drawbacks:</span>
<span id="cb89-30"><a href="#cb89-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-31"><a href="#cb89-31" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>R and all required packages are loaded every time you load the page. If you close the page or navigate elsewhere in the same tab, webR must be re‑initialized and your session state is lost.</span>
<span id="cb89-32"><a href="#cb89-32" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Certain functions do not behave as they would in a traditional runtime. For example, saving plot images directly to your local machine (e.g., with <span class="in">`ggsave()`</span>) is not supported. If you need these capabilities, run the <span class="co">[</span><span class="ot">script</span><span class="co">]()</span> on your local R installation. In most cases, however, you can interact with the code as you would locally.</span>
<span id="cb89-33"><a href="#cb89-33" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Depending on your browser and system settings, functionality or output may differ. Common differences include default fonts and occasional plot background colors. If you encounter an issue, please describe it in detail—along with your system information (hardware, OS, browser)—in the <span class="co">[</span><span class="ot">issues</span><span class="co">](https://github.com/tscnlab/LightLogR_webinar/issues)</span> section of the GitHub repository. This helps us to improve your experience moving forward.</span>
<span id="cb89-34"><a href="#cb89-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-35"><a href="#cb89-35" aria-hidden="true" tabindex="-1"></a><span class="ot">[^2]: </span>If you want to know more about <span class="in">`webR`</span> and the <span class="in">`Quarto-live`</span> extension that powers this document, you can visit the <span class="co">[</span><span class="ot">documentation page</span><span class="co">](https://r-wasm.github.io/quarto-live/)</span></span>
<span id="cb89-36"><a href="#cb89-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-37"><a href="#cb89-37" aria-hidden="true" tabindex="-1"></a><span class="fu">## Installation</span></span>
<span id="cb89-38"><a href="#cb89-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-39"><a href="#cb89-39" aria-hidden="true" tabindex="-1"></a><span class="in">`LightLogR`</span> is hosted on <span class="co">[</span><span class="ot">CRAN</span><span class="co">](https://cran.r-project.org/package=LightLogR)</span>, which means it can easily be installed from any R console through the following command:</span>
<span id="cb89-40"><a href="#cb89-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-43"><a href="#cb89-43" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-44"><a href="#cb89-44" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb89-45"><a href="#cb89-45" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"LightLogR"</span>)</span>
<span id="cb89-46"><a href="#cb89-46" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-47"><a href="#cb89-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-48"><a href="#cb89-48" aria-hidden="true" tabindex="-1"></a>After installation, it becomes available for the current session by loading the package. We also require a number of packages. Most are automatically downloaded with <span class="in">`LightLogR`</span>, but need to be loaded separately. Some might have to be installed separately on your local machine.</span>
<span id="cb89-49"><a href="#cb89-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-52"><a href="#cb89-52" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-53"><a href="#cb89-53" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb89-54"><a href="#cb89-54" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(LightLogR) <span class="co">#load the package</span></span>
<span id="cb89-55"><a href="#cb89-55" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co">#a package for tidy data science</span></span>
<span id="cb89-56"><a href="#cb89-56" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt) <span class="co">#a package for great tables</span></span>
<span id="cb89-57"><a href="#cb89-57" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb89-58"><a href="#cb89-58" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(legendry)</span>
<span id="cb89-59"><a href="#cb89-59" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb89-60"><a href="#cb89-60" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb89-61"><a href="#cb89-61" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb89-62"><a href="#cb89-62" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb89-63"><a href="#cb89-63" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rlang)</span>
<span id="cb89-64"><a href="#cb89-64" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb89-65"><a href="#cb89-65" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtExtras)</span>
<span id="cb89-66"><a href="#cb89-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-67"><a href="#cb89-67" aria-hidden="true" tabindex="-1"></a><span class="co">#the next two scripts will be integrated into the next release of LightLogR</span></span>
<span id="cb89-68"><a href="#cb89-68" aria-hidden="true" tabindex="-1"></a><span class="co">#but have to be loaded separately for now (≤0.9.3)</span></span>
<span id="cb89-69"><a href="#cb89-69" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"scripts/overview_plot.R"</span>)</span>
<span id="cb89-70"><a href="#cb89-70" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"scripts/summary_table.R"</span>)</span>
<span id="cb89-71"><a href="#cb89-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-72"><a href="#cb89-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Set a global theme for the background</span></span>
<span id="cb89-73"><a href="#cb89-73" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(</span>
<span id="cb89-74"><a href="#cb89-74" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb89-75"><a href="#cb89-75" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">color =</span> <span class="cn">NA</span>)</span>
<span id="cb89-76"><a href="#cb89-76" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb89-77"><a href="#cb89-77" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb89-78"><a href="#cb89-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-79"><a href="#cb89-79" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-80"><a href="#cb89-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-81"><a href="#cb89-81" aria-hidden="true" tabindex="-1"></a>That is all we need to get started. Let's make a quick visualization of a sample dataset that comes preloaded with the package. It contains six days of data from a participant, with concurrent measurements of environmental light exposure at the university rooftop. You can play with the arguments to see how it changes the output.</span>
<span id="cb89-82"><a href="#cb89-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-85"><a href="#cb89-85" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-86"><a href="#cb89-86" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb89-87"><a href="#cb89-87" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 10</span></span>
<span id="cb89-88"><a href="#cb89-88" aria-hidden="true" tabindex="-1"></a>sample.data.environment <span class="sc">|&gt;</span> <span class="co">#sample data</span></span>
<span id="cb89-89"><a href="#cb89-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_days</span>(<span class="at">geom =</span> <span class="st">"ribbon"</span>, </span>
<span id="cb89-90"><a href="#cb89-90" aria-hidden="true" tabindex="-1"></a>          <span class="at">aes_fill =</span> Id, </span>
<span id="cb89-91"><a href="#cb89-91" aria-hidden="true" tabindex="-1"></a>          <span class="at">alpha =</span> <span class="fl">0.6</span>, </span>
<span id="cb89-92"><a href="#cb89-92" aria-hidden="true" tabindex="-1"></a>          <span class="at">facetting =</span> <span class="cn">FALSE</span></span>
<span id="cb89-93"><a href="#cb89-93" aria-hidden="true" tabindex="-1"></a>          ) <span class="sc">|&gt;</span> </span>
<span id="cb89-94"><a href="#cb89-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_photoperiod</span>(<span class="fu">c</span>(<span class="fl">47.1</span>, <span class="dv">9</span>)) <span class="sc">+</span></span>
<span id="cb89-95"><a href="#cb89-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> <span class="cn">FALSE</span>)</span>
<span id="cb89-96"><a href="#cb89-96" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-97"><a href="#cb89-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-98"><a href="#cb89-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-99"><a href="#cb89-99" aria-hidden="true" tabindex="-1"></a><span class="fu">## Import</span></span>
<span id="cb89-100"><a href="#cb89-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-101"><a href="#cb89-101" aria-hidden="true" tabindex="-1"></a><span class="fu">### File formats</span></span>
<span id="cb89-102"><a href="#cb89-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-103"><a href="#cb89-103" aria-hidden="true" tabindex="-1"></a>To work with <span class="in">`LightLogR`</span>, we need some data from wearables. To the side are screenshots from three example formats to highlight the structure and differences. You can enlarge by clicking at them.</span>
<span id="cb89-104"><a href="#cb89-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-105"><a href="#cb89-105" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb89-106"><a href="#cb89-106" aria-hidden="true" tabindex="-1"></a><span class="al">![ActLumus file structure](assets/File_Actlumus.png)</span></span>
<span id="cb89-107"><a href="#cb89-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-108"><a href="#cb89-108" aria-hidden="true" tabindex="-1"></a><span class="al">![Speccy file structure](assets/File_Speccy.png)</span></span>
<span id="cb89-109"><a href="#cb89-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-110"><a href="#cb89-110" aria-hidden="true" tabindex="-1"></a><span class="al">![nanoLambda file structure](assets/File_nanoLambda.png)</span></span>
<span id="cb89-111"><a href="#cb89-111" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-112"><a href="#cb89-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-113"><a href="#cb89-113" aria-hidden="true" tabindex="-1"></a><span class="fu">### Importing a file</span></span>
<span id="cb89-114"><a href="#cb89-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-115"><a href="#cb89-115" aria-hidden="true" tabindex="-1"></a>These files must be loaded into the active session in a *tidy* format—each variable in its own column and each observation in its own row. <span class="in">`LightLogR`</span>’s device‑specific <span class="in">`import`</span> functions take care of this transformation. Each function requires:</span>
<span id="cb89-116"><a href="#cb89-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-117"><a href="#cb89-117" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>filenames and paths to the wearable export files</span>
<span id="cb89-118"><a href="#cb89-118" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>the time zone in which the data were collected</span>
<span id="cb89-119"><a href="#cb89-119" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>(optional) participant identifiers</span>
<span id="cb89-120"><a href="#cb89-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-121"><a href="#cb89-121" aria-hidden="true" tabindex="-1"></a>We begin with a dataset bundled with the package, recorded with the <span class="in">`ActLumus`</span> device. The data were collected in *Tübingen, Germany*, so the correct time zone is <span class="in">`Europe/Berlin`</span>.</span>
<span id="cb89-122"><a href="#cb89-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-125"><a href="#cb89-125" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-126"><a href="#cb89-126" aria-hidden="true" tabindex="-1"></a><span class="co">#accessing the filepath of the package to reach the sample dataset:</span></span>
<span id="cb89-127"><a href="#cb89-127" aria-hidden="true" tabindex="-1"></a>filename <span class="ot">&lt;-</span> </span>
<span id="cb89-128"><a href="#cb89-128" aria-hidden="true" tabindex="-1"></a>  <span class="fu">system.file</span>(<span class="st">"extdata/205_actlumus_Log_1020_20230904101707532.txt.zip"</span>, </span>
<span id="cb89-129"><a href="#cb89-129" aria-hidden="true" tabindex="-1"></a>              <span class="at">package =</span> <span class="st">"LightLogR"</span>)</span>
<span id="cb89-130"><a href="#cb89-130" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-131"><a href="#cb89-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-132"><a href="#cb89-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-135"><a href="#cb89-135" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-136"><a href="#cb89-136" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 2</span></span>
<span id="cb89-137"><a href="#cb89-137" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb89-138"><a href="#cb89-138" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> import<span class="sc">$</span><span class="fu">ActLumus</span>(filename, <span class="at">tz =</span> <span class="st">"Europe/Berlin"</span>, <span class="at">manual.id =</span> <span class="st">"P1"</span>)</span>
<span id="cb89-139"><a href="#cb89-139" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-140"><a href="#cb89-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-141"><a href="#cb89-141" aria-hidden="true" tabindex="-1"></a>The import function also provides rich summary information about the dataset—such as the time span covered, sampling intervals, and an overview plot. Most import settings are configurable. To learn more, consult the function documentation online or via <span class="in">`?import`</span>. For a quick visual overview of the data across days, draw a timeline with <span class="in">`gg_days()`</span>.</span>
<span id="cb89-142"><a href="#cb89-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-145"><a href="#cb89-145" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-146"><a href="#cb89-146" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb89-147"><a href="#cb89-147" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb89-148"><a href="#cb89-148" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">gg_days</span>()</span>
<span id="cb89-149"><a href="#cb89-149" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-150"><a href="#cb89-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-151"><a href="#cb89-151" aria-hidden="true" tabindex="-1"></a>We will go into much more detail about visualizations in the sections below.</span>
<span id="cb89-152"><a href="#cb89-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-153"><a href="#cb89-153" aria-hidden="true" tabindex="-1"></a><span class="fu">### Importing from a different device</span></span>
<span id="cb89-154"><a href="#cb89-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-155"><a href="#cb89-155" aria-hidden="true" tabindex="-1"></a>Each device exports data in its own format, necessitating device‑specific handling. <span class="in">`LightLogR`</span> includes import wrapper functions for many devices. You can retrieve the list supported by your installed version with the following function:</span>
<span id="cb89-156"><a href="#cb89-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-159"><a href="#cb89-159" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-160"><a href="#cb89-160" aria-hidden="true" tabindex="-1"></a><span class="fu">supported_devices</span>()</span>
<span id="cb89-161"><a href="#cb89-161" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-162"><a href="#cb89-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-163"><a href="#cb89-163" aria-hidden="true" tabindex="-1"></a>We will now import from two other devices to showcase the differences.</span>
<span id="cb89-164"><a href="#cb89-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-165"><a href="#cb89-165" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Speccy</span></span>
<span id="cb89-166"><a href="#cb89-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-169"><a href="#cb89-169" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-170"><a href="#cb89-170" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 2</span></span>
<span id="cb89-171"><a href="#cb89-171" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb89-172"><a href="#cb89-172" aria-hidden="true" tabindex="-1"></a>filename <span class="ot">&lt;-</span> <span class="st">"data/Speccy.csv"</span></span>
<span id="cb89-173"><a href="#cb89-173" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> import<span class="sc">$</span><span class="fu">Speccy</span>(filename, <span class="at">tz =</span> <span class="st">"Europe/Berlin"</span>, <span class="at">manual.id =</span> <span class="st">"P1"</span>)</span>
<span id="cb89-174"><a href="#cb89-174" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-175"><a href="#cb89-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-178"><a href="#cb89-178" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-179"><a href="#cb89-179" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb89-180"><a href="#cb89-180" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb89-181"><a href="#cb89-181" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">gg_days</span>()</span>
<span id="cb89-182"><a href="#cb89-182" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-183"><a href="#cb89-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-184"><a href="#cb89-184" aria-hidden="true" tabindex="-1"></a><span class="fu">#### nanoLambda</span></span>
<span id="cb89-185"><a href="#cb89-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-188"><a href="#cb89-188" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-189"><a href="#cb89-189" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 2</span></span>
<span id="cb89-190"><a href="#cb89-190" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb89-191"><a href="#cb89-191" aria-hidden="true" tabindex="-1"></a>filename <span class="ot">&lt;-</span> <span class="st">"data/nanoLambda.csv"</span></span>
<span id="cb89-192"><a href="#cb89-192" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> import<span class="sc">$</span><span class="fu">nanoLambda</span>(filename, <span class="at">tz =</span> <span class="st">"Europe/Berlin"</span>, <span class="at">manual.id =</span> <span class="st">"P1"</span>)</span>
<span id="cb89-193"><a href="#cb89-193" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-194"><a href="#cb89-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-195"><a href="#cb89-195" aria-hidden="true" tabindex="-1"></a>If we try to visualize this dataset as we have done above, we get an error.</span>
<span id="cb89-196"><a href="#cb89-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-199"><a href="#cb89-199" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-200"><a href="#cb89-200" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb89-201"><a href="#cb89-201" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb89-202"><a href="#cb89-202" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb89-203"><a href="#cb89-203" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">gg_day</span>()</span>
<span id="cb89-204"><a href="#cb89-204" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-205"><a href="#cb89-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-206"><a href="#cb89-206" aria-hidden="true" tabindex="-1"></a>This is because many <span class="in">`LightLogR`</span> functions default to the melanopic EDI variable<span class="ot">[^3]</span>. However, the nanoLambda export does not include this variable. Therefore, we must explicitly specify which variable to display. Let’s inspect the available variables:</span>
<span id="cb89-207"><a href="#cb89-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-208"><a href="#cb89-208" aria-hidden="true" tabindex="-1"></a><span class="ot">[^3]</span> melanopic equivalent daylight-illuminance, CIE S026:2018 </span>
<span id="cb89-209"><a href="#cb89-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-212"><a href="#cb89-212" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-213"><a href="#cb89-213" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">names</span>()</span>
<span id="cb89-214"><a href="#cb89-214" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-215"><a href="#cb89-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-216"><a href="#cb89-216" aria-hidden="true" tabindex="-1"></a>You can choose any numeric variable; here, we’ll use <span class="in">`Melanopic_Lux`</span>, which is similar—though not identical—to melanopic EDI. To identify which argument to adjust, consult the function documentation:</span>
<span id="cb89-217"><a href="#cb89-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-220"><a href="#cb89-220" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-221"><a href="#cb89-221" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb89-222"><a href="#cb89-222" aria-hidden="true" tabindex="-1"></a>?<span class="fu">gg_day</span>()</span>
<span id="cb89-223"><a href="#cb89-223" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-224"><a href="#cb89-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-225"><a href="#cb89-225" aria-hidden="true" tabindex="-1"></a>Use the <span class="in">`y.axis`</span> argument to select the variable. Also update the axis title via <span class="in">`y.axis.label`</span>; otherwise the default label will refer to melanopic EDI.</span>
<span id="cb89-226"><a href="#cb89-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-227"><a href="#cb89-227" aria-hidden="true" tabindex="-1"></a>Because this dataset spans only a short interval of about 9 minutes, we’ll visualize it with <span class="in">`gg_day()`</span>, which uses clock time on the x‑axis. There are a few other differences to <span class="in">`gg_days()`</span>, which we will see in the sections below.</span>
<span id="cb89-228"><a href="#cb89-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-231"><a href="#cb89-231" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-232"><a href="#cb89-232" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb89-233"><a href="#cb89-233" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb89-234"><a href="#cb89-234" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">gg_day</span>(<span class="at">y.axis =</span> Melanopic_Lux, <span class="at">y.axis.label =</span> <span class="st">"melanopic illuminance"</span>)</span>
<span id="cb89-235"><a href="#cb89-235" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-236"><a href="#cb89-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-237"><a href="#cb89-237" aria-hidden="true" tabindex="-1"></a>In summary, importing from different devices is typically as simple as specifying the device name. Some devices require additional arguments; consult the <span class="in">`?import`</span> help for details.</span>
<span id="cb89-238"><a href="#cb89-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-239"><a href="#cb89-239" aria-hidden="true" tabindex="-1"></a><span class="fu">### Importing more than one file</span></span>
<span id="cb89-240"><a href="#cb89-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-241"><a href="#cb89-241" aria-hidden="true" tabindex="-1"></a>In typical studies, you’ll work with multiple participants, and importing each file individually is cumbersome. <span class="in">`LightLogR`</span> supports batch imports; simply pass multiple files to the import function. In this tutorial, we’ll use three files from three participants, all drawn from the open‑access personal light‑exposure dataset by <span class="co">[</span><span class="ot">Guidolin et al. 2025</span><span class="co">](https://github.com/MeLiDosProject/GuidolinEtAl_Dataset_2025)</span><span class="ot">[^4]</span>. All data were collected with the <span class="in">`ActLumus`</span> device type.</span>
<span id="cb89-242"><a href="#cb89-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-243"><a href="#cb89-243" aria-hidden="true" tabindex="-1"></a><span class="ot">[^4]: </span>Guidolin, C., Zauner, J., &amp; Spitschan, M., (2025). Personal light exposure dataset for Tuebingen, Germany (Version 1.0.0) <span class="co">[</span><span class="ot">Data set</span><span class="co">]</span>. URL: https://github.com/MeLiDosProject/GuidolinEtAl_Dataset_2025. DOI: doi.org/10.5281/zenodo.16895188</span>
<span id="cb89-244"><a href="#cb89-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-245"><a href="#cb89-245" aria-hidden="true" tabindex="-1"></a>When importing multiple files, keep the following in mind:</span>
<span id="cb89-246"><a href="#cb89-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-247"><a href="#cb89-247" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>All files must originate from the same device type, share the same export structure, and use the same time‑zone specification. If they differ, import them separately.</span>
<span id="cb89-248"><a href="#cb89-248" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Be deliberate about participant‑ID assignment. The <span class="in">`manual.id`</span> argument used above would assign the same ID to all imported data in a batch. If a file contains a column specifying the <span class="in">`Id`</span>, you can point to that column; more often, the identifier is encoded in the filename. If you omit ID arguments, the filename is used as <span class="in">`Id`</span> by default. Because filenames are often verbose, you will typically extract only the participant code. In our three example files, the relevant IDs are <span class="in">`216`</span>, <span class="in">`218`</span>, and <span class="in">`219`</span>.</span>
<span id="cb89-249"><a href="#cb89-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-252"><a href="#cb89-252" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-253"><a href="#cb89-253" aria-hidden="true" tabindex="-1"></a>filenames <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">"data"</span>, <span class="at">pattern =</span> <span class="st">"actlumus"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-254"><a href="#cb89-254" aria-hidden="true" tabindex="-1"></a>filenames</span>
<span id="cb89-255"><a href="#cb89-255" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-256"><a href="#cb89-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-257"><a href="#cb89-257" aria-hidden="true" tabindex="-1"></a>If filenames follow a consistent pattern, you can instruct the import function to extract only the participant code from each name. In our case, the first three digits encode the ID. We can specify this with a regular expression: <span class="in">`^(\d{3})`</span>. This pattern matches the first three digits at the start of the filename and captures them (<span class="in">`^`</span> = start of string, <span class="in">`\d`</span> = digit, <span class="in">`{3}`</span> = exactly three, <span class="in">`(`</span>&amp; <span class="in">`)`</span> = encloses the part of the pattern we actually want). If you’re not familiar with regular expressions, they can look like a jumble of ASCII characters, but they succinctly express patterns. Large language models are quite good at proposing regexes and explaining their components, so consider prompting one when you need a new pattern. With that, we can import our files.</span>
<span id="cb89-258"><a href="#cb89-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-261"><a href="#cb89-261" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-262"><a href="#cb89-262" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb89-263"><a href="#cb89-263" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb89-264"><a href="#cb89-264" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">"^(</span><span class="sc">\\</span><span class="st">d{3})"</span></span>
<span id="cb89-265"><a href="#cb89-265" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> import<span class="sc">$</span><span class="fu">ActLumus</span>(filenames, <span class="at">tz =</span> <span class="st">"Europe/Berlin"</span>, <span class="at">auto.id =</span> pattern)</span>
<span id="cb89-266"><a href="#cb89-266" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-267"><a href="#cb89-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-268"><a href="#cb89-268" aria-hidden="true" tabindex="-1"></a>The overview plot is now more informative: it shows how the datasets align across time and highlights extended gaps due to missing data. We will return to the terminology of <span class="in">`implicit missingness`</span> shortly.</span>
<span id="cb89-269"><a href="#cb89-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-272"><a href="#cb89-272" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-273"><a href="#cb89-273" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-274"><a href="#cb89-274" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb89-275"><a href="#cb89-275" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">gg_days</span>()</span>
<span id="cb89-276"><a href="#cb89-276" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-277"><a href="#cb89-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-278"><a href="#cb89-278" aria-hidden="true" tabindex="-1"></a>Direct plotting highlights the extended gaps in the recordings. We’ll apply a package function that removes days with insufficient coverage to address this. For now, we can ignore the details: any participant‑day with more than 80% missing data will be excluded.</span>
<span id="cb89-279"><a href="#cb89-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-282"><a href="#cb89-282" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-283"><a href="#cb89-283" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-284"><a href="#cb89-284" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb89-285"><a href="#cb89-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-286"><a href="#cb89-286" aria-hidden="true" tabindex="-1"></a>dataset_red <span class="ot">&lt;-</span></span>
<span id="cb89-287"><a href="#cb89-287" aria-hidden="true" tabindex="-1"></a>  dataset <span class="sc">|&gt;</span></span>
<span id="cb89-288"><a href="#cb89-288" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_partial_data</span>(</span>
<span id="cb89-289"><a href="#cb89-289" aria-hidden="true" tabindex="-1"></a>    <span class="at">Variable.colname =</span> MEDI,</span>
<span id="cb89-290"><a href="#cb89-290" aria-hidden="true" tabindex="-1"></a>    <span class="at">threshold.missing =</span> <span class="fl">0.8</span>,</span>
<span id="cb89-291"><a href="#cb89-291" aria-hidden="true" tabindex="-1"></a>    <span class="at">by.date =</span> <span class="cn">TRUE</span>,</span>
<span id="cb89-292"><a href="#cb89-292" aria-hidden="true" tabindex="-1"></a>    <span class="at">handle.gaps =</span> <span class="cn">TRUE</span></span>
<span id="cb89-293"><a href="#cb89-293" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb89-294"><a href="#cb89-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-295"><a href="#cb89-295" aria-hidden="true" tabindex="-1"></a>dataset_red <span class="sc">|&gt;</span> <span class="fu">gg_days</span>()</span>
<span id="cb89-296"><a href="#cb89-296" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-297"><a href="#cb89-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-298"><a href="#cb89-298" aria-hidden="true" tabindex="-1"></a>That concludes the import section of the tutorial; next, we turn to visualization functions. For simplicitly, we will only carry a small selection of variables forward. That increases the calculation speed of many functions. Feel free to choose a different set of variables.</span>
<span id="cb89-299"><a href="#cb89-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-302"><a href="#cb89-302" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-303"><a href="#cb89-303" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> dataset <span class="sc">|&gt;</span> <span class="fu">select</span>(Id, Datetime, PIM, MEDI)</span>
<span id="cb89-304"><a href="#cb89-304" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-305"><a href="#cb89-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-306"><a href="#cb89-306" aria-hidden="true" tabindex="-1"></a><span class="fu">### How to find the correct time zone name?</span></span>
<span id="cb89-307"><a href="#cb89-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-308"><a href="#cb89-308" aria-hidden="true" tabindex="-1"></a>A final note on imports: the function accepts only valid <span class="co">[</span><span class="ot">IANA time‑zone</span><span class="co">](https://www.iana.org/time-zones)</span> identifiers. You can retrieve the full list (with exact spellings) using:</span>
<span id="cb89-309"><a href="#cb89-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-312"><a href="#cb89-312" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-313"><a href="#cb89-313" aria-hidden="true" tabindex="-1"></a><span class="fu">OlsonNames</span>() <span class="sc">|&gt;</span> <span class="fu">sample</span>(<span class="dv">5</span>)</span>
<span id="cb89-314"><a href="#cb89-314" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-315"><a href="#cb89-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-316"><a href="#cb89-316" aria-hidden="true" tabindex="-1"></a><span class="fu">## Basic Visualizations</span></span>
<span id="cb89-317"><a href="#cb89-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-318"><a href="#cb89-318" aria-hidden="true" tabindex="-1"></a>Visualization is central to exploratory data analysis and to communicating results in publications and presentations. <span class="in">`LightLogR`</span> provides a suite of plotting functions built on <span class="in">`ggplot2`</span> and the *Grammar of Graphics*. As a result, the plots are composable, flexible, and straightforward to modify.</span>
<span id="cb89-319"><a href="#cb89-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-320"><a href="#cb89-320" aria-hidden="true" tabindex="-1"></a><span class="fu">### `gg_days()`</span></span>
<span id="cb89-321"><a href="#cb89-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-322"><a href="#cb89-322" aria-hidden="true" tabindex="-1"></a><span class="in">`gg_days()`</span> displays a timeline per each <span class="in">`Id`</span>. It constrains the x‑axis to complete days and, by default, uses a line geometry. The function works best for up to a handful of Id's and 1-2 weeks of data at most.</span>
<span id="cb89-323"><a href="#cb89-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-326"><a href="#cb89-326" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-327"><a href="#cb89-327" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-328"><a href="#cb89-328" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb89-329"><a href="#cb89-329" aria-hidden="true" tabindex="-1"></a>dataset_red <span class="sc">|&gt;</span> <span class="fu">gg_days</span>(<span class="at">aes_col =</span> Id) <span class="co">#try interactive = TRUE</span></span>
<span id="cb89-330"><a href="#cb89-330" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-331"><a href="#cb89-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-332"><a href="#cb89-332" aria-hidden="true" tabindex="-1"></a><span class="fu">### `gg_day()`</span></span>
<span id="cb89-333"><a href="#cb89-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-334"><a href="#cb89-334" aria-hidden="true" tabindex="-1"></a><span class="in">`gg_day()`</span> complements <span class="in">`gg_days()`</span> by focusing on individual calendar days. By default, it places all observations from a selected day into a single panel, regardless of source. This layout is configurable. For readability, <span class="in">`gg_day()`</span> works best with ~1–4 days of data (at most about a week) to keep plot height manageable.</span>
<span id="cb89-335"><a href="#cb89-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-338"><a href="#cb89-338" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-339"><a href="#cb89-339" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 10</span></span>
<span id="cb89-340"><a href="#cb89-340" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb89-341"><a href="#cb89-341" aria-hidden="true" tabindex="-1"></a>dataset_red <span class="sc">|&gt;</span> </span>
<span id="cb89-342"><a href="#cb89-342" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_day</span>(<span class="at">aes_col =</span> Id, </span>
<span id="cb89-343"><a href="#cb89-343" aria-hidden="true" tabindex="-1"></a>         <span class="at">format.day =</span> <span class="st">"%A"</span>, <span class="co"># switch from dates to week-days</span></span>
<span id="cb89-344"><a href="#cb89-344" aria-hidden="true" tabindex="-1"></a>         <span class="at">size =</span> <span class="fl">0.5</span>, <span class="co"># reduce point size</span></span>
<span id="cb89-345"><a href="#cb89-345" aria-hidden="true" tabindex="-1"></a>         <span class="at">x.axis.breaks =</span> hms<span class="sc">::</span><span class="fu">hms</span>(<span class="at">hours =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">12</span>))) <span class="sc">+</span> <span class="co">#12-hour grid </span></span>
<span id="cb89-346"><a href="#cb89-346" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">"none"</span>) <span class="sc">+</span> <span class="co"># remove color legend</span></span>
<span id="cb89-347"><a href="#cb89-347" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(Day.data), <span class="at">cols =</span> <span class="fu">vars</span>(Id), <span class="at">switch =</span> <span class="st">"y"</span>) <span class="co"># Id x Day</span></span>
<span id="cb89-348"><a href="#cb89-348" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-349"><a href="#cb89-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-350"><a href="#cb89-350" aria-hidden="true" tabindex="-1"></a><span class="fu">### `gg_overview()`</span></span>
<span id="cb89-351"><a href="#cb89-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-352"><a href="#cb89-352" aria-hidden="true" tabindex="-1"></a><span class="in">`gg_overview()`</span> is invoked automatically by the import function but can also be called independently and customized. By default, each <span class="in">`Id`</span> appears as a separate row on the y‑axis. For longitudinal datasets with large gaps between recordings, you can group observations (e.g., by a <span class="in">`session`</span> variable) to distinguish distinct measurement periods (see margin figure). The function works nice for many participants and long collection periods, by setting their recording periods in relation. By default, it will also show times of implicitly missing data.</span>
<span id="cb89-353"><a href="#cb89-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-354"><a href="#cb89-354" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb89-355"><a href="#cb89-355" aria-hidden="true" tabindex="-1"></a><span class="al">![Grouping the data by `Id` and measurement `session` provides easy overviews for longitudinal datasets](assets/Overview.png)</span></span>
<span id="cb89-356"><a href="#cb89-356" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-357"><a href="#cb89-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-360"><a href="#cb89-360" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-361"><a href="#cb89-361" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb89-362"><a href="#cb89-362" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb89-363"><a href="#cb89-363" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-364"><a href="#cb89-364" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_overview</span>(<span class="at">col =</span> Id) <span class="sc">+</span> </span>
<span id="cb89-365"><a href="#cb89-365" aria-hidden="true" tabindex="-1"></a>  ggsci<span class="sc">::</span><span class="fu">scale_color_jco</span>() <span class="co">#nice color palette</span></span>
<span id="cb89-366"><a href="#cb89-366" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-367"><a href="#cb89-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-368"><a href="#cb89-368" aria-hidden="true" tabindex="-1"></a><span class="fu">### `gg_heatmap()`</span></span>
<span id="cb89-369"><a href="#cb89-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-370"><a href="#cb89-370" aria-hidden="true" tabindex="-1"></a><span class="in">`gg_heatmap()`</span> renders one calendar day per row within each data‑collection period. It is well‑suited to long monitoring spans and scales effectively to many participants. To highlight patterns that cross midnight, it supports a <span class="in">`doubleplot`</span> option that displays a duplicate of the day, or the next day with an offset.</span>
<span id="cb89-371"><a href="#cb89-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-374"><a href="#cb89-374" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-375"><a href="#cb89-375" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb89-376"><a href="#cb89-376" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 10</span></span>
<span id="cb89-377"><a href="#cb89-377" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb89-378"><a href="#cb89-378" aria-hidden="true" tabindex="-1"></a>dataset_red <span class="sc">|&gt;</span> <span class="fu">gg_heatmap</span>()</span>
<span id="cb89-379"><a href="#cb89-379" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-380"><a href="#cb89-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-383"><a href="#cb89-383" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-384"><a href="#cb89-384" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb89-385"><a href="#cb89-385" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 10</span></span>
<span id="cb89-386"><a href="#cb89-386" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb89-387"><a href="#cb89-387" aria-hidden="true" tabindex="-1"></a><span class="co"># Looking at 5-minute bins of data</span></span>
<span id="cb89-388"><a href="#cb89-388" aria-hidden="true" tabindex="-1"></a>dataset_red <span class="sc">|&gt;</span> <span class="fu">gg_heatmap</span>(<span class="at">unit =</span> <span class="st">"5 mins"</span>)</span>
<span id="cb89-389"><a href="#cb89-389" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-390"><a href="#cb89-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-393"><a href="#cb89-393" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-394"><a href="#cb89-394" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb89-395"><a href="#cb89-395" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 10</span></span>
<span id="cb89-396"><a href="#cb89-396" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb89-397"><a href="#cb89-397" aria-hidden="true" tabindex="-1"></a><span class="co">#showing data as doubleplots. Time breaks have to be reduced for legibility</span></span>
<span id="cb89-398"><a href="#cb89-398" aria-hidden="true" tabindex="-1"></a>dataset_red <span class="sc">|&gt;</span> </span>
<span id="cb89-399"><a href="#cb89-399" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_heatmap</span>(<span class="at">doubleplot =</span> <span class="st">"next"</span>, </span>
<span id="cb89-400"><a href="#cb89-400" aria-hidden="true" tabindex="-1"></a>             <span class="at">time.breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">12</span>, <span class="dv">24</span>, <span class="dv">36</span>, <span class="dv">48</span>)<span class="sc">*</span><span class="dv">3600</span></span>
<span id="cb89-401"><a href="#cb89-401" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb89-402"><a href="#cb89-402" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-403"><a href="#cb89-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-406"><a href="#cb89-406" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-407"><a href="#cb89-407" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb89-408"><a href="#cb89-408" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 10</span></span>
<span id="cb89-409"><a href="#cb89-409" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb89-410"><a href="#cb89-410" aria-hidden="true" tabindex="-1"></a><span class="co"># Actogram-style heatmap (&lt;10 lx mel EDI in this case)</span></span>
<span id="cb89-411"><a href="#cb89-411" aria-hidden="true" tabindex="-1"></a>dataset_red <span class="sc">|&gt;</span> </span>
<span id="cb89-412"><a href="#cb89-412" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_heatmap</span>(MEDI <span class="sc">&lt;</span> <span class="dv">10</span>,</span>
<span id="cb89-413"><a href="#cb89-413" aria-hidden="true" tabindex="-1"></a>             <span class="at">doubleplot =</span> <span class="st">"next"</span>, </span>
<span id="cb89-414"><a href="#cb89-414" aria-hidden="true" tabindex="-1"></a>             <span class="at">time.breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">12</span>, <span class="dv">24</span>, <span class="dv">36</span>, <span class="dv">48</span>)<span class="sc">*</span><span class="dv">3600</span>,</span>
<span id="cb89-415"><a href="#cb89-415" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill.limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="cn">NA</span>), </span>
<span id="cb89-416"><a href="#cb89-416" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill.remove =</span> <span class="cn">TRUE</span>, </span>
<span id="cb89-417"><a href="#cb89-417" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill.title =</span> <span class="st">"&lt;10lx mel EDI"</span></span>
<span id="cb89-418"><a href="#cb89-418" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb89-419"><a href="#cb89-419" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"TRUE"</span> <span class="ot">=</span> <span class="st">"black"</span>, <span class="st">"FALSE"</span> <span class="ot">=</span> <span class="st">"#00000000"</span>))</span>
<span id="cb89-420"><a href="#cb89-420" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-421"><a href="#cb89-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-422"><a href="#cb89-422" aria-hidden="true" tabindex="-1"></a><span class="fu">### What about non-light variables?</span></span>
<span id="cb89-423"><a href="#cb89-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-424"><a href="#cb89-424" aria-hidden="true" tabindex="-1"></a><span class="in">`LightLogR`</span> is optimized for wearable light sensors and selects sensible defaults: for example, melanopic EDI (when available) and settings suited to typical light‑exposure distributions. Nevertheless, the functions are measurement‑agnostic and can be applied to non‑light variables. Consult the function documentation to see which arguments to adjust for your variable of interest. For example, here we plot an activity variable:</span>
<span id="cb89-425"><a href="#cb89-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-428"><a href="#cb89-428" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-429"><a href="#cb89-429" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-430"><a href="#cb89-430" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb89-431"><a href="#cb89-431" aria-hidden="true" tabindex="-1"></a>dataset_red <span class="sc">|&gt;</span> </span>
<span id="cb89-432"><a href="#cb89-432" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_days</span>(</span>
<span id="cb89-433"><a href="#cb89-433" aria-hidden="true" tabindex="-1"></a>    <span class="at">y.axis =</span> PIM, <span class="co">#variable PIM</span></span>
<span id="cb89-434"><a href="#cb89-434" aria-hidden="true" tabindex="-1"></a>    <span class="at">y.scale =</span> <span class="st">"identity"</span>, <span class="co">#set a linear scale</span></span>
<span id="cb89-435"><a href="#cb89-435" aria-hidden="true" tabindex="-1"></a>    <span class="at">y.axis.breaks =</span> <span class="fu">waiver</span>(), <span class="co">#choose standard axis breaks according to values</span></span>
<span id="cb89-436"><a href="#cb89-436" aria-hidden="true" tabindex="-1"></a>    <span class="at">y.axis.label =</span> <span class="st">"Proportional integration mode (PIM)"</span></span>
<span id="cb89-437"><a href="#cb89-437" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb89-438"><a href="#cb89-438" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5000</span>))</span>
<span id="cb89-439"><a href="#cb89-439" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-440"><a href="#cb89-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-441"><a href="#cb89-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-442"><a href="#cb89-442" aria-hidden="true" tabindex="-1"></a><span class="fu">## Validation</span></span>
<span id="cb89-443"><a href="#cb89-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-444"><a href="#cb89-444" aria-hidden="true" tabindex="-1"></a>Currently, <span class="in">`LightLogR`</span>’s validation aims to ensure a regular, uninterrupted time series for each participant. Additional features are planned.</span>
<span id="cb89-445"><a href="#cb89-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-446"><a href="#cb89-446" aria-hidden="true" tabindex="-1"></a>The figures at the side summarize the gap terminology used in <span class="in">`LightLogR`</span> and illustrate how <span class="in">`gap_handler()`</span> fills implicit missing data.</span>
<span id="cb89-447"><a href="#cb89-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-448"><a href="#cb89-448" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb89-449"><a href="#cb89-449" aria-hidden="true" tabindex="-1"></a><span class="al">![Terminology of gaps in `LightLogR`](assets/gap_terminology.png)</span></span>
<span id="cb89-450"><a href="#cb89-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-451"><a href="#cb89-451" aria-hidden="true" tabindex="-1"></a><span class="al">![`gap_handler()` identifies the time series’ `dominant epoch` (the most common sampling interval) and fills `NA` entries between the first and last observation. By default, no observations are dropped, so irregular samples are preserved.](assets/gap_handler.png)</span></span>
<span id="cb89-452"><a href="#cb89-452" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-453"><a href="#cb89-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-454"><a href="#cb89-454" aria-hidden="true" tabindex="-1"></a>To quickly assess whether a dataset contains (implicit) gaps or irregular sampling, use the following diagnostic helpers:</span>
<span id="cb89-455"><a href="#cb89-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-458"><a href="#cb89-458" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-459"><a href="#cb89-459" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">has_gaps</span>()</span>
<span id="cb89-460"><a href="#cb89-460" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">has_irregulars</span>()</span>
<span id="cb89-461"><a href="#cb89-461" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-462"><a href="#cb89-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-463"><a href="#cb89-463" aria-hidden="true" tabindex="-1"></a>We can then quickly visualize where these issues occur within the affected days.</span>
<span id="cb89-464"><a href="#cb89-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-467"><a href="#cb89-467" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-468"><a href="#cb89-468" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 12</span></span>
<span id="cb89-469"><a href="#cb89-469" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb89-470"><a href="#cb89-470" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb89-471"><a href="#cb89-471" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">gg_gaps</span>(<span class="at">group.by.days =</span> <span class="cn">TRUE</span>, <span class="at">show.irregulars =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-472"><a href="#cb89-472" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-473"><a href="#cb89-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-474"><a href="#cb89-474" aria-hidden="true" tabindex="-1"></a>This function can be slow when a dataset contains many gaps or irregular samples. If needed, pre‑filter the data or adjust the function’s arguments.</span>
<span id="cb89-475"><a href="#cb89-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-476"><a href="#cb89-476" aria-hidden="true" tabindex="-1"></a>In our example, we identify eight participant‑days with gaps:</span>
<span id="cb89-477"><a href="#cb89-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-478"><a href="#cb89-478" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Three straightforward cases:** data collection ends around noon on Monday, leaving the remainder of the day missing. By default, the function evaluates complete calendar days (this is configurable). These days only require converting implicit gaps into explicit missing values.</span>
<span id="cb89-479"><a href="#cb89-479" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Two pre‑trial snippets:** brief measurements occur on the Friday or Monday preceding the trial—likely test recordings. These days are outside the study window and should be removed entirely.</span>
<span id="cb89-480"><a href="#cb89-480" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Three early irregularities:** irregular sampling appears shortly after data collection starts. This most likely reflects a test recording immediately before the device was handed to the participant. Trimming this initial segment eliminates the irregularity and the rest of the day can be changed to explicit missingness.</span>
<span id="cb89-481"><a href="#cb89-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-482"><a href="#cb89-482" aria-hidden="true" tabindex="-1"></a><span class="fu">### Preparing the dataset</span></span>
<span id="cb89-483"><a href="#cb89-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-484"><a href="#cb89-484" aria-hidden="true" tabindex="-1"></a>There are several ways to address these issues. We will showcase three in the next sections.</span>
<span id="cb89-485"><a href="#cb89-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-486"><a href="#cb89-486" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 1. Set the maximum length of the dataset.</span></span>
<span id="cb89-487"><a href="#cb89-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-488"><a href="#cb89-488" aria-hidden="true" tabindex="-1"></a>If the study follows a fixed‑length protocol, you can enforce a maximum observation window (e.g., 7 days) by trimming from the beginning so that each participant’s series has the same duration. This approach preserves participant‑specific end times, which must meaningfully reflect protocol completion; otherwise, you risk cutting away valid data.</span>
<span id="cb89-489"><a href="#cb89-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-492"><a href="#cb89-492" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-493"><a href="#cb89-493" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb89-494"><a href="#cb89-494" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb89-495"><a href="#cb89-495" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb89-496"><a href="#cb89-496" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-497"><a href="#cb89-497" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(</span>
<span id="cb89-498"><a href="#cb89-498" aria-hidden="true" tabindex="-1"></a>  Datetime <span class="sc">&gt;</span> (<span class="fu">max</span>(Datetime) <span class="sc">-</span> <span class="fu">days</span>(<span class="dv">7</span>))</span>
<span id="cb89-499"><a href="#cb89-499" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb89-500"><a href="#cb89-500" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_gaps</span>(<span class="at">group.by.days =</span> <span class="cn">TRUE</span>, <span class="at">show.irregulars =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-501"><a href="#cb89-501" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-502"><a href="#cb89-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-503"><a href="#cb89-503" aria-hidden="true" tabindex="-1"></a>The remaining gaps are simple start‑ and end‑day truncations.</span>
<span id="cb89-504"><a href="#cb89-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-505"><a href="#cb89-505" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 2. Remove the first values from the dataset</span></span>
<span id="cb89-506"><a href="#cb89-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-507"><a href="#cb89-507" aria-hidden="true" tabindex="-1"></a>You can remove a fixed number of observations from the beginning of each participant’s series. This approach is helpful when the exact total measurement duration is not critical—for example, to discard brief pre‑trial test recordings or initial device‑stabilization periods.</span>
<span id="cb89-508"><a href="#cb89-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-511"><a href="#cb89-511" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-512"><a href="#cb89-512" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 12</span></span>
<span id="cb89-513"><a href="#cb89-513" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb89-514"><a href="#cb89-514" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb89-515"><a href="#cb89-515" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-516"><a href="#cb89-516" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="sc">-</span>(<span class="dv">3</span><span class="sc">*</span><span class="dv">60</span><span class="sc">*</span><span class="dv">6</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb89-517"><a href="#cb89-517" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_gaps</span>(<span class="at">group.by.days =</span> <span class="cn">TRUE</span>, <span class="at">show.irregulars =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-518"><a href="#cb89-518" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-519"><a href="#cb89-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-520"><a href="#cb89-520" aria-hidden="true" tabindex="-1"></a>The results are similarly effective.</span>
<span id="cb89-521"><a href="#cb89-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-522"><a href="#cb89-522" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3. Trim with a list</span></span>
<span id="cb89-523"><a href="#cb89-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-524"><a href="#cb89-524" aria-hidden="true" tabindex="-1"></a>The most robust way to enforce sensible measurement windows is to supply a table of trial <span class="in">`start`</span> and <span class="in">`end`</span> timestamps (per participant) and filter the time series accordingly. In this tutorial we create that table *on the fly*; in practice, it is typically stored in a CSV or Excel file. The <span class="in">`add_states()`</span> function provides an effective interface between the two datasets: it aligns by identifier and time, adds state information (e.g., “in‑trial”), and enables precise trimming. Ensure that the identifying variables (e.g., <span class="in">`Id`</span>) are named identically across files.</span>
<span id="cb89-525"><a href="#cb89-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-528"><a href="#cb89-528" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-529"><a href="#cb89-529" aria-hidden="true" tabindex="-1"></a><span class="co">#create a dataframe of trial times</span></span>
<span id="cb89-530"><a href="#cb89-530" aria-hidden="true" tabindex="-1"></a>trial_times <span class="ot">&lt;-</span></span>
<span id="cb89-531"><a href="#cb89-531" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb89-532"><a href="#cb89-532" aria-hidden="true" tabindex="-1"></a>    <span class="at">Id =</span> <span class="fu">c</span>(<span class="st">"216"</span>, <span class="st">"218"</span>, <span class="st">"219"</span>),</span>
<span id="cb89-533"><a href="#cb89-533" aria-hidden="true" tabindex="-1"></a>    <span class="at">start =</span> <span class="fu">c</span>(</span>
<span id="cb89-534"><a href="#cb89-534" aria-hidden="true" tabindex="-1"></a>      <span class="st">"02.10.2023  12:30:00"</span>,</span>
<span id="cb89-535"><a href="#cb89-535" aria-hidden="true" tabindex="-1"></a>      <span class="st">"16.10.2023  12:00:00"</span>,</span>
<span id="cb89-536"><a href="#cb89-536" aria-hidden="true" tabindex="-1"></a>      <span class="st">"16.10.2023  12:00:00"</span></span>
<span id="cb89-537"><a href="#cb89-537" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb89-538"><a href="#cb89-538" aria-hidden="true" tabindex="-1"></a>    <span class="at">end =</span> <span class="fu">c</span>(</span>
<span id="cb89-539"><a href="#cb89-539" aria-hidden="true" tabindex="-1"></a>      <span class="st">"09.10.2023  12:30:00"</span>,</span>
<span id="cb89-540"><a href="#cb89-540" aria-hidden="true" tabindex="-1"></a>      <span class="st">"23.10.2023  12:00:00"</span>,</span>
<span id="cb89-541"><a href="#cb89-541" aria-hidden="true" tabindex="-1"></a>      <span class="st">"23.10.2023  12:00:00"</span></span>
<span id="cb89-542"><a href="#cb89-542" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb89-543"><a href="#cb89-543" aria-hidden="true" tabindex="-1"></a>    <span class="at">trial =</span> <span class="cn">TRUE</span></span>
<span id="cb89-544"><a href="#cb89-544" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb89-545"><a href="#cb89-545" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(</span>
<span id="cb89-546"><a href="#cb89-546" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(start, end),</span>
<span id="cb89-547"><a href="#cb89-547" aria-hidden="true" tabindex="-1"></a>    \(x) <span class="fu">parse_date_time</span>(x, <span class="at">order =</span> <span class="st">"%d%m%y %H%M%S"</span>, <span class="at">tz =</span> <span class="st">"Europe/Berlin"</span>)</span>
<span id="cb89-548"><a href="#cb89-548" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb89-549"><a href="#cb89-549" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Id)</span>
<span id="cb89-550"><a href="#cb89-550" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-551"><a href="#cb89-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-554"><a href="#cb89-554" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-555"><a href="#cb89-555" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 12</span></span>
<span id="cb89-556"><a href="#cb89-556" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb89-557"><a href="#cb89-557" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb89-558"><a href="#cb89-558" aria-hidden="true" tabindex="-1"></a><span class="co"># filter dataset by trial time</span></span>
<span id="cb89-559"><a href="#cb89-559" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span></span>
<span id="cb89-560"><a href="#cb89-560" aria-hidden="true" tabindex="-1"></a>  dataset <span class="sc">|&gt;</span></span>
<span id="cb89-561"><a href="#cb89-561" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_states</span>(trial_times) <span class="sc">|&gt;</span></span>
<span id="cb89-562"><a href="#cb89-562" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(trial) <span class="sc">|&gt;</span></span>
<span id="cb89-563"><a href="#cb89-563" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>trial)</span>
<span id="cb89-564"><a href="#cb89-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-565"><a href="#cb89-565" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-566"><a href="#cb89-566" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_gaps</span>(<span class="at">group.by.days =</span> <span class="cn">TRUE</span>, <span class="at">show.irregulars =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-567"><a href="#cb89-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-568"><a href="#cb89-568" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-569"><a href="#cb89-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-570"><a href="#cb89-570" aria-hidden="true" tabindex="-1"></a><span class="fu">### `gap_table()`</span></span>
<span id="cb89-571"><a href="#cb89-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-572"><a href="#cb89-572" aria-hidden="true" tabindex="-1"></a>We can summarize each dataset’s regularity and missingness in a table. Note that this function may be slow when many gaps are present.</span>
<span id="cb89-573"><a href="#cb89-573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-576"><a href="#cb89-576" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-577"><a href="#cb89-577" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">gap_table</span>() <span class="sc">|&gt;</span> <span class="fu">cols_hide</span>(<span class="fu">contains</span>(<span class="st">"_n"</span>))</span>
<span id="cb89-578"><a href="#cb89-578" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-579"><a href="#cb89-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-580"><a href="#cb89-580" aria-hidden="true" tabindex="-1"></a><span class="fu">### `gap_handler()`</span></span>
<span id="cb89-581"><a href="#cb89-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-582"><a href="#cb89-582" aria-hidden="true" tabindex="-1"></a>Approximately 13% of the missing data are *implicit*—they arise from truncated start and end days. It is good practice to make these gaps explicit. Use <span class="in">`gap_handler(full.days = TRUE)`</span> to fill implicit gaps to full‑day regularity. Then verify the result with <span class="in">`gap_table()`</span>, the diagnostic helpers, and a follow‑up visualization:</span>
<span id="cb89-583"><a href="#cb89-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-586"><a href="#cb89-586" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-587"><a href="#cb89-587" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> dataset <span class="sc">|&gt;</span> <span class="fu">gap_handler</span>(<span class="at">full.days =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-588"><a href="#cb89-588" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">gap_table</span>() <span class="sc">|&gt;</span> <span class="fu">cols_hide</span>(<span class="fu">contains</span>(<span class="st">"_n"</span>))</span>
<span id="cb89-589"><a href="#cb89-589" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-590"><a href="#cb89-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-593"><a href="#cb89-593" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-594"><a href="#cb89-594" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">has_gaps</span>()</span>
<span id="cb89-595"><a href="#cb89-595" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">has_irregulars</span>()</span>
<span id="cb89-596"><a href="#cb89-596" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-597"><a href="#cb89-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-600"><a href="#cb89-600" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-601"><a href="#cb89-601" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-602"><a href="#cb89-602" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb89-603"><a href="#cb89-603" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb89-604"><a href="#cb89-604" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">gg_days</span>(<span class="at">aes_col =</span> Id)</span>
<span id="cb89-605"><a href="#cb89-605" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-606"><a href="#cb89-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-607"><a href="#cb89-607" aria-hidden="true" tabindex="-1"></a><span class="fu">### `remove_partial_data()`</span></span>
<span id="cb89-608"><a href="#cb89-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-609"><a href="#cb89-609" aria-hidden="true" tabindex="-1"></a>It is often necessary to set missingness thresholds at different levels (hour, day, participant). Typical questions include:</span>
<span id="cb89-610"><a href="#cb89-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-611"><a href="#cb89-611" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How much data may be missing within an hour before that hour is excluded?</span>
<span id="cb89-612"><a href="#cb89-612" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How much data may be missing from a day before that day is excluded?</span>
<span id="cb89-613"><a href="#cb89-613" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How much data may be missing for a participant before excluding them from further analyses?</span>
<span id="cb89-614"><a href="#cb89-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-615"><a href="#cb89-615" aria-hidden="true" tabindex="-1"></a><span class="in">`remove_partial_data()`</span> addresses these questions. It evaluates each group (by default, <span class="in">`Id`</span>) and quantifies missingness either as an absolute duration or a relative proportion. Groups that exceed the specified threshold are discarded. A useful option is <span class="in">`by.date`</span>, which performs the thresholding per calendar day (for removal) while leaving the output grouping unchanged. Note that missingness is determined by the amount of data points in each group, relative to NA values.</span>
<span id="cb89-616"><a href="#cb89-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-617"><a href="#cb89-617" aria-hidden="true" tabindex="-1"></a>For this tutorial, we will remove any day with more than one hour of missing data—this effectively drops both partial Mondays:</span>
<span id="cb89-618"><a href="#cb89-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-619"><a href="#cb89-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-622"><a href="#cb89-622" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-623"><a href="#cb89-623" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-624"><a href="#cb89-624" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb89-625"><a href="#cb89-625" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb89-626"><a href="#cb89-626" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> </span>
<span id="cb89-627"><a href="#cb89-627" aria-hidden="true" tabindex="-1"></a>  dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-628"><a href="#cb89-628" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_partial_data</span>(<span class="at">Variable.colname =</span> MEDI, </span>
<span id="cb89-629"><a href="#cb89-629" aria-hidden="true" tabindex="-1"></a>                      <span class="at">threshold.missing =</span> <span class="st">"1 hour"</span>,</span>
<span id="cb89-630"><a href="#cb89-630" aria-hidden="true" tabindex="-1"></a>                      <span class="at">by.date =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-631"><a href="#cb89-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-632"><a href="#cb89-632" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">gg_days</span>(<span class="at">aes_col =</span> Id)</span>
<span id="cb89-633"><a href="#cb89-633" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-634"><a href="#cb89-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-635"><a href="#cb89-635" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb89-636"><a href="#cb89-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-637"><a href="#cb89-637" aria-hidden="true" tabindex="-1"></a>**Why did we just spend all this time handling gaps and irregularities on the Mondays only to remove them afterward?**</span>
<span id="cb89-638"><a href="#cb89-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-639"><a href="#cb89-639" aria-hidden="true" tabindex="-1"></a>Not all datasets are this straightforward. Deciding whether a day should be included in the analysis should come **after** ensuring the data are aligned to a regular, uninterrupted time series. Regularization makes diagnostics meaningful and prevents threshold rules from behaving unpredictably.</span>
<span id="cb89-640"><a href="#cb89-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-641"><a href="#cb89-641" aria-hidden="true" tabindex="-1"></a>Moreover, there are different frameworks for grouping personal light‑exposure data. In this tutorial we focus on calendar dates and 24‑hour days. Other frameworks group differently. For example, anchoring to sleep–wake cycles—under which both Mondays might still contain useful nocturnal data. Harmonizing first ensures those alternatives remain viable even if calendar‑day summaries are later excluded.</span>
<span id="cb89-642"><a href="#cb89-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-643"><a href="#cb89-643" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-644"><a href="#cb89-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-645"><a href="#cb89-645" aria-hidden="true" tabindex="-1"></a><span class="fu">## Metrics</span></span>
<span id="cb89-646"><a href="#cb89-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-647"><a href="#cb89-647" aria-hidden="true" tabindex="-1"></a>Metrics form the second major pillar of <span class="in">`LightLogR`</span>, alongside visualization. The literature contains many light‑exposure metrics; <span class="in">`LightLogR`</span> implements a broad set of them behind a uniform, well‑documented interface. The currently available metrics are:</span>
<span id="cb89-648"><a href="#cb89-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-649"><a href="#cb89-649" aria-hidden="true" tabindex="-1"></a>| Metric Family                        | Submetrics | Note                 | Documentation                                                                                     |</span>
<span id="cb89-650"><a href="#cb89-650" aria-hidden="true" tabindex="-1"></a>|------------------|----------------|-----------------|---------------------|</span>
<span id="cb89-651"><a href="#cb89-651" aria-hidden="true" tabindex="-1"></a>| Barroso                              | 7                 |                      | <span class="in">`barroso_lighting_metrics()`</span>                                                                      |</span>
<span id="cb89-652"><a href="#cb89-652" aria-hidden="true" tabindex="-1"></a>| Bright-dark period                   | 4x2               | bright / dark        | <span class="in">`bright_dark_period()`</span>                                                                            |</span>
<span id="cb89-653"><a href="#cb89-653" aria-hidden="true" tabindex="-1"></a>| Centroid of light exposure           | 1                 |                      | <span class="in">`centroidLE()`</span>                                                                                    |</span>
<span id="cb89-654"><a href="#cb89-654" aria-hidden="true" tabindex="-1"></a>| Dose                                 | 1                 |                      | <span class="in">`dose()`</span>                                                                               |</span>
<span id="cb89-655"><a href="#cb89-655" aria-hidden="true" tabindex="-1"></a>| Disparity index                      | 1                 |                      | <span class="in">`disparity_index()`</span>                                                                               |</span>
<span id="cb89-656"><a href="#cb89-656" aria-hidden="true" tabindex="-1"></a>| Duration above threshold             | 3                 | above, below, within | <span class="in">`duration_above_threshold()`</span>                                                                      |</span>
<span id="cb89-657"><a href="#cb89-657" aria-hidden="true" tabindex="-1"></a>| Exponential moving average (EMA)     | 1                 |                      | <span class="in">`exponential_moving_average()`</span>                                                                    |</span>
<span id="cb89-658"><a href="#cb89-658" aria-hidden="true" tabindex="-1"></a>| Frequency crossing threshold         | 1                 |                      | <span class="in">`frequency_crossing_threshold()`</span>                                                                  |</span>
<span id="cb89-659"><a href="#cb89-659" aria-hidden="true" tabindex="-1"></a>| Intradaily Variance (IV)             | 1                 |                      | <span class="in">`intradaily_variability()`</span>                                                                        |</span>
<span id="cb89-660"><a href="#cb89-660" aria-hidden="true" tabindex="-1"></a>| Interdaily Stability (IS)            | 1                 |                      | <span class="in">`interdaily_stability()`</span>                                                                          |</span>
<span id="cb89-661"><a href="#cb89-661" aria-hidden="true" tabindex="-1"></a>| Midpoint CE (Cumulative Exposure)    | 1                 |                      | <span class="in">`midpointCE()`</span>                                                                                    |</span>
<span id="cb89-662"><a href="#cb89-662" aria-hidden="true" tabindex="-1"></a>| nvRC (Non-visual circadian response) | 4                 |                      | <span class="in">`nvRC()`</span>, <span class="in">`nvRC_circadianDisturbance()`</span>, <span class="in">`nvRC_circadianBias()`</span>, <span class="in">`nvRC_relativeAmplitudeError()`</span> |</span>
<span id="cb89-663"><a href="#cb89-663" aria-hidden="true" tabindex="-1"></a>| nvRD (Non-visual direct response)    | 2                 |                      | <span class="in">`nvRD()`</span>, <span class="in">`nvRD_cumulative_response()`</span>                                                           |</span>
<span id="cb89-664"><a href="#cb89-664" aria-hidden="true" tabindex="-1"></a>| Period above threshold               | 3                 | above, below, within | <span class="in">`period_above_threshold()`</span>                                                                        |</span>
<span id="cb89-665"><a href="#cb89-665" aria-hidden="true" tabindex="-1"></a>| Pulses above threshold               | 7x3               | above, below, within | <span class="in">`pulses_above_threshold()`</span>                                                                        |</span>
<span id="cb89-666"><a href="#cb89-666" aria-hidden="true" tabindex="-1"></a>| Threshold for duration               | 2                 | above, below         | <span class="in">`threshold_for_duration()`</span>                                                                        |</span>
<span id="cb89-667"><a href="#cb89-667" aria-hidden="true" tabindex="-1"></a>| Timing above threshold               | 3                 | above, below, within | <span class="in">`timing_above_threshold()`</span>                                                                        |</span>
<span id="cb89-668"><a href="#cb89-668" aria-hidden="true" tabindex="-1"></a>| **Total:**                           |                   |                      |                                                                                                   |</span>
<span id="cb89-669"><a href="#cb89-669" aria-hidden="true" tabindex="-1"></a>| **17 families**                      | **62 metrics**    |                      |                                                                                                   |</span>
<span id="cb89-670"><a href="#cb89-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-671"><a href="#cb89-671" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip}</span>
<span id="cb89-672"><a href="#cb89-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-673"><a href="#cb89-673" aria-hidden="true" tabindex="-1"></a>LightLogR supports a wide range of metrics across different metric families. You can find the full documentation of metrics functions in the <span class="co">[</span><span class="ot">reference section</span><span class="co">](https://tscnlab.github.io/LightLogR/reference/index.html#metrics)</span>. There is also an overview article on how to use <span class="co">[</span><span class="ot">Metrics</span><span class="co">](https://tscnlab.github.io/LightLogR/articles/Metrics.html)</span>.</span>
<span id="cb89-674"><a href="#cb89-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-675"><a href="#cb89-675" aria-hidden="true" tabindex="-1"></a>If you would like to use a metric you don't find represented in LightLogR, please contact the developers. The easiest and most trackable way to get in contact is by opening a new issue on our <span class="co">[</span><span class="ot">Github repository</span><span class="co">](https://github.com/tscnlab/LightLogR/issues)</span>.</span>
<span id="cb89-676"><a href="#cb89-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-677"><a href="#cb89-677" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-678"><a href="#cb89-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-679"><a href="#cb89-679" aria-hidden="true" tabindex="-1"></a><span class="fu">### Principles</span></span>
<span id="cb89-680"><a href="#cb89-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-681"><a href="#cb89-681" aria-hidden="true" tabindex="-1"></a>Each metric function operates on vectors. Although the main argument is often named <span class="in">`Light.vector`</span>, the name is conventional - the function will accept any variable you supply. All metric functions are thoroughly documented, with references to their intended use and interpretation.</span>
<span id="cb89-682"><a href="#cb89-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-683"><a href="#cb89-683" aria-hidden="true" tabindex="-1"></a>While we don’t generally recommend it, you can pass a raw vector directly to a metric function. For example, to compute *Time above 250&nbsp;lx melanopic EDI*, you could run:</span>
<span id="cb89-684"><a href="#cb89-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-687"><a href="#cb89-687" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-688"><a href="#cb89-688" aria-hidden="true" tabindex="-1"></a><span class="fu">duration_above_threshold</span>(</span>
<span id="cb89-689"><a href="#cb89-689" aria-hidden="true" tabindex="-1"></a>  <span class="at">Light.vector =</span> dataset<span class="sc">$</span>MEDI,</span>
<span id="cb89-690"><a href="#cb89-690" aria-hidden="true" tabindex="-1"></a>  <span class="at">Time.vector =</span> dataset<span class="sc">$</span>Datetime,</span>
<span id="cb89-691"><a href="#cb89-691" aria-hidden="true" tabindex="-1"></a>  <span class="at">threshold =</span> <span class="dv">250</span></span>
<span id="cb89-692"><a href="#cb89-692" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb89-693"><a href="#cb89-693" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-694"><a href="#cb89-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-695"><a href="#cb89-695" aria-hidden="true" tabindex="-1"></a>However, that single result is not very informative - it aggregates across all participants and all days. To recover the total recorded duration, recompute the complementary metric: *Time below 250&nbsp;lx melanopic EDI*. This should approximate the full two weeks and four days of data when evaluated over the whole dataset:</span>
<span id="cb89-696"><a href="#cb89-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-699"><a href="#cb89-699" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-700"><a href="#cb89-700" aria-hidden="true" tabindex="-1"></a><span class="fu">duration_above_threshold</span>(</span>
<span id="cb89-701"><a href="#cb89-701" aria-hidden="true" tabindex="-1"></a>  <span class="at">Light.vector =</span> dataset<span class="sc">$</span>MEDI,</span>
<span id="cb89-702"><a href="#cb89-702" aria-hidden="true" tabindex="-1"></a>  <span class="at">Time.vector =</span> dataset<span class="sc">$</span>Datetime,</span>
<span id="cb89-703"><a href="#cb89-703" aria-hidden="true" tabindex="-1"></a>  <span class="at">threshold =</span> <span class="dv">250</span>,</span>
<span id="cb89-704"><a href="#cb89-704" aria-hidden="true" tabindex="-1"></a>  <span class="at">comparison =</span> <span class="st">"below"</span></span>
<span id="cb89-705"><a href="#cb89-705" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb89-706"><a href="#cb89-706" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-707"><a href="#cb89-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-708"><a href="#cb89-708" aria-hidden="true" tabindex="-1"></a>The problem is amplified for metrics defined at the day scale (or shorter). For example, the *brightest 10 hours* (**M10**) is computed within each 24‑hour day using a consecutive 10‑hour window—so applying it to a pooled, cross‑day vector is almost meaningless:</span>
<span id="cb89-709"><a href="#cb89-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-712"><a href="#cb89-712" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-713"><a href="#cb89-713" aria-hidden="true" tabindex="-1"></a><span class="fu">bright_dark_period</span>(</span>
<span id="cb89-714"><a href="#cb89-714" aria-hidden="true" tabindex="-1"></a>  <span class="at">Light.vector =</span> dataset<span class="sc">$</span>MEDI,</span>
<span id="cb89-715"><a href="#cb89-715" aria-hidden="true" tabindex="-1"></a>  <span class="at">Time.vector =</span> dataset<span class="sc">$</span>Datetime,</span>
<span id="cb89-716"><a href="#cb89-716" aria-hidden="true" tabindex="-1"></a>  <span class="at">as.df =</span> <span class="cn">TRUE</span></span>
<span id="cb89-717"><a href="#cb89-717" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb89-718"><a href="#cb89-718" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">tab_header</span>(<span class="st">"M10"</span>)</span>
<span id="cb89-719"><a href="#cb89-719" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-720"><a href="#cb89-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-721"><a href="#cb89-721" aria-hidden="true" tabindex="-1"></a>The resulting value - although computationally valid - is substantively meaningless: it selects the single brightest 10‑hour window **across all participants**, rather than computing M10 *per participant per day*. In addition, two time series (218 &amp; 219) overlap in time, which violates the assumption of a single, regularly spaced series and can produce errors. Hence the <span class="in">`Warning: Time.vector is not regularly spaced. Calculated results may be incorrect!`</span> </span>
<span id="cb89-722"><a href="#cb89-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-723"><a href="#cb89-723" aria-hidden="true" tabindex="-1"></a>Accordingly, metric functions should be applied within tidy groups (e.g., by <span class="in">`Id`</span> and by calendar <span class="in">`Date`</span>), not to a pooled vector. You can achieve this with explicit for‑loops or, preferably, a tidy approach using <span class="in">`dplyr`</span> (e.g., <span class="in">`group_by()`</span>/<span class="in">`summarise()`</span> or <span class="in">`nest()`</span>/<span class="in">`map()`</span>). We recommend the latter.</span>
<span id="cb89-724"><a href="#cb89-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-725"><a href="#cb89-725" aria-hidden="true" tabindex="-1"></a><span class="fu">### Use of `summarize()`</span></span>
<span id="cb89-726"><a href="#cb89-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-727"><a href="#cb89-727" aria-hidden="true" tabindex="-1"></a>Wrap the metric inside a dplyr <span class="in">`summarise()`</span>/<span class="in">`summarize()`</span> call, supply the **grouped** dataset, and set `as.df = TRUE`. This yields a tidy, one‑row‑per‑group result (e.g., per `Id`). For example, computing **interdaily stability (IS)**:</span>
<span id="cb89-728"><a href="#cb89-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-731"><a href="#cb89-731" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-732"><a href="#cb89-732" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-733"><a href="#cb89-733" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb89-734"><a href="#cb89-734" aria-hidden="true" tabindex="-1"></a>    <span class="fu">interdaily_stability</span>(</span>
<span id="cb89-735"><a href="#cb89-735" aria-hidden="true" tabindex="-1"></a>      <span class="at">Light.vector =</span> MEDI,</span>
<span id="cb89-736"><a href="#cb89-736" aria-hidden="true" tabindex="-1"></a>      <span class="at">Datetime.vector =</span> Datetime,</span>
<span id="cb89-737"><a href="#cb89-737" aria-hidden="true" tabindex="-1"></a>      <span class="at">as.df =</span> <span class="cn">TRUE</span></span>
<span id="cb89-738"><a href="#cb89-738" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb89-739"><a href="#cb89-739" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb89-740"><a href="#cb89-740" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-741"><a href="#cb89-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-742"><a href="#cb89-742" aria-hidden="true" tabindex="-1"></a>To compute multiple metrics at once, include additional expressions inside the <span class="in">`summarize()`</span> call. For instance, add **Time above 250&nbsp;lx melanopic EDI** alongside IS:</span>
<span id="cb89-743"><a href="#cb89-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-746"><a href="#cb89-746" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-747"><a href="#cb89-747" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-748"><a href="#cb89-748" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb89-749"><a href="#cb89-749" aria-hidden="true" tabindex="-1"></a>     <span class="fu">duration_above_threshold</span>(</span>
<span id="cb89-750"><a href="#cb89-750" aria-hidden="true" tabindex="-1"></a>      <span class="at">Light.vector =</span> MEDI,</span>
<span id="cb89-751"><a href="#cb89-751" aria-hidden="true" tabindex="-1"></a>      <span class="at">Time.vector =</span> Datetime,</span>
<span id="cb89-752"><a href="#cb89-752" aria-hidden="true" tabindex="-1"></a>      <span class="at">threshold =</span> <span class="dv">250</span>,</span>
<span id="cb89-753"><a href="#cb89-753" aria-hidden="true" tabindex="-1"></a>      <span class="at">as.df =</span> <span class="cn">TRUE</span></span>
<span id="cb89-754"><a href="#cb89-754" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb89-755"><a href="#cb89-755" aria-hidden="true" tabindex="-1"></a>    <span class="fu">interdaily_stability</span>(</span>
<span id="cb89-756"><a href="#cb89-756" aria-hidden="true" tabindex="-1"></a>      <span class="at">Light.vector =</span> MEDI,</span>
<span id="cb89-757"><a href="#cb89-757" aria-hidden="true" tabindex="-1"></a>      <span class="at">Datetime.vector =</span> Datetime,</span>
<span id="cb89-758"><a href="#cb89-758" aria-hidden="true" tabindex="-1"></a>      <span class="at">as.df =</span> <span class="cn">TRUE</span></span>
<span id="cb89-759"><a href="#cb89-759" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb89-760"><a href="#cb89-760" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb89-761"><a href="#cb89-761" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-762"><a href="#cb89-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-763"><a href="#cb89-763" aria-hidden="true" tabindex="-1"></a>For finer granularity, add additional grouping variables before summarizing—for example, group by calendar <span class="in">`Date`</span> to compute metrics per participant–day:</span>
<span id="cb89-764"><a href="#cb89-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-767"><a href="#cb89-767" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-768"><a href="#cb89-768" aria-hidden="true" tabindex="-1"></a>TAT250 <span class="ot">&lt;-</span> </span>
<span id="cb89-769"><a href="#cb89-769" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-770"><a href="#cb89-770" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_Date_col</span>(<span class="at">group.by =</span> <span class="cn">TRUE</span>, <span class="at">as.wday =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> <span class="co">#add a Date column + group</span></span>
<span id="cb89-771"><a href="#cb89-771" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb89-772"><a href="#cb89-772" aria-hidden="true" tabindex="-1"></a>     <span class="fu">duration_above_threshold</span>(</span>
<span id="cb89-773"><a href="#cb89-773" aria-hidden="true" tabindex="-1"></a>      <span class="at">Light.vector =</span> MEDI,</span>
<span id="cb89-774"><a href="#cb89-774" aria-hidden="true" tabindex="-1"></a>      <span class="at">Time.vector =</span> Datetime,</span>
<span id="cb89-775"><a href="#cb89-775" aria-hidden="true" tabindex="-1"></a>      <span class="at">threshold =</span> <span class="dv">250</span>,</span>
<span id="cb89-776"><a href="#cb89-776" aria-hidden="true" tabindex="-1"></a>      <span class="at">as.df =</span> <span class="cn">TRUE</span></span>
<span id="cb89-777"><a href="#cb89-777" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb89-778"><a href="#cb89-778" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop_last"</span></span>
<span id="cb89-779"><a href="#cb89-779" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb89-780"><a href="#cb89-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-781"><a href="#cb89-781" aria-hidden="true" tabindex="-1"></a>TAT250 <span class="sc">|&gt;</span> <span class="fu">gt</span>()</span>
<span id="cb89-782"><a href="#cb89-782" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-783"><a href="#cb89-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-784"><a href="#cb89-784" aria-hidden="true" tabindex="-1"></a>We can further condense this:</span>
<span id="cb89-785"><a href="#cb89-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-788"><a href="#cb89-788" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-789"><a href="#cb89-789" aria-hidden="true" tabindex="-1"></a>TAT250 <span class="sc">|&gt;</span> </span>
<span id="cb89-790"><a href="#cb89-790" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>() <span class="sc">|&gt;</span> </span>
<span id="cb89-791"><a href="#cb89-791" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb89-792"><a href="#cb89-792" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-793"><a href="#cb89-793" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-794"><a href="#cb89-794" aria-hidden="true" tabindex="-1"></a>That’s all you need to get started with metric calculation in <span class="in">`LightLogR`</span>. While advanced metrics involve additional considerations, this tidy grouped workflow will take you a long way.</span>
<span id="cb89-795"><a href="#cb89-795" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-796"><a href="#cb89-796" aria-hidden="true" tabindex="-1"></a><span class="fu">## Photoperiod</span></span>
<span id="cb89-797"><a href="#cb89-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-798"><a href="#cb89-798" aria-hidden="true" tabindex="-1"></a>Photoperiod is a key covariate in many analyses of personal light exposure. <span class="in">`LightLogR`</span> includes utilities to derive photoperiod information with minimal effort. All you need are geographic coordinates in decimal degrees (latitude, longitude); functions will align photoperiod features to your time series. Provide coordinates in standard decimal format (e.g., <span class="in">`48.52, 9.06`</span>):</span>
<span id="cb89-799"><a href="#cb89-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-802"><a href="#cb89-802" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-803"><a href="#cb89-803" aria-hidden="true" tabindex="-1"></a><span class="co">#specifying coordinates (latitude/longitude)</span></span>
<span id="cb89-804"><a href="#cb89-804" aria-hidden="true" tabindex="-1"></a>coordinates <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">48.521637</span>, <span class="fl">9.057645</span>)</span>
<span id="cb89-805"><a href="#cb89-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-806"><a href="#cb89-806" aria-hidden="true" tabindex="-1"></a><span class="co">#extracting photoperiod information</span></span>
<span id="cb89-807"><a href="#cb89-807" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">extract_photoperiod</span>(coordinates)</span>
<span id="cb89-808"><a href="#cb89-808" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-809"><a href="#cb89-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-810"><a href="#cb89-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-813"><a href="#cb89-813" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-814"><a href="#cb89-814" aria-hidden="true" tabindex="-1"></a><span class="co">#adding photoperiod information</span></span>
<span id="cb89-815"><a href="#cb89-815" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> </span>
<span id="cb89-816"><a href="#cb89-816" aria-hidden="true" tabindex="-1"></a>  dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-817"><a href="#cb89-817" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_photoperiod</span>(coordinates)</span>
<span id="cb89-818"><a href="#cb89-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-819"><a href="#cb89-819" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">head</span>()</span>
<span id="cb89-820"><a href="#cb89-820" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-821"><a href="#cb89-821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-822"><a href="#cb89-822" aria-hidden="true" tabindex="-1"></a><span class="fu">### Photoperiod in visualizations</span></span>
<span id="cb89-823"><a href="#cb89-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-826"><a href="#cb89-826" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-827"><a href="#cb89-827" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-828"><a href="#cb89-828" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb89-829"><a href="#cb89-829" aria-hidden="true" tabindex="-1"></a><span class="co">#if photoperiod information was already added to the data</span></span>
<span id="cb89-830"><a href="#cb89-830" aria-hidden="true" tabindex="-1"></a><span class="co">#nothing has to be specified</span></span>
<span id="cb89-831"><a href="#cb89-831" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> <span class="fu">gg_days</span>() <span class="sc">|&gt;</span> <span class="fu">gg_photoperiod</span>()</span>
<span id="cb89-832"><a href="#cb89-832" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-833"><a href="#cb89-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-836"><a href="#cb89-836" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-837"><a href="#cb89-837" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-838"><a href="#cb89-838" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb89-839"><a href="#cb89-839" aria-hidden="true" tabindex="-1"></a><span class="co">#if no photoperiod information is available in the data, coordinates have to</span></span>
<span id="cb89-840"><a href="#cb89-840" aria-hidden="true" tabindex="-1"></a><span class="co">#be specified</span></span>
<span id="cb89-841"><a href="#cb89-841" aria-hidden="true" tabindex="-1"></a>dataset_red <span class="sc">|&gt;</span> <span class="fu">gg_days</span>() <span class="sc">|&gt;</span> <span class="fu">gg_photoperiod</span>(coordinates)</span>
<span id="cb89-842"><a href="#cb89-842" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-843"><a href="#cb89-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-844"><a href="#cb89-844" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data</span></span>
<span id="cb89-845"><a href="#cb89-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-846"><a href="#cb89-846" aria-hidden="true" tabindex="-1"></a>Photoperiod features make it easy to split data into day and night states—for example, to compute metrics by phase. The <span class="in">`number_states()`</span> function places a counter each time the state changes, effectively numbering successive day and night episodes. Grouping by these counters then allows you to calculate metrics for individual days and nights:</span>
<span id="cb89-847"><a href="#cb89-847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-850"><a href="#cb89-850" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-851"><a href="#cb89-851" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-852"><a href="#cb89-852" aria-hidden="true" tabindex="-1"></a>  <span class="co">#create numbered days and nights:</span></span>
<span id="cb89-853"><a href="#cb89-853" aria-hidden="true" tabindex="-1"></a>  <span class="fu">number_states</span>(photoperiod.state) <span class="sc">|&gt;</span> </span>
<span id="cb89-854"><a href="#cb89-854" aria-hidden="true" tabindex="-1"></a>  <span class="co">#group by Id, day and nights, and also the numbers:</span></span>
<span id="cb89-855"><a href="#cb89-855" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(photoperiod.state, photoperiod.state.count, <span class="at">.add =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb89-856"><a href="#cb89-856" aria-hidden="true" tabindex="-1"></a>  <span class="co">#calculate the brightest hour in each day and each night:</span></span>
<span id="cb89-857"><a href="#cb89-857" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb89-858"><a href="#cb89-858" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bright_dark_period</span>(MEDI, Datetime, <span class="at">timespan =</span> <span class="st">"1 hour"</span>, <span class="at">as.df =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-859"><a href="#cb89-859" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop_last"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb89-860"><a href="#cb89-860" aria-hidden="true" tabindex="-1"></a>  <span class="co">#select (bright_dark_period calulates four metrics: start, end, middle, mean)</span></span>
<span id="cb89-861"><a href="#cb89-861" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Id, photoperiod.state, brightest_1h_mean) <span class="sc">|&gt;</span></span>
<span id="cb89-862"><a href="#cb89-862" aria-hidden="true" tabindex="-1"></a>  <span class="co">#condense the instances to a single summary</span></span>
<span id="cb89-863"><a href="#cb89-863" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>(<span class="at">prefix =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb89-864"><a href="#cb89-864" aria-hidden="true" tabindex="-1"></a>  <span class="co">#show as table</span></span>
<span id="cb89-865"><a href="#cb89-865" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">fmt_number</span>()</span>
<span id="cb89-866"><a href="#cb89-866" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-867"><a href="#cb89-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-868"><a href="#cb89-868" aria-hidden="true" tabindex="-1"></a>This yields the average brightest 1‑hour period for each participant, separately for day and night. Notably, the participant with the highest daytime brightness also shows the lowest nighttime brightness, and vice versa.</span>
<span id="cb89-869"><a href="#cb89-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-870"><a href="#cb89-870" aria-hidden="true" tabindex="-1"></a><span class="fu">## Distribution of light exposure</span></span>
<span id="cb89-871"><a href="#cb89-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-872"><a href="#cb89-872" aria-hidden="true" tabindex="-1"></a>Personal light‑exposure data exhibit a characteristic distribution (see figure): they are strongly right‑skewed—approximately log‑normal—and contain many zeros (i.e., zero‑inflation).</span>
<span id="cb89-873"><a href="#cb89-873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-874"><a href="#cb89-874" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb89-875"><a href="#cb89-875" aria-hidden="true" tabindex="-1"></a><span class="al">![Distribution of light exposure in the environment and for a participant, both at night and day](assets/Distribution.png)</span></span>
<span id="cb89-876"><a href="#cb89-876" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-877"><a href="#cb89-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-878"><a href="#cb89-878" aria-hidden="true" tabindex="-1"></a>Consequently, the arithmetic mean is not a representative summary for these data. We can visualize this by placing common location metrics on the distribution.</span>
<span id="cb89-879"><a href="#cb89-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-882"><a href="#cb89-882" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-883"><a href="#cb89-883" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-884"><a href="#cb89-884" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb89-885"><a href="#cb89-885" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb89-886"><a href="#cb89-886" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(MEDI),</span>
<span id="cb89-887"><a href="#cb89-887" aria-hidden="true" tabindex="-1"></a>    <span class="at">median =</span> <span class="fu">median</span>(MEDI),</span>
<span id="cb89-888"><a href="#cb89-888" aria-hidden="true" tabindex="-1"></a>    <span class="at">geo_mean =</span> <span class="fu">exp</span>(<span class="fu">mean</span>(<span class="fu">log</span>(MEDI[MEDI <span class="sc">&gt;</span> <span class="dv">0</span>]), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb89-889"><a href="#cb89-889" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb89-890"><a href="#cb89-890" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb89-891"><a href="#cb89-891" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-892"><a href="#cb89-892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-895"><a href="#cb89-895" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-896"><a href="#cb89-896" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-897"><a href="#cb89-897" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate_Datetime</span>(<span class="st">"5 min"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb89-898"><a href="#cb89-898" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>MEDI, <span class="at">y =</span> <span class="fu">after_stat</span>(ncount))) <span class="sc">+</span></span>
<span id="cb89-899"><a href="#cb89-899" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb89-900"><a href="#cb89-900" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"symlog"</span>, </span>
<span id="cb89-901"><a href="#cb89-901" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">10</span><span class="sc">^</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>)), </span>
<span id="cb89-902"><a href="#cb89-902" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels=</span> <span class="fu">expression</span>(<span class="dv">0</span>,<span class="dv">10</span><span class="sc">^</span><span class="dv">0</span>,<span class="dv">10</span><span class="sc">^</span><span class="dv">1</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">2</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">3</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">4</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">5</span>)</span>
<span id="cb89-903"><a href="#cb89-903" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">+</span></span>
<span id="cb89-904"><a href="#cb89-904" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">c</span>(<span class="dv">282</span>, <span class="dv">9</span>, <span class="dv">33</span>), <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb89-905"><a href="#cb89-905" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb89-906"><a href="#cb89-906" aria-hidden="true" tabindex="-1"></a>  <span class="co"># facet_wrap(~Id) +</span></span>
<span id="cb89-907"><a href="#cb89-907" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Melanopic illuminance (lx, mel EDI)"</span>, <span class="at">y =</span> <span class="st">"Scaled counts (max = 1)"</span>)</span>
<span id="cb89-908"><a href="#cb89-908" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-909"><a href="#cb89-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-910"><a href="#cb89-910" aria-hidden="true" tabindex="-1"></a>To better characterize zero‑inflated, right‑skewed light data, use <span class="in">`log_zero_inflated()`</span>. The function adds a small constant (ε) to every observation **before taking logs**, making the transform well‑defined at zero. Choose ε based on the device’s measurement resolution/accuracy; for wearables spanning roughly 1–10^5&nbsp;lx, we recommend ε = 0.1&nbsp;lx. The inverse, <span class="in">`exp_zero_inflated()`</span>, returns values to the original scale by exponentiating and then subtracting the same ε. The default basis for these functions is 10.</span>
<span id="cb89-911"><a href="#cb89-911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-914"><a href="#cb89-914" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-915"><a href="#cb89-915" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-916"><a href="#cb89-916" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb89-917"><a href="#cb89-917" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb89-918"><a href="#cb89-918" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(MEDI),</span>
<span id="cb89-919"><a href="#cb89-919" aria-hidden="true" tabindex="-1"></a>    <span class="at">median =</span> <span class="fu">median</span>(MEDI),</span>
<span id="cb89-920"><a href="#cb89-920" aria-hidden="true" tabindex="-1"></a>    <span class="at">geo_mean =</span>  <span class="fu">exp</span>(<span class="fu">mean</span>(<span class="fu">log</span>(MEDI[MEDI <span class="sc">&gt;</span> <span class="dv">0</span>]), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb89-921"><a href="#cb89-921" aria-hidden="true" tabindex="-1"></a>    <span class="at">log_zero_inflated_mean =</span> </span>
<span id="cb89-922"><a href="#cb89-922" aria-hidden="true" tabindex="-1"></a>      MEDI <span class="sc">|&gt;</span> <span class="fu">log_zero_inflated</span>() <span class="sc">|&gt;</span> <span class="fu">mean</span>() <span class="sc">|&gt;</span> <span class="fu">exp_zero_inflated</span>()</span>
<span id="cb89-923"><a href="#cb89-923" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb89-924"><a href="#cb89-924" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb89-925"><a href="#cb89-925" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-926"><a href="#cb89-926" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-927"><a href="#cb89-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-930"><a href="#cb89-930" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-931"><a href="#cb89-931" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-932"><a href="#cb89-932" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate_Datetime</span>(<span class="st">"5 min"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb89-933"><a href="#cb89-933" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>MEDI, <span class="at">y =</span> <span class="fu">after_stat</span>(ncount))) <span class="sc">+</span></span>
<span id="cb89-934"><a href="#cb89-934" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb89-935"><a href="#cb89-935" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"symlog"</span>, </span>
<span id="cb89-936"><a href="#cb89-936" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">10</span><span class="sc">^</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>)), </span>
<span id="cb89-937"><a href="#cb89-937" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels=</span> <span class="fu">expression</span>(<span class="dv">0</span>,<span class="dv">10</span><span class="sc">^</span><span class="dv">0</span>,<span class="dv">10</span><span class="sc">^</span><span class="dv">1</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">2</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">3</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">4</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">5</span>)</span>
<span id="cb89-938"><a href="#cb89-938" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">+</span></span>
<span id="cb89-939"><a href="#cb89-939" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">c</span>(<span class="dv">282</span>, <span class="dv">9</span>, <span class="dv">33</span>, <span class="dv">7</span>), <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb89-940"><a href="#cb89-940" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb89-941"><a href="#cb89-941" aria-hidden="true" tabindex="-1"></a>  <span class="co"># facet_wrap(~Id) +</span></span>
<span id="cb89-942"><a href="#cb89-942" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Melanopic illuminance (lx, mel EDI)"</span>, <span class="at">y =</span> <span class="st">"Scaled counts (max = 1)"</span>)</span>
<span id="cb89-943"><a href="#cb89-943" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-944"><a href="#cb89-944" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-945"><a href="#cb89-945" aria-hidden="true" tabindex="-1"></a><span class="fu">### Log zero-inflated with metrics</span></span>
<span id="cb89-946"><a href="#cb89-946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-947"><a href="#cb89-947" aria-hidden="true" tabindex="-1"></a>When computing averaging metrics, apply the transformation **explicitly** to the variable you pass to the metric. This ensures the statistic is computed on the intended scale and makes your code easy to audit later. </span>
<span id="cb89-948"><a href="#cb89-948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-949"><a href="#cb89-949" aria-hidden="true" tabindex="-1"></a>For the zero‑inflated log approach, transform before averaging and (if desired) back‑transform for reporting:</span>
<span id="cb89-950"><a href="#cb89-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-953"><a href="#cb89-953" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-954"><a href="#cb89-954" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-955"><a href="#cb89-955" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Id <span class="sc">==</span> <span class="st">"216"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb89-956"><a href="#cb89-956" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_Date_col</span>(<span class="at">group.by =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb89-957"><a href="#cb89-957" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb89-958"><a href="#cb89-958" aria-hidden="true" tabindex="-1"></a>    <span class="co">#without transformation:</span></span>
<span id="cb89-959"><a href="#cb89-959" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bright_dark_period</span>(MEDI, Datetime, <span class="at">as.df =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-960"><a href="#cb89-960" aria-hidden="true" tabindex="-1"></a>    <span class="co">#with transformation:</span></span>
<span id="cb89-961"><a href="#cb89-961" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bright_dark_period</span>(</span>
<span id="cb89-962"><a href="#cb89-962" aria-hidden="true" tabindex="-1"></a>      <span class="fu">log_zero_inflated</span>(MEDI),</span>
<span id="cb89-963"><a href="#cb89-963" aria-hidden="true" tabindex="-1"></a>      <span class="at">timespan =</span> <span class="st">"9.99 hours"</span>, <span class="co">#needs to be different from 10 or it overwrites</span></span>
<span id="cb89-964"><a href="#cb89-964" aria-hidden="true" tabindex="-1"></a>      Datetime, <span class="at">as.df =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-965"><a href="#cb89-965" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop_last"</span></span>
<span id="cb89-966"><a href="#cb89-966" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">|&gt;</span> </span>
<span id="cb89-967"><a href="#cb89-967" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Id, Date, brightest_10h_mean, brightest_9<span class="fl">.99</span>h_mean) <span class="sc">|&gt;</span> </span>
<span id="cb89-968"><a href="#cb89-968" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">brightest_9.99h_mean =</span> <span class="fu">exp_zero_inflated</span>(brightest_9<span class="fl">.99</span>h_mean)) <span class="sc">|&gt;</span> </span>
<span id="cb89-969"><a href="#cb89-969" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">brightest_10h_zero_infl_mean =</span> brightest_9<span class="fl">.99</span>h_mean) <span class="sc">|&gt;</span> </span>
<span id="cb89-970"><a href="#cb89-970" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb89-971"><a href="#cb89-971" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>()</span>
<span id="cb89-972"><a href="#cb89-972" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-973"><a href="#cb89-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-974"><a href="#cb89-974" aria-hidden="true" tabindex="-1"></a><span class="fu">## Summaries</span></span>
<span id="cb89-975"><a href="#cb89-975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-976"><a href="#cb89-976" aria-hidden="true" tabindex="-1"></a>Summary helpers provide fast, dataset‑wide overviews. Existing examples include <span class="in">`gap_table()`</span> (tabular diagnostics) and <span class="in">`gg_overview()`</span> (visual timeline). In the next release, two higher‑level tools are planned: <span class="in">`grand_overview()`</span> (a dataset‑level summary plot) and <span class="in">`light_summary_table()`</span> (a table of key exposure metrics). These are not available in <span class="in">`LightLogR 0.9.3`</span> but are slated for an upcoming release and are shown in the next two sections as *sneak previews*. In keeping with <span class="in">`LightLogR`</span>’s design, they will have straightforward interfaces and play well with grouped/tidy workflows.</span>
<span id="cb89-977"><a href="#cb89-977" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-978"><a href="#cb89-978" aria-hidden="true" tabindex="-1"></a><span class="fu">### Summary plot</span></span>
<span id="cb89-979"><a href="#cb89-979" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-982"><a href="#cb89-982" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-983"><a href="#cb89-983" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb89-984"><a href="#cb89-984" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb89-985"><a href="#cb89-985" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb89-986"><a href="#cb89-986" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb89-987"><a href="#cb89-987" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-988"><a href="#cb89-988" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grand_overview</span>(coordinates, <span class="co">#provide the coordinates</span></span>
<span id="cb89-989"><a href="#cb89-989" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Tübingen"</span>, <span class="co">#provide a site name</span></span>
<span id="cb89-990"><a href="#cb89-990" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Germany"</span>, <span class="co">#provide a country name</span></span>
<span id="cb89-991"><a href="#cb89-991" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"#DDCC77"</span>, <span class="co">#provide a color for the dataset</span></span>
<span id="cb89-992"><a href="#cb89-992" aria-hidden="true" tabindex="-1"></a>                 <span class="at">photoperiod_sequence =</span> <span class="dv">1</span> <span class="co">#specify the photoperiod resolution</span></span>
<span id="cb89-993"><a href="#cb89-993" aria-hidden="true" tabindex="-1"></a>                 )</span>
<span id="cb89-994"><a href="#cb89-994" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-995"><a href="#cb89-995" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-996"><a href="#cb89-996" aria-hidden="true" tabindex="-1"></a><span class="fu">### Summary table</span></span>
<span id="cb89-997"><a href="#cb89-997" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1000"><a href="#cb89-1000" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-1001"><a href="#cb89-1001" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-1002"><a href="#cb89-1002" aria-hidden="true" tabindex="-1"></a><span class="fu">light_summary_table</span>(</span>
<span id="cb89-1003"><a href="#cb89-1003" aria-hidden="true" tabindex="-1"></a>  coordinates, <span class="co">#provide coordinates</span></span>
<span id="cb89-1004"><a href="#cb89-1004" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Tuebingen"</span>, <span class="co">#provide a site name</span></span>
<span id="cb89-1005"><a href="#cb89-1005" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Germany"</span>, <span class="co">#provide a country name</span></span>
<span id="cb89-1006"><a href="#cb89-1006" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#DDCC77"</span>, <span class="co">#provide a color for histograms</span></span>
<span id="cb89-1007"><a href="#cb89-1007" aria-hidden="true" tabindex="-1"></a>  <span class="at">histograms =</span> <span class="cn">TRUE</span> <span class="co">#show histograms</span></span>
<span id="cb89-1008"><a href="#cb89-1008" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb89-1009"><a href="#cb89-1009" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-1010"><a href="#cb89-1010" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1011"><a href="#cb89-1011" aria-hidden="true" tabindex="-1"></a><span class="fu">## Processing &amp; states</span></span>
<span id="cb89-1012"><a href="#cb89-1012" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1013"><a href="#cb89-1013" aria-hidden="true" tabindex="-1"></a><span class="in">`LightLogR`</span> contains many functions to manipulate, expand, or condense datasets. We will highlight the most important ones.</span>
<span id="cb89-1014"><a href="#cb89-1014" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1015"><a href="#cb89-1015" aria-hidden="true" tabindex="-1"></a><span class="fu">### `aggregate_Datetime()`</span></span>
<span id="cb89-1016"><a href="#cb89-1016" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1017"><a href="#cb89-1017" aria-hidden="true" tabindex="-1"></a><span class="in">`aggregate_Datetime()`</span> is a general‑purpose resampling utility that bins observations into fixed‑duration intervals and computes a summary statistic per bin. It is intentionally opinionated, providing sensible defaults (e.g., mean for numeric columns and mode for character/factor columns), but all summaries are configurable and additional metrics can be requested. Use it as a lightweight formatter to change the effective measurement interval after the fact (e.g., re‑epoching from 10 s to 1 min).</span>
<span id="cb89-1018"><a href="#cb89-1018" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1021"><a href="#cb89-1021" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-1022"><a href="#cb89-1022" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-1023"><a href="#cb89-1023" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb89-1024"><a href="#cb89-1024" aria-hidden="true" tabindex="-1"></a>  dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-1025"><a href="#cb89-1025" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate_Datetime</span>(<span class="st">"1 hour"</span>) <span class="sc">|&gt;</span> <span class="co">#try to set different units: "15 mins", "2 hours",...</span></span>
<span id="cb89-1026"><a href="#cb89-1026" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_days</span>(<span class="at">aes_col =</span> Id)</span>
<span id="cb89-1027"><a href="#cb89-1027" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-1028"><a href="#cb89-1028" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1029"><a href="#cb89-1029" aria-hidden="true" tabindex="-1"></a><span class="fu">### `aggregate_Date()`</span></span>
<span id="cb89-1030"><a href="#cb89-1030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1031"><a href="#cb89-1031" aria-hidden="true" tabindex="-1"></a><span class="in">`aggregate_Date()`</span> is a companion function that collapses each group into a single 24‑hour profile, optionally re‑epoching the data in the process. It is well‑suited to very large datasets when you need an overview of the *average day*. It applies the same summarization rules as <span class="in">`aggregate_Datetime()`</span> and is equally configurable to your requirements:</span>
<span id="cb89-1032"><a href="#cb89-1032" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1035"><a href="#cb89-1035" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-1036"><a href="#cb89-1036" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-1037"><a href="#cb89-1037" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb89-1038"><a href="#cb89-1038" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-1039"><a href="#cb89-1039" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate_Date</span>(<span class="at">unit =</span> <span class="st">"5 minutes"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb89-1040"><a href="#cb89-1040" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_days</span>(<span class="at">aes_col =</span> Id)</span>
<span id="cb89-1041"><a href="#cb89-1041" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-1042"><a href="#cb89-1042" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1043"><a href="#cb89-1043" aria-hidden="true" tabindex="-1"></a><span class="fu">### `gg_doubleplot()`</span></span>
<span id="cb89-1044"><a href="#cb89-1044" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1045"><a href="#cb89-1045" aria-hidden="true" tabindex="-1"></a><span class="in">`aggregate_Date()`</span> pairs well with <span class="in">`gg_doubleplot()`</span>, which duplicates each day with an offset to reveal patterns that span midnight. While it can be applied to any dataset, use it on only a handful of days at a time to keep plots readable. If the dataset it is called on contains more than one day <span class="in">`gg_doubleplot()`</span> defaults to displaying the next day instead of duplicating the same day.</span>
<span id="cb89-1046"><a href="#cb89-1046" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1049"><a href="#cb89-1049" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-1050"><a href="#cb89-1050" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-1051"><a href="#cb89-1051" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb89-1052"><a href="#cb89-1052" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-1053"><a href="#cb89-1053" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate_Date</span>(<span class="at">unit =</span> <span class="st">"30 minutes"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb89-1054"><a href="#cb89-1054" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_doubleplot</span>(<span class="at">aes_col =</span> Id, <span class="at">aes_fill =</span> Id)</span>
<span id="cb89-1055"><a href="#cb89-1055" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-1056"><a href="#cb89-1056" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1059"><a href="#cb89-1059" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-1060"><a href="#cb89-1060" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-1061"><a href="#cb89-1061" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb89-1062"><a href="#cb89-1062" aria-hidden="true" tabindex="-1"></a><span class="co"># it is recommended to add photoperiod information after aggregating to the Date</span></span>
<span id="cb89-1063"><a href="#cb89-1063" aria-hidden="true" tabindex="-1"></a><span class="co"># level and prior to the doubleplot for best results.</span></span>
<span id="cb89-1064"><a href="#cb89-1064" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-1065"><a href="#cb89-1065" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate_Date</span>(<span class="at">unit =</span> <span class="st">"30 minutes"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb89-1066"><a href="#cb89-1066" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_photoperiod</span>(coordinates, <span class="at">overwrite =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb89-1067"><a href="#cb89-1067" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_doubleplot</span>(<span class="at">aes_fill =</span> Id) <span class="sc">|&gt;</span></span>
<span id="cb89-1068"><a href="#cb89-1068" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_photoperiod</span>()</span>
<span id="cb89-1069"><a href="#cb89-1069" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-1070"><a href="#cb89-1070" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1071"><a href="#cb89-1071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1072"><a href="#cb89-1072" aria-hidden="true" tabindex="-1"></a><span class="fu">### Beyond inital variables</span></span>
<span id="cb89-1073"><a href="#cb89-1073" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1074"><a href="#cb89-1074" aria-hidden="true" tabindex="-1"></a>Both <span class="in">`aggregate_Datetime()`</span> and <span class="in">`aggregate_Date()`</span> allow for the calculation of additional metrics within their respective bins. One use case is to gauge the spread of the data within certain times. A simple approach is to plot the minimum and maximum value of a dataset that was condensed to a single day.</span>
<span id="cb89-1075"><a href="#cb89-1075" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1078"><a href="#cb89-1078" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-1079"><a href="#cb89-1079" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-1080"><a href="#cb89-1080" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb89-1081"><a href="#cb89-1081" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-1082"><a href="#cb89-1082" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate_Date</span>(<span class="at">unit =</span> <span class="st">"30 minutes"</span>,</span>
<span id="cb89-1083"><a href="#cb89-1083" aria-hidden="true" tabindex="-1"></a>                 <span class="at">lower =</span> <span class="fu">min</span>(MEDI), <span class="co">#create new variables...</span></span>
<span id="cb89-1084"><a href="#cb89-1084" aria-hidden="true" tabindex="-1"></a>                 <span class="at">upper =</span> <span class="fu">max</span>(MEDI)  <span class="co">#...as many as needed</span></span>
<span id="cb89-1085"><a href="#cb89-1085" aria-hidden="true" tabindex="-1"></a>                 ) <span class="sc">|&gt;</span> </span>
<span id="cb89-1086"><a href="#cb89-1086" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_doubleplot</span>(<span class="at">geom =</span> <span class="st">"blank"</span>) <span class="sc">+</span> <span class="co"># use gg_doubleplot only as a canvas</span></span>
<span id="cb89-1087"><a href="#cb89-1087" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper, <span class="at">fill =</span> Id), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb89-1088"><a href="#cb89-1088" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb89-1089"><a href="#cb89-1089" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-1090"><a href="#cb89-1090" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1091"><a href="#cb89-1091" aria-hidden="true" tabindex="-1"></a><span class="fu">### States</span></span>
<span id="cb89-1092"><a href="#cb89-1092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1093"><a href="#cb89-1093" aria-hidden="true" tabindex="-1"></a>States, in the context of LightLogR, means any non-numeric variable. Those can be part of the dataset, be calculated from the dataset (e.g., mel EDI &gt;= 250 lx), or added from an external source. We showcase some capabilities by dividing the dataset into sections by the Brown et al. (2022) recommendations for healthy lighting, using the <span class="in">`Brown_cut()`</span> function.</span>
<span id="cb89-1094"><a href="#cb89-1094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1097"><a href="#cb89-1097" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-1098"><a href="#cb89-1098" aria-hidden="true" tabindex="-1"></a>dataset_1day <span class="ot">&lt;-</span> </span>
<span id="cb89-1099"><a href="#cb89-1099" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span> </span>
<span id="cb89-1100"><a href="#cb89-1100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Brown_cut</span>() <span class="sc">|&gt;</span> <span class="co">#creating a column with the cuts</span></span>
<span id="cb89-1101"><a href="#cb89-1101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate_Date</span>(<span class="at">unit =</span> <span class="st">"30 minutes"</span>, </span>
<span id="cb89-1102"><a href="#cb89-1102" aria-hidden="true" tabindex="-1"></a>                 <span class="at">numeric.handler =</span> median <span class="co">#note that we switched from mean to median</span></span>
<span id="cb89-1103"><a href="#cb89-1103" aria-hidden="true" tabindex="-1"></a>                 ) <span class="sc">|&gt;</span> </span>
<span id="cb89-1104"><a href="#cb89-1104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> state <span class="sc">|&gt;</span> <span class="fu">fct_relevel</span>(<span class="st">"≥250lx"</span>, <span class="st">"≤10lx"</span>, <span class="st">"≤1lx"</span>)) <span class="co">#order the levels</span></span>
<span id="cb89-1105"><a href="#cb89-1105" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-1106"><a href="#cb89-1106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1107"><a href="#cb89-1107" aria-hidden="true" tabindex="-1"></a><span class="fu">#### `gg_state()`</span></span>
<span id="cb89-1108"><a href="#cb89-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1109"><a href="#cb89-1109" aria-hidden="true" tabindex="-1"></a><span class="in">`gg_state()`</span> augments an existing plot by adding background rectangles that mark state intervals. When multiple states are present, map them to distinct fills (or colors) to improve readability.</span>
<span id="cb89-1110"><a href="#cb89-1110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1113"><a href="#cb89-1113" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-1114"><a href="#cb89-1114" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb89-1115"><a href="#cb89-1115" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb89-1116"><a href="#cb89-1116" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb89-1117"><a href="#cb89-1117" aria-hidden="true" tabindex="-1"></a>dataset_1day <span class="sc">|&gt;</span> </span>
<span id="cb89-1118"><a href="#cb89-1118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_doubleplot</span>(<span class="at">col =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="dv">1</span>, <span class="at">geom =</span> <span class="st">"line"</span>) <span class="sc">|&gt;</span></span>
<span id="cb89-1119"><a href="#cb89-1119" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_state</span>(<span class="at">State.colname =</span> state, <span class="at">aes_fill =</span> state) <span class="sc">+</span></span>
<span id="cb89-1120"><a href="#cb89-1120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Brown levels"</span>)</span>
<span id="cb89-1121"><a href="#cb89-1121" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-1122"><a href="#cb89-1122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1123"><a href="#cb89-1123" aria-hidden="true" tabindex="-1"></a><span class="fu">### `durations()`</span></span>
<span id="cb89-1124"><a href="#cb89-1124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1125"><a href="#cb89-1125" aria-hidden="true" tabindex="-1"></a>If you need a numeric summary of states, <span class="in">`durations()`</span> computes the total time spent in each state per grouping (e.g., by <span class="in">`Id`</span>, by day). With a small reshaping step, you can produce a tidy table showing the average duration each participant spends in each state:</span>
<span id="cb89-1126"><a href="#cb89-1126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1129"><a href="#cb89-1129" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-1130"><a href="#cb89-1130" aria-hidden="true" tabindex="-1"></a>dataset_1day <span class="sc">|&gt;</span> </span>
<span id="cb89-1131"><a href="#cb89-1131" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, <span class="at">.add =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> <span class="co">#adding Brown states to the grouping</span></span>
<span id="cb89-1132"><a href="#cb89-1132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">durations</span>(MEDI) <span class="sc">|&gt;</span> <span class="co">#calculating durations</span></span>
<span id="cb89-1133"><a href="#cb89-1133" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span>  <span class="co">#remove all grouping</span></span>
<span id="cb89-1134"><a href="#cb89-1134" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">fct_na_value_to_level</span>(state, <span class="st">"10-250lx"</span>)) <span class="sc">|&gt;</span> <span class="co">#name NA level</span></span>
<span id="cb89-1135"><a href="#cb89-1135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> Id, <span class="at">names_from =</span> state, <span class="at">values_from =</span> duration) <span class="sc">|&gt;</span> <span class="co">#reshape</span></span>
<span id="cb89-1136"><a href="#cb89-1136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb89-1137"><a href="#cb89-1137" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-1138"><a href="#cb89-1138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1139"><a href="#cb89-1139" aria-hidden="true" tabindex="-1"></a><span class="fu">### `extract_states()` &amp; `summarize_numeric()`</span></span>
<span id="cb89-1140"><a href="#cb89-1140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1141"><a href="#cb89-1141" aria-hidden="true" tabindex="-1"></a>If your interest in states centers on *individual occurrences* - for example, how often a state occurred, how long each episode persisted, or when episodes began - use the following tools. <span class="in">`extract_states()`</span> returns an occurrence‑level table (one row per episode) with start/end times and durations; <span class="in">`summarize_numeric()`</span> then aggregates those episodes into concise metrics (e.g., counts, total duration, mean/median episode length) by the grouping you specify.</span>
<span id="cb89-1142"><a href="#cb89-1142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1145"><a href="#cb89-1145" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-1146"><a href="#cb89-1146" aria-hidden="true" tabindex="-1"></a>dataset_1day <span class="sc">|&gt;</span> </span>
<span id="cb89-1147"><a href="#cb89-1147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_states</span>(state) <span class="sc">|&gt;</span> </span>
<span id="cb89-1148"><a href="#cb89-1148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_numeric</span>() <span class="sc">|&gt;</span> </span>
<span id="cb89-1149"><a href="#cb89-1149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb89-1150"><a href="#cb89-1150" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-1151"><a href="#cb89-1151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1152"><a href="#cb89-1152" aria-hidden="true" tabindex="-1"></a><span class="fu">## It's a wrap</span></span>
<span id="cb89-1153"><a href="#cb89-1153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-1154"><a href="#cb89-1154" aria-hidden="true" tabindex="-1"></a>This concludes the first part of the <span class="in">`LightLogR`</span> tutorial. We hope it has given you a nice introduction to the package and convinced you to try it out with your own data and in your local installation. For more on <span class="in">`LightLogR`</span>, we recommend the <span class="co">[</span><span class="ot">documentation page</span><span class="co">](https://tscnlab.github.io/LightLogR/)</span>. If you want to stay up to date with the development of the package, you can sign up to our <span class="co">[</span><span class="ot">LightLogR mailing list</span><span class="co">](https://lists.lrz.de/mailman/listinfo/lightlogr-users)</span>.</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/tscnlab/LightLogR_webinar/edit/main/beginner.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/tscnlab/LightLogR_webinar/issues" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer><script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>


</body></html>